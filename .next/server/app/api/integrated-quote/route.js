"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/integrated-quote/route";
exports.ids = ["app/api/integrated-quote/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrated-quote%2Froute&page=%2Fapi%2Fintegrated-quote%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrated-quote%2Froute.ts&appDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrated-quote%2Froute&page=%2Fapi%2Fintegrated-quote%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrated-quote%2Froute.ts&appDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_matias_Documents_GitHub_Dashboard_bmc_proyecto_cotizacion_whatsapp_05_dashboard_ui_src_app_api_integrated_quote_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/integrated-quote/route.ts */ \"(rsc)/./src/app/api/integrated-quote/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/integrated-quote/route\",\n        pathname: \"/api/integrated-quote\",\n        filename: \"route\",\n        bundlePath: \"app/api/integrated-quote/route\"\n    },\n    resolvedPagePath: \"/Users/matias/Documents/GitHub/Dashboard-bmc/proyecto-cotizacion-whatsapp/05_dashboard_ui/src/app/api/integrated-quote/route.ts\",\n    nextConfigOutput,\n    userland: _Users_matias_Documents_GitHub_Dashboard_bmc_proyecto_cotizacion_whatsapp_05_dashboard_ui_src_app_api_integrated_quote_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/integrated-quote/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnRlZ3JhdGVkLXF1b3RlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZpbnRlZ3JhdGVkLXF1b3RlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGaW50ZWdyYXRlZC1xdW90ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hdGlhcyUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRkRhc2hib2FyZC1ibWMlMkZwcm95ZWN0by1jb3RpemFjaW9uLXdoYXRzYXBwJTJGMDVfZGFzaGJvYXJkX3VpJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRm1hdGlhcyUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRkRhc2hib2FyZC1ibWMlMkZwcm95ZWN0by1jb3RpemFjaW9uLXdoYXRzYXBwJTJGMDVfZGFzaGJvYXJkX3VpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrRTtBQUM1SjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlcnNhdGlvbmFsLXF1b3RpbmctZGFzaGJvYXJkLz81YTNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9tYXRpYXMvRG9jdW1lbnRzL0dpdEh1Yi9EYXNoYm9hcmQtYm1jL3Byb3llY3RvLWNvdGl6YWNpb24td2hhdHNhcHAvMDVfZGFzaGJvYXJkX3VpL3NyYy9hcHAvYXBpL2ludGVncmF0ZWQtcXVvdGUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ludGVncmF0ZWQtcXVvdGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pbnRlZ3JhdGVkLXF1b3RlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbnRlZ3JhdGVkLXF1b3RlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21hdGlhcy9Eb2N1bWVudHMvR2l0SHViL0Rhc2hib2FyZC1ibWMvcHJveWVjdG8tY290aXphY2lvbi13aGF0c2FwcC8wNV9kYXNoYm9hcmRfdWkvc3JjL2FwcC9hcGkvaW50ZWdyYXRlZC1xdW90ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW50ZWdyYXRlZC1xdW90ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrated-quote%2Froute&page=%2Fapi%2Fintegrated-quote%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrated-quote%2Froute.ts&appDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/integrated-quote/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/integrated-quote/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_integrated_quote_engine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/integrated-quote-engine */ \"(rsc)/./src/lib/integrated-quote-engine.ts\");\n/* harmony import */ var _lib_initialize_system__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/initialize-system */ \"(rsc)/./src/lib/initialize-system.ts\");\n\n\n\nlet systemInitialized = false;\nasync function ensureSystemInitialized() {\n    if (!systemInitialized) {\n        const result = await (0,_lib_initialize_system__WEBPACK_IMPORTED_MODULE_2__.initializeBMCSystem)();\n        if (result.success) {\n            systemInitialized = true;\n        } else {\n            throw new Error(`Sistema no inicializado: ${result.error}`);\n        }\n    }\n}\n/**\n * üß† API Endpoint para Motor de Cotizaci√≥n Integrado\n * \n * Este endpoint integra el sistema de cotizaci√≥n con la base de conocimiento\n * evolutiva que aprende de cada interacci√≥n.\n */ async function POST(request) {\n    try {\n        await ensureSystemInitialized();\n        const { consulta, userPhone, userName, action } = await request.json();\n        if (!consulta || !userPhone) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required parameters: consulta, userPhone\"\n            }, {\n                status: 400\n            });\n        }\n        switch(action){\n            case \"process\":\n                return await procesarConsulta(consulta, userPhone, userName);\n            case \"metrics\":\n                return await obtenerMetricas();\n            case \"update_knowledge\":\n                return await actualizarBaseConocimiento();\n            case \"analyze_patterns\":\n                return await analizarPatrones();\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid action. Use: process, metrics, update_knowledge, analyze_patterns\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Error in integrated-quote API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * üîÑ Procesar Consulta con IA Integrada\n */ async function procesarConsulta(consulta, userPhone, userName) {\n    try {\n        const respuesta = await _lib_integrated_quote_engine__WEBPACK_IMPORTED_MODULE_1__.motorCotizacionIntegrado.procesarConsulta(consulta, userPhone, userName);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                respuesta,\n                timestamp: new Date().toISOString(),\n                session_id: `sess_${Date.now()}`,\n                user_phone: userPhone\n            }\n        });\n    } catch (error) {\n        console.error(\"Error procesando consulta:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error procesando consulta\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * üìä Obtener M√©tricas del Sistema\n */ async function obtenerMetricas() {\n    try {\n        const metricas = await _lib_integrated_quote_engine__WEBPACK_IMPORTED_MODULE_1__.motorCotizacionIntegrado.obtenerMetricas();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                metricas,\n                timestamp: new Date().toISOString(),\n                status: \"active\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error obteniendo m\\xe9tricas:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error obteniendo m\\xe9tricas\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * üß† Actualizar Base de Conocimiento\n */ async function actualizarBaseConocimiento() {\n    try {\n        await _lib_integrated_quote_engine__WEBPACK_IMPORTED_MODULE_1__.motorCotizacionIntegrado.actualizarBaseConocimiento();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Base de conocimiento actualizada correctamente\",\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error(\"Error actualizando base de conocimiento:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error actualizando base de conocimiento\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * üîç Analizar Patrones de Venta\n */ async function analizarPatrones() {\n    try {\n        // Esta funci√≥n podr√≠a implementar an√°lisis m√°s avanzados\n        const metricas = await _lib_integrated_quote_engine__WEBPACK_IMPORTED_MODULE_1__.motorCotizacionIntegrado.obtenerMetricas();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                patrones_identificados: metricas.patrones_identificados,\n                productos_mas_consultados: \"An\\xe1lisis en desarrollo\",\n                zonas_mas_activas: \"An\\xe1lisis en desarrollo\",\n                horarios_pico: \"An\\xe1lisis en desarrollo\",\n                timestamp: new Date().toISOString()\n            }\n        });\n    } catch (error) {\n        console.error(\"Error analizando patrones:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Error analizando patrones\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * GET - Obtener informaci√≥n del sistema\n */ async function GET(request) {\n    try {\n        await ensureSystemInitialized();\n        const { searchParams } = new URL(request.url);\n        const action = searchParams.get(\"action\") || \"info\";\n        switch(action){\n            case \"info\":\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        name: \"Motor de Cotizaci\\xf3n Integrado BMC\",\n                        version: \"1.0.0\",\n                        description: \"Sistema de cotizaci\\xf3n con base de conocimiento evolutiva\",\n                        features: [\n                            \"IA Conversacional Inteligente\",\n                            \"Base de Conocimiento Din\\xe1mica\",\n                            \"An\\xe1lisis de Patrones de Venta\",\n                            \"Personalizaci\\xf3n por Cliente\",\n                            \"Aprendizaje Autom\\xe1tico\",\n                            \"M\\xe9tricas en Tiempo Real\"\n                        ],\n                        endpoints: {\n                            \"POST /api/integrated-quote\": {\n                                actions: [\n                                    \"process\",\n                                    \"metrics\",\n                                    \"update_knowledge\",\n                                    \"analyze_patterns\"\n                                ]\n                            }\n                        },\n                        timestamp: new Date().toISOString()\n                    }\n                });\n            case \"health\":\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        status: \"healthy\",\n                        uptime: process.uptime(),\n                        memory: process.memoryUsage(),\n                        timestamp: new Date().toISOString()\n                    }\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid action. Use: info, health\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"Error in integrated-quote GET:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9pbnRlZ3JhdGVkLXF1b3RlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ2lCO0FBQ1g7QUFFN0QsSUFBSUcsb0JBQW9CO0FBQ3hCLGVBQWVDO0lBQ2IsSUFBSSxDQUFDRCxtQkFBbUI7UUFDdEIsTUFBTUUsU0FBUyxNQUFNSCwyRUFBbUJBO1FBQ3hDLElBQUlHLE9BQU9DLE9BQU8sRUFBRTtZQUNsQkgsb0JBQW9CO1FBQ3RCLE9BQU87WUFDTCxNQUFNLElBQUlJLE1BQU0sQ0FBQyx5QkFBeUIsRUFBRUYsT0FBT0csS0FBSyxDQUFDLENBQUM7UUFDNUQ7SUFDRjtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FFTSxlQUFlQyxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTU47UUFFTixNQUFNLEVBQUVPLFFBQVEsRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRSxHQUFHLE1BQU1KLFFBQVFLLElBQUk7UUFFcEUsSUFBSSxDQUFDSixZQUFZLENBQUNDLFdBQVc7WUFDM0IsT0FBT1oscURBQVlBLENBQUNlLElBQUksQ0FBQztnQkFDdkJQLE9BQU87WUFDVCxHQUFHO2dCQUFFUSxRQUFRO1lBQUk7UUFDbkI7UUFFQSxPQUFRRjtZQUNOLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNRyxpQkFBaUJOLFVBQVVDLFdBQVdDO1lBRXJELEtBQUs7Z0JBQ0gsT0FBTyxNQUFNSztZQUVmLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNQztZQUVmLEtBQUs7Z0JBQ0gsT0FBTyxNQUFNQztZQUVmO2dCQUNFLE9BQU9wQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO29CQUN2QlAsT0FBTztnQkFDVCxHQUFHO29CQUFFUSxRQUFRO2dCQUFJO1FBQ3JCO0lBQ0YsRUFBRSxPQUFPUixPQUFZO1FBQ25CYSxRQUFRYixLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPUixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO1lBQ3ZCUCxPQUFPO1lBQ1BjLFNBQVNkLE1BQU1lLE9BQU87UUFDeEIsR0FBRztZQUFFUCxRQUFRO1FBQUk7SUFDbkI7QUFDRjtBQUVBOztDQUVDLEdBQ0QsZUFBZUMsaUJBQWlCTixRQUFnQixFQUFFQyxTQUFpQixFQUFFQyxRQUFpQjtJQUNwRixJQUFJO1FBQ0YsTUFBTVcsWUFBWSxNQUFNdkIsa0ZBQXdCQSxDQUFDZ0IsZ0JBQWdCLENBQy9ETixVQUNBQyxXQUNBQztRQUdGLE9BQU9iLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJULFNBQVM7WUFDVG1CLE1BQU07Z0JBQ0pEO2dCQUNBRSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQ2pDQyxZQUFZLENBQUMsS0FBSyxFQUFFRixLQUFLRyxHQUFHLEdBQUcsQ0FBQztnQkFDaENDLFlBQVluQjtZQUNkO1FBQ0Y7SUFDRixFQUFFLE9BQU9KLE9BQVk7UUFDbkJhLFFBQVFiLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU9SLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJQLE9BQU87WUFDUGMsU0FBU2QsTUFBTWUsT0FBTztRQUN4QixHQUFHO1lBQUVQLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlRTtJQUNiLElBQUk7UUFDRixNQUFNYyxXQUFXLE1BQU0vQixrRkFBd0JBLENBQUNpQixlQUFlO1FBRS9ELE9BQU9sQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO1lBQ3ZCVCxTQUFTO1lBQ1RtQixNQUFNO2dCQUNKTztnQkFDQU4sV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUNqQ1osUUFBUTtZQUNWO1FBQ0Y7SUFDRixFQUFFLE9BQU9SLE9BQVk7UUFDbkJhLFFBQVFiLEtBQUssQ0FBQyxpQ0FBOEJBO1FBQzVDLE9BQU9SLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJQLE9BQU87WUFDUGMsU0FBU2QsTUFBTWUsT0FBTztRQUN4QixHQUFHO1lBQUVQLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlRztJQUNiLElBQUk7UUFDRixNQUFNbEIsa0ZBQXdCQSxDQUFDa0IsMEJBQTBCO1FBRXpELE9BQU9uQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO1lBQ3ZCVCxTQUFTO1lBQ1RpQixTQUFTO1lBQ1RHLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGLEVBQUUsT0FBT3BCLE9BQVk7UUFDbkJhLFFBQVFiLEtBQUssQ0FBQyw0Q0FBNENBO1FBQzFELE9BQU9SLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJQLE9BQU87WUFDUGMsU0FBU2QsTUFBTWUsT0FBTztRQUN4QixHQUFHO1lBQUVQLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlSTtJQUNiLElBQUk7UUFDRix5REFBeUQ7UUFDekQsTUFBTVksV0FBVyxNQUFNL0Isa0ZBQXdCQSxDQUFDaUIsZUFBZTtRQUUvRCxPQUFPbEIscURBQVlBLENBQUNlLElBQUksQ0FBQztZQUN2QlQsU0FBUztZQUNUbUIsTUFBTTtnQkFDSlEsd0JBQXdCRCxTQUFTQyxzQkFBc0I7Z0JBQ3ZEQywyQkFBMkI7Z0JBQzNCQyxtQkFBbUI7Z0JBQ25CQyxlQUFlO2dCQUNmVixXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtJQUNGLEVBQUUsT0FBT3BCLE9BQVk7UUFDbkJhLFFBQVFiLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU9SLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7WUFDdkJQLE9BQU87WUFDUGMsU0FBU2QsTUFBTWUsT0FBTztRQUN4QixHQUFHO1lBQUVQLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlcUIsSUFBSTNCLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNTjtRQUVOLE1BQU0sRUFBRWtDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUk3QixRQUFROEIsR0FBRztRQUM1QyxNQUFNMUIsU0FBU3dCLGFBQWFHLEdBQUcsQ0FBQyxhQUFhO1FBRTdDLE9BQVEzQjtZQUNOLEtBQUs7Z0JBQ0gsT0FBT2QscURBQVlBLENBQUNlLElBQUksQ0FBQztvQkFDdkJULFNBQVM7b0JBQ1RtQixNQUFNO3dCQUNKaUIsTUFBTTt3QkFDTkMsU0FBUzt3QkFDVEMsYUFBYTt3QkFDYkMsVUFBVTs0QkFDUjs0QkFDQTs0QkFDQTs0QkFDQTs0QkFDQTs0QkFDQTt5QkFDRDt3QkFDREMsV0FBVzs0QkFDVCw4QkFBOEI7Z0NBQzVCQyxTQUFTO29DQUFDO29DQUFXO29DQUFXO29DQUFvQjtpQ0FBbUI7NEJBQ3pFO3dCQUNGO3dCQUNBckIsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO29CQUNuQztnQkFDRjtZQUVGLEtBQUs7Z0JBQ0gsT0FBTzVCLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7b0JBQ3ZCVCxTQUFTO29CQUNUbUIsTUFBTTt3QkFDSlQsUUFBUTt3QkFDUmdDLFFBQVFDLFFBQVFELE1BQU07d0JBQ3RCRSxRQUFRRCxRQUFRRSxXQUFXO3dCQUMzQnpCLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztvQkFDbkM7Z0JBQ0Y7WUFFRjtnQkFDRSxPQUFPNUIscURBQVlBLENBQUNlLElBQUksQ0FBQztvQkFDdkJQLE9BQU87Z0JBQ1QsR0FBRztvQkFBRVEsUUFBUTtnQkFBSTtRQUNyQjtJQUNGLEVBQUUsT0FBT1IsT0FBWTtRQUNuQmEsUUFBUWIsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsT0FBT1IscURBQVlBLENBQUNlLElBQUksQ0FBQztZQUN2QlAsT0FBTztZQUNQYyxTQUFTZCxNQUFNZSxPQUFPO1FBQ3hCLEdBQUc7WUFBRVAsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9hcHAvYXBpL2ludGVncmF0ZWQtcXVvdGUvcm91dGUudHM/OGNiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBtb3RvckNvdGl6YWNpb25JbnRlZ3JhZG8gfSBmcm9tICdAL2xpYi9pbnRlZ3JhdGVkLXF1b3RlLWVuZ2luZSdcbmltcG9ydCB7IGluaXRpYWxpemVCTUNTeXN0ZW0gfSBmcm9tICdAL2xpYi9pbml0aWFsaXplLXN5c3RlbSdcblxubGV0IHN5c3RlbUluaXRpYWxpemVkID0gZmFsc2VcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZVN5c3RlbUluaXRpYWxpemVkKCkge1xuICBpZiAoIXN5c3RlbUluaXRpYWxpemVkKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW5pdGlhbGl6ZUJNQ1N5c3RlbSgpXG4gICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICBzeXN0ZW1Jbml0aWFsaXplZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTaXN0ZW1hIG5vIGluaWNpYWxpemFkbzogJHtyZXN1bHQuZXJyb3J9YClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiDwn6egIEFQSSBFbmRwb2ludCBwYXJhIE1vdG9yIGRlIENvdGl6YWNpw7NuIEludGVncmFkb1xuICogXG4gKiBFc3RlIGVuZHBvaW50IGludGVncmEgZWwgc2lzdGVtYSBkZSBjb3RpemFjacOzbiBjb24gbGEgYmFzZSBkZSBjb25vY2ltaWVudG9cbiAqIGV2b2x1dGl2YSBxdWUgYXByZW5kZSBkZSBjYWRhIGludGVyYWNjacOzbi5cbiAqL1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGF3YWl0IGVuc3VyZVN5c3RlbUluaXRpYWxpemVkKClcbiAgICBcbiAgICBjb25zdCB7IGNvbnN1bHRhLCB1c2VyUGhvbmUsIHVzZXJOYW1lLCBhY3Rpb24gfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgXG4gICAgaWYgKCFjb25zdWx0YSB8fCAhdXNlclBob25lKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcnM6IGNvbnN1bHRhLCB1c2VyUGhvbmUnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdwcm9jZXNzJzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByb2Nlc2FyQ29uc3VsdGEoY29uc3VsdGEsIHVzZXJQaG9uZSwgdXNlck5hbWUpXG4gICAgICBcbiAgICAgIGNhc2UgJ21ldHJpY3MnOlxuICAgICAgICByZXR1cm4gYXdhaXQgb2J0ZW5lck1ldHJpY2FzKClcbiAgICAgIFxuICAgICAgY2FzZSAndXBkYXRlX2tub3dsZWRnZSc6XG4gICAgICAgIHJldHVybiBhd2FpdCBhY3R1YWxpemFyQmFzZUNvbm9jaW1pZW50bygpXG4gICAgICBcbiAgICAgIGNhc2UgJ2FuYWx5emVfcGF0dGVybnMnOlxuICAgICAgICByZXR1cm4gYXdhaXQgYW5hbGl6YXJQYXRyb25lcygpXG4gICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBhY3Rpb24uIFVzZTogcHJvY2VzcywgbWV0cmljcywgdXBkYXRlX2tub3dsZWRnZSwgYW5hbHl6ZV9wYXR0ZXJucycgXG4gICAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBpbnRlZ3JhdGVkLXF1b3RlIEFQSTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJywgXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vKipcbiAqIPCflIQgUHJvY2VzYXIgQ29uc3VsdGEgY29uIElBIEludGVncmFkYVxuICovXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNhckNvbnN1bHRhKGNvbnN1bHRhOiBzdHJpbmcsIHVzZXJQaG9uZTogc3RyaW5nLCB1c2VyTmFtZT86IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3B1ZXN0YSA9IGF3YWl0IG1vdG9yQ290aXphY2lvbkludGVncmFkby5wcm9jZXNhckNvbnN1bHRhKFxuICAgICAgY29uc3VsdGEsIFxuICAgICAgdXNlclBob25lLCBcbiAgICAgIHVzZXJOYW1lXG4gICAgKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICByZXNwdWVzdGEsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzZXNzaW9uX2lkOiBgc2Vzc18ke0RhdGUubm93KCl9YCxcbiAgICAgICAgdXNlcl9waG9uZTogdXNlclBob25lXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc2FuZG8gY29uc3VsdGE6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0Vycm9yIHByb2Nlc2FuZG8gY29uc3VsdGEnLCBcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbi8qKlxuICog8J+TiiBPYnRlbmVyIE3DqXRyaWNhcyBkZWwgU2lzdGVtYVxuICovXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyTWV0cmljYXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgbWV0cmljYXMgPSBhd2FpdCBtb3RvckNvdGl6YWNpb25JbnRlZ3JhZG8ub2J0ZW5lck1ldHJpY2FzKClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbWV0cmljYXMsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9idGVuaWVuZG8gbcOpdHJpY2FzOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdFcnJvciBvYnRlbmllbmRvIG3DqXRyaWNhcycsIFxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSBcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuLyoqXG4gKiDwn6egIEFjdHVhbGl6YXIgQmFzZSBkZSBDb25vY2ltaWVudG9cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYWN0dWFsaXphckJhc2VDb25vY2ltaWVudG8oKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgbW90b3JDb3RpemFjaW9uSW50ZWdyYWRvLmFjdHVhbGl6YXJCYXNlQ29ub2NpbWllbnRvKClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdCYXNlIGRlIGNvbm9jaW1pZW50byBhY3R1YWxpemFkYSBjb3JyZWN0YW1lbnRlJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFjdHVhbGl6YW5kbyBiYXNlIGRlIGNvbm9jaW1pZW50bzonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiAnRXJyb3IgYWN0dWFsaXphbmRvIGJhc2UgZGUgY29ub2NpbWllbnRvJywgXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG4vKipcbiAqIPCflI0gQW5hbGl6YXIgUGF0cm9uZXMgZGUgVmVudGFcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYW5hbGl6YXJQYXRyb25lcygpIHtcbiAgdHJ5IHtcbiAgICAvLyBFc3RhIGZ1bmNpw7NuIHBvZHLDrWEgaW1wbGVtZW50YXIgYW7DoWxpc2lzIG3DoXMgYXZhbnphZG9zXG4gICAgY29uc3QgbWV0cmljYXMgPSBhd2FpdCBtb3RvckNvdGl6YWNpb25JbnRlZ3JhZG8ub2J0ZW5lck1ldHJpY2FzKClcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcGF0cm9uZXNfaWRlbnRpZmljYWRvczogbWV0cmljYXMucGF0cm9uZXNfaWRlbnRpZmljYWRvcyxcbiAgICAgICAgcHJvZHVjdG9zX21hc19jb25zdWx0YWRvczogJ0Fuw6FsaXNpcyBlbiBkZXNhcnJvbGxvJyxcbiAgICAgICAgem9uYXNfbWFzX2FjdGl2YXM6ICdBbsOhbGlzaXMgZW4gZGVzYXJyb2xsbycsXG4gICAgICAgIGhvcmFyaW9zX3BpY286ICdBbsOhbGlzaXMgZW4gZGVzYXJyb2xsbycsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFuYWxpemFuZG8gcGF0cm9uZXM6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0Vycm9yIGFuYWxpemFuZG8gcGF0cm9uZXMnLCBcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbi8qKlxuICogR0VUIC0gT2J0ZW5lciBpbmZvcm1hY2nDs24gZGVsIHNpc3RlbWFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGF3YWl0IGVuc3VyZVN5c3RlbUluaXRpYWxpemVkKClcbiAgICBcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcbiAgICBjb25zdCBhY3Rpb24gPSBzZWFyY2hQYXJhbXMuZ2V0KCdhY3Rpb24nKSB8fCAnaW5mbydcbiAgICBcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiAnTW90b3IgZGUgQ290aXphY2nDs24gSW50ZWdyYWRvIEJNQycsXG4gICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTaXN0ZW1hIGRlIGNvdGl6YWNpw7NuIGNvbiBiYXNlIGRlIGNvbm9jaW1pZW50byBldm9sdXRpdmEnLFxuICAgICAgICAgICAgZmVhdHVyZXM6IFtcbiAgICAgICAgICAgICAgJ0lBIENvbnZlcnNhY2lvbmFsIEludGVsaWdlbnRlJyxcbiAgICAgICAgICAgICAgJ0Jhc2UgZGUgQ29ub2NpbWllbnRvIERpbsOhbWljYScsXG4gICAgICAgICAgICAgICdBbsOhbGlzaXMgZGUgUGF0cm9uZXMgZGUgVmVudGEnLFxuICAgICAgICAgICAgICAnUGVyc29uYWxpemFjacOzbiBwb3IgQ2xpZW50ZScsXG4gICAgICAgICAgICAgICdBcHJlbmRpemFqZSBBdXRvbcOhdGljbycsXG4gICAgICAgICAgICAgICdNw6l0cmljYXMgZW4gVGllbXBvIFJlYWwnXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZW5kcG9pbnRzOiB7XG4gICAgICAgICAgICAgICdQT1NUIC9hcGkvaW50ZWdyYXRlZC1xdW90ZSc6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBbJ3Byb2Nlc3MnLCAnbWV0cmljcycsICd1cGRhdGVfa25vd2xlZGdlJywgJ2FuYWx5emVfcGF0dGVybnMnXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBcbiAgICAgIGNhc2UgJ2hlYWx0aCc6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcbiAgICAgICAgICAgIHVwdGltZTogcHJvY2Vzcy51cHRpbWUoKSxcbiAgICAgICAgICAgIG1lbW9yeTogcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBhY3Rpb24uIFVzZTogaW5mbywgaGVhbHRoJyBcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGludGVncmF0ZWQtcXVvdGUgR0VUOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLCBcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibW90b3JDb3RpemFjaW9uSW50ZWdyYWRvIiwiaW5pdGlhbGl6ZUJNQ1N5c3RlbSIsInN5c3RlbUluaXRpYWxpemVkIiwiZW5zdXJlU3lzdGVtSW5pdGlhbGl6ZWQiLCJyZXN1bHQiLCJzdWNjZXNzIiwiRXJyb3IiLCJlcnJvciIsIlBPU1QiLCJyZXF1ZXN0IiwiY29uc3VsdGEiLCJ1c2VyUGhvbmUiLCJ1c2VyTmFtZSIsImFjdGlvbiIsImpzb24iLCJzdGF0dXMiLCJwcm9jZXNhckNvbnN1bHRhIiwib2J0ZW5lck1ldHJpY2FzIiwiYWN0dWFsaXphckJhc2VDb25vY2ltaWVudG8iLCJhbmFsaXphclBhdHJvbmVzIiwiY29uc29sZSIsImRldGFpbHMiLCJtZXNzYWdlIiwicmVzcHVlc3RhIiwiZGF0YSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlc3Npb25faWQiLCJub3ciLCJ1c2VyX3Bob25lIiwibWV0cmljYXMiLCJwYXRyb25lc19pZGVudGlmaWNhZG9zIiwicHJvZHVjdG9zX21hc19jb25zdWx0YWRvcyIsInpvbmFzX21hc19hY3RpdmFzIiwiaG9yYXJpb3NfcGljbyIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImdldCIsIm5hbWUiLCJ2ZXJzaW9uIiwiZGVzY3JpcHRpb24iLCJmZWF0dXJlcyIsImVuZHBvaW50cyIsImFjdGlvbnMiLCJ1cHRpbWUiLCJwcm9jZXNzIiwibWVtb3J5IiwibWVtb3J5VXNhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/integrated-quote/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/credentials-manager.ts":
/*!****************************************!*\
  !*** ./src/lib/credentials-manager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   credentialsManager: () => (/* binding */ credentialsManager),\n/* harmony export */   initializeCredentials: () => (/* binding */ initializeCredentials)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nclass CredentialsManager {\n    constructor(){\n        this.credentials = null;\n        this.isLoaded = false;\n        // Usar clave de encriptaci√≥n del sistema o generar una\n        this.encryptionKey = process.env.CREDENTIALS_ENCRYPTION_KEY || \"bmc-default-encryption-key-32-chars\";\n    }\n    // Cargar credenciales desde archivo JSON encriptado\n    async loadCredentials(credentialsPath = \"./credentials.json\") {\n        try {\n            // En desarrollo, cargar desde archivo local\n            if (true) {\n                const fs = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! fs/promises */ \"fs/promises\", 23));\n                const path = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! path */ \"path\", 23));\n                const fullPath = path.resolve(process.cwd(), credentialsPath);\n                const encryptedData = await fs.readFile(fullPath, \"utf-8\");\n                // Desencriptar datos\n                const decryptedData = this.decrypt(encryptedData);\n                this.credentials = JSON.parse(decryptedData);\n            } else {}\n            this.isLoaded = true;\n            console.log(\"‚úÖ Credenciales cargadas exitosamente\");\n        } catch (error) {\n            console.error(\"‚ùå Error cargando credenciales:\", error);\n            throw new Error(\"No se pudieron cargar las credenciales\");\n        }\n    }\n    // Cargar credenciales desde variables de entorno\n    loadFromEnvironment() {\n        this.credentials = {\n            openai: {\n                api_key: process.env.OPENAI_API_KEY || \"\",\n                model: process.env.OPENAI_MODEL || \"gpt-4\",\n                max_tokens: parseInt(process.env.OPENAI_MAX_TOKENS || \"4000\"),\n                temperature: parseFloat(process.env.OPENAI_TEMPERATURE || \"0.1\")\n            },\n            google_sheets: {\n                sheet_id: process.env.GOOGLE_SHEET_ID || \"\",\n                service_account_email: process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL || \"\",\n                private_key: process.env.GOOGLE_PRIVATE_KEY || \"\",\n                scopes: [\n                    \"https://www.googleapis.com/auth/spreadsheets\"\n                ]\n            },\n            mongodb: {\n                uri: process.env.MONGODB_URI || \"\",\n                database: process.env.MONGODB_DATABASE || \"bmc_quotes\",\n                collections: {\n                    quotes: process.env.MONGODB_QUOTES_COLLECTION || \"quotes\",\n                    sessions: process.env.MONGODB_SESSIONS_COLLECTION || \"sessions\",\n                    context: process.env.MONGODB_CONTEXT_COLLECTION || \"context\",\n                    analytics: process.env.MONGODB_ANALYTICS_COLLECTION || \"analytics\"\n                }\n            },\n            whatsapp: {\n                access_token: process.env.WHATSAPP_ACCESS_TOKEN || \"\",\n                phone_number_id: process.env.WHATSAPP_PHONE_NUMBER_ID || \"\",\n                verify_token: process.env.WHATSAPP_VERIFY_TOKEN || \"bmc_whatsapp_verify_2024\",\n                webhook_url: process.env.WHATSAPP_WEBHOOK_URL || \"\"\n            },\n            n8n: {\n                webhook_url: process.env.N8N_WEBHOOK_URL || \"http://localhost:5678/webhook/bmc-quotes\",\n                api_key: process.env.N8N_API_KEY || \"\",\n                base_url: process.env.N8N_BASE_URL || \"http://localhost:5678\"\n            },\n            system: {\n                environment: \"development\" || 0,\n                max_context_tokens: parseInt(process.env.MAX_CONTEXT_TOKENS || \"8000\"),\n                max_messages_per_session: parseInt(process.env.MAX_MESSAGES_PER_SESSION || \"20\"),\n                inactivity_timeout_minutes: parseInt(process.env.INACTIVITY_TIMEOUT_MINUTES || \"30\"),\n                default_zone: process.env.DEFAULT_ZONE || \"montevideo\",\n                encryption_key: this.encryptionKey\n            }\n        };\n    }\n    // Obtener credenciales espec√≠ficas\n    getOpenAI() {\n        this.ensureLoaded();\n        return this.credentials.openai;\n    }\n    getGoogleSheets() {\n        this.ensureLoaded();\n        return this.credentials.google_sheets;\n    }\n    getMongoDB() {\n        this.ensureLoaded();\n        return this.credentials.mongodb;\n    }\n    getWhatsApp() {\n        this.ensureLoaded();\n        return this.credentials.whatsapp;\n    }\n    getN8N() {\n        this.ensureLoaded();\n        return this.credentials.n8n;\n    }\n    getSystem() {\n        this.ensureLoaded();\n        return this.credentials.system;\n    }\n    // Verificar si todas las credenciales est√°n configuradas\n    validateCredentials() {\n        this.ensureLoaded();\n        const missing = [];\n        const creds = this.credentials;\n        // Verificar OpenAI\n        if (!creds.openai.api_key) missing.push(\"OPENAI_API_KEY\");\n        // Verificar Google Sheets\n        if (!creds.google_sheets.sheet_id) missing.push(\"GOOGLE_SHEET_ID\");\n        if (!creds.google_sheets.service_account_email) missing.push(\"GOOGLE_SERVICE_ACCOUNT_EMAIL\");\n        if (!creds.google_sheets.private_key) missing.push(\"GOOGLE_PRIVATE_KEY\");\n        // Verificar MongoDB\n        if (!creds.mongodb.uri) missing.push(\"MONGODB_URI\");\n        // Verificar WhatsApp (opcional)\n        if (!creds.whatsapp.access_token) missing.push(\"WHATSAPP_ACCESS_TOKEN\");\n        if (!creds.whatsapp.phone_number_id) missing.push(\"WHATSAPP_PHONE_NUMBER_ID\");\n        return {\n            isValid: missing.length === 0,\n            missing\n        };\n    }\n    // Encriptar datos sensibles\n    encrypt(text) {\n        const cipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createCipher(\"aes-256-cbc\", this.encryptionKey);\n        let encrypted = cipher.update(text, \"utf8\", \"hex\");\n        encrypted += cipher.final(\"hex\");\n        return encrypted;\n    }\n    // Desencriptar datos sensibles\n    decrypt(encryptedText) {\n        const decipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createDecipher(\"aes-256-cbc\", this.encryptionKey);\n        let decrypted = decipher.update(encryptedText, \"hex\", \"utf8\");\n        decrypted += decipher.final(\"utf8\");\n        return decrypted;\n    }\n    // Verificar que las credenciales est√©n cargadas\n    ensureLoaded() {\n        if (!this.isLoaded || !this.credentials) {\n            throw new Error(\"Las credenciales no han sido cargadas. Llama a loadCredentials() primero.\");\n        }\n    }\n    // Obtener resumen de credenciales (sin datos sensibles)\n    getCredentialsSummary() {\n        this.ensureLoaded();\n        return {\n            openai: {\n                model: this.credentials.openai.model,\n                max_tokens: this.credentials.openai.max_tokens,\n                has_api_key: !!this.credentials.openai.api_key\n            },\n            google_sheets: {\n                sheet_id: this.credentials.google_sheets.sheet_id,\n                has_credentials: !!(this.credentials.google_sheets.service_account_email && this.credentials.google_sheets.private_key)\n            },\n            mongodb: {\n                database: this.credentials.mongodb.database,\n                has_uri: !!this.credentials.mongodb.uri\n            },\n            whatsapp: {\n                has_credentials: !!(this.credentials.whatsapp.access_token && this.credentials.whatsapp.phone_number_id)\n            },\n            n8n: {\n                webhook_url: this.credentials.n8n.webhook_url,\n                has_api_key: !!this.credentials.n8n.api_key\n            },\n            system: {\n                environment: this.credentials.system.environment,\n                max_context_tokens: this.credentials.system.max_context_tokens\n            }\n        };\n    }\n}\n// Instancia global del gestor de credenciales\nconst credentialsManager = new CredentialsManager();\n// Funci√≥n de conveniencia para inicializar credenciales\nasync function initializeCredentials(credentialsPath) {\n    await credentialsManager.loadCredentials(credentialsPath);\n    const validation = credentialsManager.validateCredentials();\n    if (!validation.isValid) {\n        console.warn(\"‚ö†Ô∏è Credenciales faltantes:\", validation.missing);\n        console.log(\"\\uD83D\\uDCA1 Usa el archivo credentials-template.json como gu\\xeda\");\n    } else {\n        console.log(\"‚úÖ Todas las credenciales est\\xe1n configuradas correctamente\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUMzRyxXQUFXLENBQUVrRSxHQUFHLENBQUN6QyxPQUFPO1lBQzlDO1lBQ0E4QyxRQUFRO2dCQUNOQyxhQUFhLElBQUksQ0FBQ3hFLFdBQVcsQ0FBRXVFLE1BQU0sQ0FBQ0MsV0FBVztnQkFDakRDLG9CQUFvQixJQUFJLENBQUN6RSxXQUFXLENBQUV1RSxNQUFNLENBQUNFLGtCQUFrQjtZQUNqRTtRQUNGO0lBQ0Y7QUFDRjtBQUVBLDhDQUE4QztBQUN2QyxNQUFNcUMscUJBQXFCLElBQUloSCxxQkFBb0I7QUFFMUQsd0RBQXdEO0FBQ2pELGVBQWVpSCxzQkFBc0J4RyxlQUF3QjtJQUNsRSxNQUFNdUcsbUJBQW1CeEcsZUFBZSxDQUFDQztJQUV6QyxNQUFNeUcsYUFBYUYsbUJBQW1CckIsbUJBQW1CO0lBQ3pELElBQUksQ0FBQ3VCLFdBQVduQixPQUFPLEVBQUU7UUFDdkJ6RSxRQUFRNkYsSUFBSSxDQUFDLDhCQUE4QkQsV0FBV3RCLE9BQU87UUFDN0R0RSxRQUFRQyxHQUFHLENBQUM7SUFDZCxPQUFPO1FBQ0xELFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9saWIvY3JlZGVudGlhbHMtbWFuYWdlci50cz9mNjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xuXG5pbnRlcmZhY2UgQ3JlZGVudGlhbHMge1xuICBvcGVuYWk6IHtcbiAgICBhcGlfa2V5OiBzdHJpbmdcbiAgICBtb2RlbDogc3RyaW5nXG4gICAgbWF4X3Rva2VuczogbnVtYmVyXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlclxuICB9XG4gIGdvb2dsZV9zaGVldHM6IHtcbiAgICBzaGVldF9pZDogc3RyaW5nXG4gICAgc2VydmljZV9hY2NvdW50X2VtYWlsOiBzdHJpbmdcbiAgICBwcml2YXRlX2tleTogc3RyaW5nXG4gICAgc2NvcGVzOiBzdHJpbmdbXVxuICB9XG4gIG1vbmdvZGI6IHtcbiAgICB1cmk6IHN0cmluZ1xuICAgIGRhdGFiYXNlOiBzdHJpbmdcbiAgICBjb2xsZWN0aW9uczoge1xuICAgICAgcXVvdGVzOiBzdHJpbmdcbiAgICAgIHNlc3Npb25zOiBzdHJpbmdcbiAgICAgIGNvbnRleHQ6IHN0cmluZ1xuICAgICAgYW5hbHl0aWNzOiBzdHJpbmdcbiAgICB9XG4gIH1cbiAgd2hhdHNhcHA6IHtcbiAgICBhY2Nlc3NfdG9rZW46IHN0cmluZ1xuICAgIHBob25lX251bWJlcl9pZDogc3RyaW5nXG4gICAgdmVyaWZ5X3Rva2VuOiBzdHJpbmdcbiAgICB3ZWJob29rX3VybDogc3RyaW5nXG4gIH1cbiAgbjhuOiB7XG4gICAgd2ViaG9va191cmw6IHN0cmluZ1xuICAgIGFwaV9rZXk6IHN0cmluZ1xuICAgIGJhc2VfdXJsOiBzdHJpbmdcbiAgfVxuICBzeXN0ZW06IHtcbiAgICBlbnZpcm9ubWVudDogc3RyaW5nXG4gICAgbWF4X2NvbnRleHRfdG9rZW5zOiBudW1iZXJcbiAgICBtYXhfbWVzc2FnZXNfcGVyX3Nlc3Npb246IG51bWJlclxuICAgIGluYWN0aXZpdHlfdGltZW91dF9taW51dGVzOiBudW1iZXJcbiAgICBkZWZhdWx0X3pvbmU6IHN0cmluZ1xuICAgIGVuY3J5cHRpb25fa2V5OiBzdHJpbmdcbiAgfVxufVxuXG5jbGFzcyBDcmVkZW50aWFsc01hbmFnZXIge1xuICBwcml2YXRlIGNyZWRlbnRpYWxzOiBDcmVkZW50aWFscyB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgZW5jcnlwdGlvbktleTogc3RyaW5nXG4gIHByaXZhdGUgaXNMb2FkZWQgPSBmYWxzZVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFVzYXIgY2xhdmUgZGUgZW5jcmlwdGFjacOzbiBkZWwgc2lzdGVtYSBvIGdlbmVyYXIgdW5hXG4gICAgdGhpcy5lbmNyeXB0aW9uS2V5ID0gcHJvY2Vzcy5lbnYuQ1JFREVOVElBTFNfRU5DUllQVElPTl9LRVkgfHwgXG4gICAgICAnYm1jLWRlZmF1bHQtZW5jcnlwdGlvbi1rZXktMzItY2hhcnMnXG4gIH1cblxuICAvLyBDYXJnYXIgY3JlZGVuY2lhbGVzIGRlc2RlIGFyY2hpdm8gSlNPTiBlbmNyaXB0YWRvXG4gIGFzeW5jIGxvYWRDcmVkZW50aWFscyhjcmVkZW50aWFsc1BhdGg6IHN0cmluZyA9ICcuL2NyZWRlbnRpYWxzLmpzb24nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEVuIGRlc2Fycm9sbG8sIGNhcmdhciBkZXNkZSBhcmNoaXZvIGxvY2FsXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnQoJ2ZzL3Byb21pc2VzJylcbiAgICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IGltcG9ydCgncGF0aCcpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBjcmVkZW50aWFsc1BhdGgpXG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCBmcy5yZWFkRmlsZShmdWxsUGF0aCwgJ3V0Zi04JylcbiAgICAgICAgXG4gICAgICAgIC8vIERlc2VuY3JpcHRhciBkYXRvc1xuICAgICAgICBjb25zdCBkZWNyeXB0ZWREYXRhID0gdGhpcy5kZWNyeXB0KGVuY3J5cHRlZERhdGEpXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBKU09OLnBhcnNlKGRlY3J5cHRlZERhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFbiBwcm9kdWNjacOzbiwgY2FyZ2FyIGRlc2RlIHZhcmlhYmxlcyBkZSBlbnRvcm5vXG4gICAgICAgIHRoaXMubG9hZEZyb21FbnZpcm9ubWVudCgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlXG4gICAgICBjb25zb2xlLmxvZygn4pyFIENyZWRlbmNpYWxlcyBjYXJnYWRhcyBleGl0b3NhbWVudGUnKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgY2FyZ2FuZG8gY3JlZGVuY2lhbGVzOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZSBwdWRpZXJvbiBjYXJnYXIgbGFzIGNyZWRlbmNpYWxlcycpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2FyZ2FyIGNyZWRlbmNpYWxlcyBkZXNkZSB2YXJpYWJsZXMgZGUgZW50b3Jub1xuICBwcml2YXRlIGxvYWRGcm9tRW52aXJvbm1lbnQoKTogdm9pZCB7XG4gICAgdGhpcy5jcmVkZW50aWFscyA9IHtcbiAgICAgIG9wZW5haToge1xuICAgICAgICBhcGlfa2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSB8fCAnJyxcbiAgICAgICAgbW9kZWw6IHByb2Nlc3MuZW52Lk9QRU5BSV9NT0RFTCB8fCAnZ3B0LTQnLFxuICAgICAgICBtYXhfdG9rZW5zOiBwYXJzZUludChwcm9jZXNzLmVudi5PUEVOQUlfTUFYX1RPS0VOUyB8fCAnNDAwMCcpLFxuICAgICAgICB0ZW1wZXJhdHVyZTogcGFyc2VGbG9hdChwcm9jZXNzLmVudi5PUEVOQUlfVEVNUEVSQVRVUkUgfHwgJzAuMScpXG4gICAgICB9LFxuICAgICAgZ29vZ2xlX3NoZWV0czoge1xuICAgICAgICBzaGVldF9pZDogcHJvY2Vzcy5lbnYuR09PR0xFX1NIRUVUX0lEIHx8ICcnLFxuICAgICAgICBzZXJ2aWNlX2FjY291bnRfZW1haWw6IHByb2Nlc3MuZW52LkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfRU1BSUwgfHwgJycsXG4gICAgICAgIHByaXZhdGVfa2V5OiBwcm9jZXNzLmVudi5HT09HTEVfUFJJVkFURV9LRVkgfHwgJycsXG4gICAgICAgIHNjb3BlczogWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3NwcmVhZHNoZWV0cyddXG4gICAgICB9LFxuICAgICAgbW9uZ29kYjoge1xuICAgICAgICB1cmk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICcnLFxuICAgICAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuTU9OR09EQl9EQVRBQkFTRSB8fCAnYm1jX3F1b3RlcycsXG4gICAgICAgIGNvbGxlY3Rpb25zOiB7XG4gICAgICAgICAgcXVvdGVzOiBwcm9jZXNzLmVudi5NT05HT0RCX1FVT1RFU19DT0xMRUNUSU9OIHx8ICdxdW90ZXMnLFxuICAgICAgICAgIHNlc3Npb25zOiBwcm9jZXNzLmVudi5NT05HT0RCX1NFU1NJT05TX0NPTExFQ1RJT04gfHwgJ3Nlc3Npb25zJyxcbiAgICAgICAgICBjb250ZXh0OiBwcm9jZXNzLmVudi5NT05HT0RCX0NPTlRFWFRfQ09MTEVDVElPTiB8fCAnY29udGV4dCcsXG4gICAgICAgICAgYW5hbHl0aWNzOiBwcm9jZXNzLmVudi5NT05HT0RCX0FOQUxZVElDU19DT0xMRUNUSU9OIHx8ICdhbmFseXRpY3MnXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB3aGF0c2FwcDoge1xuICAgICAgICBhY2Nlc3NfdG9rZW46IHByb2Nlc3MuZW52LldIQVRTQVBQX0FDQ0VTU19UT0tFTiB8fCAnJyxcbiAgICAgICAgcGhvbmVfbnVtYmVyX2lkOiBwcm9jZXNzLmVudi5XSEFUU0FQUF9QSE9ORV9OVU1CRVJfSUQgfHwgJycsXG4gICAgICAgIHZlcmlmeV90b2tlbjogcHJvY2Vzcy5lbnYuV0hBVFNBUFBfVkVSSUZZX1RPS0VOIHx8ICdibWNfd2hhdHNhcHBfdmVyaWZ5XzIwMjQnLFxuICAgICAgICB3ZWJob29rX3VybDogcHJvY2Vzcy5lbnYuV0hBVFNBUFBfV0VCSE9PS19VUkwgfHwgJydcbiAgICAgIH0sXG4gICAgICBuOG46IHtcbiAgICAgICAgd2ViaG9va191cmw6IHByb2Nlc3MuZW52Lk44Tl9XRUJIT09LX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo1Njc4L3dlYmhvb2svYm1jLXF1b3RlcycsXG4gICAgICAgIGFwaV9rZXk6IHByb2Nlc3MuZW52Lk44Tl9BUElfS0VZIHx8ICcnLFxuICAgICAgICBiYXNlX3VybDogcHJvY2Vzcy5lbnYuTjhOX0JBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjU2NzgnXG4gICAgICB9LFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICBtYXhfY29udGV4dF90b2tlbnM6IHBhcnNlSW50KHByb2Nlc3MuZW52Lk1BWF9DT05URVhUX1RPS0VOUyB8fCAnODAwMCcpLFxuICAgICAgICBtYXhfbWVzc2FnZXNfcGVyX3Nlc3Npb246IHBhcnNlSW50KHByb2Nlc3MuZW52Lk1BWF9NRVNTQUdFU19QRVJfU0VTU0lPTiB8fCAnMjAnKSxcbiAgICAgICAgaW5hY3Rpdml0eV90aW1lb3V0X21pbnV0ZXM6IHBhcnNlSW50KHByb2Nlc3MuZW52LklOQUNUSVZJVFlfVElNRU9VVF9NSU5VVEVTIHx8ICczMCcpLFxuICAgICAgICBkZWZhdWx0X3pvbmU6IHByb2Nlc3MuZW52LkRFRkFVTFRfWk9ORSB8fCAnbW9udGV2aWRlbycsXG4gICAgICAgIGVuY3J5cHRpb25fa2V5OiB0aGlzLmVuY3J5cHRpb25LZXlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBPYnRlbmVyIGNyZWRlbmNpYWxlcyBlc3BlY8OtZmljYXNcbiAgZ2V0T3BlbkFJKCkge1xuICAgIHRoaXMuZW5zdXJlTG9hZGVkKClcbiAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFscyEub3BlbmFpXG4gIH1cblxuICBnZXRHb29nbGVTaGVldHMoKSB7XG4gICAgdGhpcy5lbnN1cmVMb2FkZWQoKVxuICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzIS5nb29nbGVfc2hlZXRzXG4gIH1cblxuICBnZXRNb25nb0RCKCkge1xuICAgIHRoaXMuZW5zdXJlTG9hZGVkKClcbiAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFscyEubW9uZ29kYlxuICB9XG5cbiAgZ2V0V2hhdHNBcHAoKSB7XG4gICAgdGhpcy5lbnN1cmVMb2FkZWQoKVxuICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzIS53aGF0c2FwcFxuICB9XG5cbiAgZ2V0TjhOKCkge1xuICAgIHRoaXMuZW5zdXJlTG9hZGVkKClcbiAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFscyEubjhuXG4gIH1cblxuICBnZXRTeXN0ZW0oKSB7XG4gICAgdGhpcy5lbnN1cmVMb2FkZWQoKVxuICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzIS5zeXN0ZW1cbiAgfVxuXG4gIC8vIFZlcmlmaWNhciBzaSB0b2RhcyBsYXMgY3JlZGVuY2lhbGVzIGVzdMOhbiBjb25maWd1cmFkYXNcbiAgdmFsaWRhdGVDcmVkZW50aWFscygpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IG1pc3Npbmc6IHN0cmluZ1tdIH0ge1xuICAgIHRoaXMuZW5zdXJlTG9hZGVkKClcbiAgICBcbiAgICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgY3JlZHMgPSB0aGlzLmNyZWRlbnRpYWxzIVxuXG4gICAgLy8gVmVyaWZpY2FyIE9wZW5BSVxuICAgIGlmICghY3JlZHMub3BlbmFpLmFwaV9rZXkpIG1pc3NpbmcucHVzaCgnT1BFTkFJX0FQSV9LRVknKVxuXG4gICAgLy8gVmVyaWZpY2FyIEdvb2dsZSBTaGVldHNcbiAgICBpZiAoIWNyZWRzLmdvb2dsZV9zaGVldHMuc2hlZXRfaWQpIG1pc3NpbmcucHVzaCgnR09PR0xFX1NIRUVUX0lEJylcbiAgICBpZiAoIWNyZWRzLmdvb2dsZV9zaGVldHMuc2VydmljZV9hY2NvdW50X2VtYWlsKSBtaXNzaW5nLnB1c2goJ0dPT0dMRV9TRVJWSUNFX0FDQ09VTlRfRU1BSUwnKVxuICAgIGlmICghY3JlZHMuZ29vZ2xlX3NoZWV0cy5wcml2YXRlX2tleSkgbWlzc2luZy5wdXNoKCdHT09HTEVfUFJJVkFURV9LRVknKVxuXG4gICAgLy8gVmVyaWZpY2FyIE1vbmdvREJcbiAgICBpZiAoIWNyZWRzLm1vbmdvZGIudXJpKSBtaXNzaW5nLnB1c2goJ01PTkdPREJfVVJJJylcblxuICAgIC8vIFZlcmlmaWNhciBXaGF0c0FwcCAob3BjaW9uYWwpXG4gICAgaWYgKCFjcmVkcy53aGF0c2FwcC5hY2Nlc3NfdG9rZW4pIG1pc3NpbmcucHVzaCgnV0hBVFNBUFBfQUNDRVNTX1RPS0VOJylcbiAgICBpZiAoIWNyZWRzLndoYXRzYXBwLnBob25lX251bWJlcl9pZCkgbWlzc2luZy5wdXNoKCdXSEFUU0FQUF9QSE9ORV9OVU1CRVJfSUQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IG1pc3NpbmcubGVuZ3RoID09PSAwLFxuICAgICAgbWlzc2luZ1xuICAgIH1cbiAgfVxuXG4gIC8vIEVuY3JpcHRhciBkYXRvcyBzZW5zaWJsZXNcbiAgcHJpdmF0ZSBlbmNyeXB0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgY2lwaGVyID0gY3J5cHRvLmNyZWF0ZUNpcGhlcignYWVzLTI1Ni1jYmMnLCB0aGlzLmVuY3J5cHRpb25LZXkpXG4gICAgbGV0IGVuY3J5cHRlZCA9IGNpcGhlci51cGRhdGUodGV4dCwgJ3V0ZjgnLCAnaGV4JylcbiAgICBlbmNyeXB0ZWQgKz0gY2lwaGVyLmZpbmFsKCdoZXgnKVxuICAgIHJldHVybiBlbmNyeXB0ZWRcbiAgfVxuXG4gIC8vIERlc2VuY3JpcHRhciBkYXRvcyBzZW5zaWJsZXNcbiAgcHJpdmF0ZSBkZWNyeXB0KGVuY3J5cHRlZFRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXIoJ2Flcy0yNTYtY2JjJywgdGhpcy5lbmNyeXB0aW9uS2V5KVxuICAgIGxldCBkZWNyeXB0ZWQgPSBkZWNpcGhlci51cGRhdGUoZW5jcnlwdGVkVGV4dCwgJ2hleCcsICd1dGY4JylcbiAgICBkZWNyeXB0ZWQgKz0gZGVjaXBoZXIuZmluYWwoJ3V0ZjgnKVxuICAgIHJldHVybiBkZWNyeXB0ZWRcbiAgfVxuXG4gIC8vIFZlcmlmaWNhciBxdWUgbGFzIGNyZWRlbmNpYWxlcyBlc3TDqW4gY2FyZ2FkYXNcbiAgcHJpdmF0ZSBlbnN1cmVMb2FkZWQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTG9hZGVkIHx8ICF0aGlzLmNyZWRlbnRpYWxzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xhcyBjcmVkZW5jaWFsZXMgbm8gaGFuIHNpZG8gY2FyZ2FkYXMuIExsYW1hIGEgbG9hZENyZWRlbnRpYWxzKCkgcHJpbWVyby4nKVxuICAgIH1cbiAgfVxuXG4gIC8vIE9idGVuZXIgcmVzdW1lbiBkZSBjcmVkZW5jaWFsZXMgKHNpbiBkYXRvcyBzZW5zaWJsZXMpXG4gIGdldENyZWRlbnRpYWxzU3VtbWFyeSgpIHtcbiAgICB0aGlzLmVuc3VyZUxvYWRlZCgpXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIG9wZW5haToge1xuICAgICAgICBtb2RlbDogdGhpcy5jcmVkZW50aWFscyEub3BlbmFpLm1vZGVsLFxuICAgICAgICBtYXhfdG9rZW5zOiB0aGlzLmNyZWRlbnRpYWxzIS5vcGVuYWkubWF4X3Rva2VucyxcbiAgICAgICAgaGFzX2FwaV9rZXk6ICEhdGhpcy5jcmVkZW50aWFscyEub3BlbmFpLmFwaV9rZXlcbiAgICAgIH0sXG4gICAgICBnb29nbGVfc2hlZXRzOiB7XG4gICAgICAgIHNoZWV0X2lkOiB0aGlzLmNyZWRlbnRpYWxzIS5nb29nbGVfc2hlZXRzLnNoZWV0X2lkLFxuICAgICAgICBoYXNfY3JlZGVudGlhbHM6ICEhKHRoaXMuY3JlZGVudGlhbHMhLmdvb2dsZV9zaGVldHMuc2VydmljZV9hY2NvdW50X2VtYWlsICYmIHRoaXMuY3JlZGVudGlhbHMhLmdvb2dsZV9zaGVldHMucHJpdmF0ZV9rZXkpXG4gICAgICB9LFxuICAgICAgbW9uZ29kYjoge1xuICAgICAgICBkYXRhYmFzZTogdGhpcy5jcmVkZW50aWFscyEubW9uZ29kYi5kYXRhYmFzZSxcbiAgICAgICAgaGFzX3VyaTogISF0aGlzLmNyZWRlbnRpYWxzIS5tb25nb2RiLnVyaVxuICAgICAgfSxcbiAgICAgIHdoYXRzYXBwOiB7XG4gICAgICAgIGhhc19jcmVkZW50aWFsczogISEodGhpcy5jcmVkZW50aWFscyEud2hhdHNhcHAuYWNjZXNzX3Rva2VuICYmIHRoaXMuY3JlZGVudGlhbHMhLndoYXRzYXBwLnBob25lX251bWJlcl9pZClcbiAgICAgIH0sXG4gICAgICBuOG46IHtcbiAgICAgICAgd2ViaG9va191cmw6IHRoaXMuY3JlZGVudGlhbHMhLm44bi53ZWJob29rX3VybCxcbiAgICAgICAgaGFzX2FwaV9rZXk6ICEhdGhpcy5jcmVkZW50aWFscyEubjhuLmFwaV9rZXlcbiAgICAgIH0sXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuY3JlZGVudGlhbHMhLnN5c3RlbS5lbnZpcm9ubWVudCxcbiAgICAgICAgbWF4X2NvbnRleHRfdG9rZW5zOiB0aGlzLmNyZWRlbnRpYWxzIS5zeXN0ZW0ubWF4X2NvbnRleHRfdG9rZW5zXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEluc3RhbmNpYSBnbG9iYWwgZGVsIGdlc3RvciBkZSBjcmVkZW5jaWFsZXNcbmV4cG9ydCBjb25zdCBjcmVkZW50aWFsc01hbmFnZXIgPSBuZXcgQ3JlZGVudGlhbHNNYW5hZ2VyKClcblxuLy8gRnVuY2nDs24gZGUgY29udmVuaWVuY2lhIHBhcmEgaW5pY2lhbGl6YXIgY3JlZGVuY2lhbGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUNyZWRlbnRpYWxzKGNyZWRlbnRpYWxzUGF0aD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBjcmVkZW50aWFsc01hbmFnZXIubG9hZENyZWRlbnRpYWxzKGNyZWRlbnRpYWxzUGF0aClcbiAgXG4gIGNvbnN0IHZhbGlkYXRpb24gPSBjcmVkZW50aWFsc01hbmFnZXIudmFsaWRhdGVDcmVkZW50aWFscygpXG4gIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgY29uc29sZS53YXJuKCfimqDvuI8gQ3JlZGVuY2lhbGVzIGZhbHRhbnRlczonLCB2YWxpZGF0aW9uLm1pc3NpbmcpXG4gICAgY29uc29sZS5sb2coJ/CfkqEgVXNhIGVsIGFyY2hpdm8gY3JlZGVudGlhbHMtdGVtcGxhdGUuanNvbiBjb21vIGd1w61hJylcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygn4pyFIFRvZGFzIGxhcyBjcmVkZW5jaWFsZXMgZXN0w6FuIGNvbmZpZ3VyYWRhcyBjb3JyZWN0YW1lbnRlJylcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyeXB0byIsIkNyZWRlbnRpYWxzTWFuYWdlciIsImNvbnN0cnVjdG9yIiwiY3JlZGVudGlhbHMiLCJpc0xvYWRlZCIsImVuY3J5cHRpb25LZXkiLCJwcm9jZXNzIiwiZW52IiwiQ1JFREVOVElBTFNfRU5DUllQVElPTl9LRVkiLCJsb2FkQ3JlZGVudGlhbHMiLCJjcmVkZW50aWFsc1BhdGgiLCJmcyIsInBhdGgiLCJmdWxsUGF0aCIsInJlc29sdmUiLCJjd2QiLCJlbmNyeXB0ZWREYXRhIiwicmVhZEZpbGUiLCJkZWNyeXB0ZWREYXRhIiwiZGVjcnlwdCIsIkpTT04iLCJwYXJzZSIsImxvYWRGcm9tRW52aXJvbm1lbnQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJFcnJvciIsIm9wZW5haSIsImFwaV9rZXkiLCJPUEVOQUlfQVBJX0tFWSIsIm1vZGVsIiwiT1BFTkFJX01PREVMIiwibWF4X3Rva2VucyIsInBhcnNlSW50IiwiT1BFTkFJX01BWF9UT0tFTlMiLCJ0ZW1wZXJhdHVyZSIsInBhcnNlRmxvYXQiLCJPUEVOQUlfVEVNUEVSQVRVUkUiLCJnb29nbGVfc2hlZXRzIiwic2hlZXRfaWQiLCJHT09HTEVfU0hFRVRfSUQiLCJzZXJ2aWNlX2FjY291bnRfZW1haWwiLCJHT09HTEVfU0VSVklDRV9BQ0NPVU5UX0VNQUlMIiwicHJpdmF0ZV9rZXkiLCJHT09HTEVfUFJJVkFURV9LRVkiLCJzY29wZXMiLCJtb25nb2RiIiwidXJpIiwiTU9OR09EQl9VUkkiLCJkYXRhYmFzZSIsIk1PTkdPREJfREFUQUJBU0UiLCJjb2xsZWN0aW9ucyIsInF1b3RlcyIsIk1PTkdPREJfUVVPVEVTX0NPTExFQ1RJT04iLCJzZXNzaW9ucyIsIk1PTkdPREJfU0VTU0lPTlNfQ09MTEVDVElPTiIsImNvbnRleHQiLCJNT05HT0RCX0NPTlRFWFRfQ09MTEVDVElPTiIsImFuYWx5dGljcyIsIk1PTkdPREJfQU5BTFlUSUNTX0NPTExFQ1RJT04iLCJ3aGF0c2FwcCIsImFjY2Vzc190b2tlbiIsIldIQVRTQVBQX0FDQ0VTU19UT0tFTiIsInBob25lX251bWJlcl9pZCIsIldIQVRTQVBQX1BIT05FX05VTUJFUl9JRCIsInZlcmlmeV90b2tlbiIsIldIQVRTQVBQX1ZFUklGWV9UT0tFTiIsIndlYmhvb2tfdXJsIiwiV0hBVFNBUFBfV0VCSE9PS19VUkwiLCJuOG4iLCJOOE5fV0VCSE9PS19VUkwiLCJOOE5fQVBJX0tFWSIsImJhc2VfdXJsIiwiTjhOX0JBU0VfVVJMIiwic3lzdGVtIiwiZW52aXJvbm1lbnQiLCJtYXhfY29udGV4dF90b2tlbnMiLCJNQVhfQ09OVEVYVF9UT0tFTlMiLCJtYXhfbWVzc2FnZXNfcGVyX3Nlc3Npb24iLCJNQVhfTUVTU0FHRVNfUEVSX1NFU1NJT04iLCJpbmFjdGl2aXR5X3RpbWVvdXRfbWludXRlcyIsIklOQUNUSVZJVFlfVElNRU9VVF9NSU5VVEVTIiwiZGVmYXVsdF96b25lIiwiREVGQVVMVF9aT05FIiwiZW5jcnlwdGlvbl9rZXkiLCJnZXRPcGVuQUkiLCJlbnN1cmVMb2FkZWQiLCJnZXRHb29nbGVTaGVldHMiLCJnZXRNb25nb0RCIiwiZ2V0V2hhdHNBcHAiLCJnZXROOE4iLCJnZXRTeXN0ZW0iLCJ2YWxpZGF0ZUNyZWRlbnRpYWxzIiwibWlzc2luZyIsImNyZWRzIiwicHVzaCIsImlzVmFsaWQiLCJsZW5ndGgiLCJlbmNyeXB0IiwidGV4dCIsImNpcGhlciIsImNyZWF0ZUNpcGhlciIsImVuY3J5cHRlZCIsInVwZGF0ZSIsImZpbmFsIiwiZW5jcnlwdGVkVGV4dCIsImRlY2lwaGVyIiwiY3JlYXRlRGVjaXBoZXIiLCJkZWNyeXB0ZWQiLCJnZXRDcmVkZW50aWFsc1N1bW1hcnkiLCJoYXNfYXBpX2tleSIsImhhc19jcmVkZW50aWFscyIsImhhc191cmkiLCJjcmVkZW50aWFsc01hbmFnZXIiLCJpbml0aWFsaXplQ3JlZGVudGlhbHMiLCJ2YWxpZGF0aW9uIiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/credentials-manager.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/google-sheets.ts":
/*!**********************************!*\
  !*** ./src/lib/google-sheets.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GoogleSheetsClient: () => (/* binding */ GoogleSheetsClient)\n/* harmony export */ });\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! googleapis */ \"(rsc)/./node_modules/googleapis/build/src/index.js\");\n/* harmony import */ var _secure_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./secure-config */ \"(rsc)/./src/lib/secure-config.ts\");\n\n\nclass GoogleSheetsClient {\n    constructor(){\n        if (!_secure_config__WEBPACK_IMPORTED_MODULE_0__.secureConfig.isReady()) {\n            throw new Error(\"SecureConfig not initialized. Call initializeSecureConfig() first.\");\n        }\n        const config = _secure_config__WEBPACK_IMPORTED_MODULE_0__.secureConfig.getGoogleSheetsConfig();\n        this.spreadsheetId = config.sheetId;\n        if (!this.spreadsheetId) {\n            throw new Error(\"Google Sheet ID is not configured\");\n        }\n        const auth = new googleapis__WEBPACK_IMPORTED_MODULE_1__.google.auth.GoogleAuth({\n            credentials: {\n                client_email: config.serviceAccountEmail,\n                private_key: config.privateKey?.replace(/\\\\n/g, \"\\n\")\n            },\n            scopes: config.scopes\n        });\n        this.sheets = googleapis__WEBPACK_IMPORTED_MODULE_1__.google.sheets({\n            version: \"v4\",\n            auth\n        });\n    }\n    // Leer pesta√±a \"Admin.\" completa\n    async readAdminTab() {\n        try {\n            const response = await this.sheets.spreadsheets.values.get({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Admin.!A:H\" // Columnas A-H\n            });\n            return this.parseAdminRows(response.data.values || []);\n        } catch (error) {\n            console.error(\"Error reading Admin tab:\", error);\n            throw new Error(`Failed to read Admin tab: ${error.message}`);\n        }\n    }\n    // Leer pesta√±a \"Enviados\"\n    async readEnviadosTab() {\n        try {\n            const response = await this.sheets.spreadsheets.values.get({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Enviados!A:H\"\n            });\n            return this.parseAdminRows(response.data.values || []);\n        } catch (error) {\n            console.error(\"Error reading Enviados tab:\", error);\n            throw new Error(`Failed to read Enviados tab: ${error.message}`);\n        }\n    }\n    // Leer pesta√±a \"Confirmado\"\n    async readConfirmadoTab() {\n        try {\n            const response = await this.sheets.spreadsheets.values.get({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Confirmado!A:H\"\n            });\n            return this.parseAdminRows(response.data.values || []);\n        } catch (error) {\n            console.error(\"Error reading Confirmado tab:\", error);\n            throw new Error(`Failed to read Confirmado tab: ${error.message}`);\n        }\n    }\n    // Parsear filas del sheet\n    parseAdminRows(rows) {\n        if (!rows || rows.length === 0) return [];\n        // Primera fila son headers, saltarla\n        return rows.slice(1).map((row, index)=>({\n                rowNumber: index + 2,\n                arg: row[0] || \"\",\n                estado: row[1] || \"\",\n                fecha: row[2] || \"\",\n                cliente: row[3] || \"\",\n                origen: row[4] || \"\",\n                telefono: row[5] || \"\",\n                direccion: row[6] || \"\",\n                consulta: row[7] || \"\"\n            }));\n    }\n    // Agregar nueva cotizaci√≥n a \"Admin.\"\n    async addQuoteToAdmin(quoteData) {\n        try {\n            const values = [\n                [\n                    quoteData.arg,\n                    quoteData.estado,\n                    quoteData.fecha,\n                    quoteData.cliente,\n                    quoteData.origen,\n                    quoteData.telefono,\n                    quoteData.direccion,\n                    quoteData.consulta\n                ]\n            ];\n            await this.sheets.spreadsheets.values.append({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Admin.!A:H\",\n                valueInputOption: \"USER_ENTERED\",\n                resource: {\n                    values\n                }\n            });\n        } catch (error) {\n            console.error(\"Error adding quote to Admin:\", error);\n            throw new Error(`Failed to add quote to Admin: ${error.message}`);\n        }\n    }\n    // Leer fila espec√≠fica\n    async readSpecificRow(sheetName, rowNumber) {\n        try {\n            const response = await this.sheets.spreadsheets.values.get({\n                spreadsheetId: this.spreadsheetId,\n                range: `${sheetName}!A${rowNumber}:H${rowNumber}`\n            });\n            return response.data.values?.[0] || [];\n        } catch (error) {\n            console.error(`Error reading specific row ${rowNumber} from ${sheetName}:`, error);\n            throw new Error(`Failed to read row ${rowNumber} from ${sheetName}: ${error.message}`);\n        }\n    }\n    // Mover cotizaci√≥n de \"Admin.\" a \"Enviados\"\n    async moveToEnviados(rowNumber, additionalData) {\n        try {\n            // 1. Leer la fila espec√≠fica\n            const row = await this.readSpecificRow(\"Admin.\", rowNumber);\n            // 2. Agregar a \"Enviados\"\n            await this.sheets.spreadsheets.values.append({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Enviados!A:H\",\n                valueInputOption: \"USER_ENTERED\",\n                resource: {\n                    values: [\n                        row\n                    ]\n                }\n            });\n            // 3. Cambiar estado en \"Admin.\" en lugar de eliminar\n            await this.updateCellValue(\"Admin.\", rowNumber, \"B\", \"Enviado\");\n        } catch (error) {\n            console.error(\"Error moving to Enviados:\", error);\n            throw new Error(`Failed to move to Enviados: ${error.message}`);\n        }\n    }\n    // Mover cotizaci√≥n de \"Enviados\" a \"Confirmado\"\n    async moveToConfirmado(rowNumber) {\n        try {\n            // 1. Leer la fila espec√≠fica de Enviados\n            const row = await this.readSpecificRow(\"Enviados\", rowNumber);\n            // 2. Agregar a \"Confirmado\"\n            await this.sheets.spreadsheets.values.append({\n                spreadsheetId: this.spreadsheetId,\n                range: \"Confirmado!A:H\",\n                valueInputOption: \"USER_ENTERED\",\n                resource: {\n                    values: [\n                        row\n                    ]\n                }\n            });\n            // 3. Cambiar estado en \"Enviados\"\n            await this.updateCellValue(\"Enviados\", rowNumber, \"B\", \"Confirmado\");\n        } catch (error) {\n            console.error(\"Error moving to Confirmado:\", error);\n            throw new Error(`Failed to move to Confirmado: ${error.message}`);\n        }\n    }\n    // Actualizar valor de una celda espec√≠fica\n    async updateCellValue(sheetName, row, column, value) {\n        try {\n            await this.sheets.spreadsheets.values.update({\n                spreadsheetId: this.spreadsheetId,\n                range: `${sheetName}!${column}${row}`,\n                valueInputOption: \"USER_ENTERED\",\n                resource: {\n                    values: [\n                        [\n                            value\n                        ]\n                    ]\n                }\n            });\n        } catch (error) {\n            console.error(`Error updating cell ${column}${row} in ${sheetName}:`, error);\n            throw new Error(`Failed to update cell: ${error.message}`);\n        }\n    }\n    // Buscar cotizaci√≥n por tel√©fono\n    async findByPhone(phone) {\n        try {\n            const [adminRows, enviadosRows, confirmadosRows] = await Promise.all([\n                this.readAdminTab(),\n                this.readEnviadosTab(),\n                this.readConfirmadoTab()\n            ]);\n            return {\n                pendientes: adminRows.filter((r)=>r.telefono.includes(phone)),\n                enviados: enviadosRows.filter((r)=>r.telefono.includes(phone)),\n                confirmados: confirmadosRows.filter((r)=>r.telefono.includes(phone))\n            };\n        } catch (error) {\n            console.error(\"Error finding by phone:\", error);\n            throw new Error(`Failed to find by phone: ${error.message}`);\n        }\n    }\n    // Obtener estad√≠sticas generales\n    async getStats() {\n        try {\n            const [adminRows, enviadosRows, confirmadosRows] = await Promise.all([\n                this.readAdminTab(),\n                this.readEnviadosTab(),\n                this.readConfirmadoTab()\n            ]);\n            return {\n                totalPendientes: adminRows.length,\n                totalEnviados: enviadosRows.length,\n                totalConfirmados: confirmadosRows.length,\n                totalGeneral: adminRows.length + enviadosRows.length + confirmadosRows.length\n            };\n        } catch (error) {\n            console.error(\"Error getting stats:\", error);\n            throw new Error(`Failed to get stats: ${error.message}`);\n        }\n    }\n    // Generar c√≥digo Arg autom√°tico\n    generateArgCode(phone, origen = \"WA\") {\n        const prefix = phone.slice(-4);\n        const date = new Date().getDate();\n        const month = new Date().getMonth() + 1;\n        return `${origen}${month}${date}${prefix}`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dvb2dsZS1zaGVldHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ1c7QUF5QnZDLE1BQU1FO0lBSVhDLGFBQWM7UUFDWixJQUFJLENBQUNGLHdEQUFZQSxDQUFDRyxPQUFPLElBQUk7WUFDM0IsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsU0FBU0wsd0RBQVlBLENBQUNNLHFCQUFxQjtRQUNqRCxJQUFJLENBQUNDLGFBQWEsR0FBR0YsT0FBT0csT0FBTztRQUVuQyxJQUFJLENBQUMsSUFBSSxDQUFDRCxhQUFhLEVBQUU7WUFDdkIsTUFBTSxJQUFJSCxNQUFNO1FBQ2xCO1FBRUEsTUFBTUssT0FBTyxJQUFJViw4Q0FBTUEsQ0FBQ1UsSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDdENDLGFBQWE7Z0JBQ1hDLGNBQWNQLE9BQU9RLG1CQUFtQjtnQkFDeENDLGFBQWFULE9BQU9VLFVBQVUsRUFBRUMsUUFBUSxRQUFRO1lBQ2xEO1lBQ0FDLFFBQVFaLE9BQU9ZLE1BQU07UUFDdkI7UUFFQSxJQUFJLENBQUNDLE1BQU0sR0FBR25CLDhDQUFNQSxDQUFDbUIsTUFBTSxDQUFDO1lBQUVDLFNBQVM7WUFBTVY7UUFBSztJQUNwRDtJQUVBLGlDQUFpQztJQUNqQyxNQUFNVyxlQUFvQztRQUN4QyxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxZQUFZLENBQUNDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDO2dCQUN6RGpCLGVBQWUsSUFBSSxDQUFDQSxhQUFhO2dCQUNqQ2tCLE9BQU8sYUFBYSxlQUFlO1lBQ3JDO1lBQ0EsT0FBTyxJQUFJLENBQUNDLGNBQWMsQ0FBQ0wsU0FBU00sSUFBSSxDQUFDSixNQUFNLElBQUksRUFBRTtRQUN2RCxFQUFFLE9BQU9LLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRCQUE0QkE7WUFDMUMsTUFBTSxJQUFJeEIsTUFBTSxDQUFDLDBCQUEwQixFQUFFd0IsTUFBTUUsT0FBTyxDQUFDLENBQUM7UUFDOUQ7SUFDRjtJQUVBLDBCQUEwQjtJQUMxQixNQUFNQyxrQkFBdUM7UUFDM0MsSUFBSTtZQUNGLE1BQU1WLFdBQVcsTUFBTSxJQUFJLENBQUNILE1BQU0sQ0FBQ0ksWUFBWSxDQUFDQyxNQUFNLENBQUNDLEdBQUcsQ0FBQztnQkFDekRqQixlQUFlLElBQUksQ0FBQ0EsYUFBYTtnQkFDakNrQixPQUFPO1lBQ1Q7WUFDQSxPQUFPLElBQUksQ0FBQ0MsY0FBYyxDQUFDTCxTQUFTTSxJQUFJLENBQUNKLE1BQU0sSUFBSSxFQUFFO1FBQ3ZELEVBQUUsT0FBT0ssT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtZQUM3QyxNQUFNLElBQUl4QixNQUFNLENBQUMsNkJBQTZCLEVBQUV3QixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUNqRTtJQUNGO0lBRUEsNEJBQTRCO0lBQzVCLE1BQU1FLG9CQUF5QztRQUM3QyxJQUFJO1lBQ0YsTUFBTVgsV0FBVyxNQUFNLElBQUksQ0FBQ0gsTUFBTSxDQUFDSSxZQUFZLENBQUNDLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDO2dCQUN6RGpCLGVBQWUsSUFBSSxDQUFDQSxhQUFhO2dCQUNqQ2tCLE9BQU87WUFDVDtZQUNBLE9BQU8sSUFBSSxDQUFDQyxjQUFjLENBQUNMLFNBQVNNLElBQUksQ0FBQ0osTUFBTSxJQUFJLEVBQUU7UUFDdkQsRUFBRSxPQUFPSyxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNBO1lBQy9DLE1BQU0sSUFBSXhCLE1BQU0sQ0FBQywrQkFBK0IsRUFBRXdCLE1BQU1FLE9BQU8sQ0FBQyxDQUFDO1FBQ25FO0lBQ0Y7SUFFQSwwQkFBMEI7SUFDbEJKLGVBQWVPLElBQWEsRUFBYztRQUNoRCxJQUFJLENBQUNBLFFBQVFBLEtBQUtDLE1BQU0sS0FBSyxHQUFHLE9BQU8sRUFBRTtRQUV6QyxxQ0FBcUM7UUFDckMsT0FBT0QsS0FBS0UsS0FBSyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxDQUFDQyxLQUFLQyxRQUFXO2dCQUN4Q0MsV0FBV0QsUUFBUTtnQkFDbkJFLEtBQUtILEdBQUcsQ0FBQyxFQUFFLElBQUk7Z0JBQ2ZJLFFBQVFKLEdBQUcsQ0FBQyxFQUFFLElBQUk7Z0JBQ2xCSyxPQUFPTCxHQUFHLENBQUMsRUFBRSxJQUFJO2dCQUNqQk0sU0FBU04sR0FBRyxDQUFDLEVBQUUsSUFBSTtnQkFDbkJPLFFBQVFQLEdBQUcsQ0FBQyxFQUFFLElBQUk7Z0JBQ2xCUSxVQUFVUixHQUFHLENBQUMsRUFBRSxJQUFJO2dCQUNwQlMsV0FBV1QsR0FBRyxDQUFDLEVBQUUsSUFBSTtnQkFDckJVLFVBQVVWLEdBQUcsQ0FBQyxFQUFFLElBQUk7WUFDdEI7SUFDRjtJQUVBLHNDQUFzQztJQUN0QyxNQUFNVyxnQkFBZ0JDLFNBQW9CLEVBQWlCO1FBQ3pELElBQUk7WUFDRixNQUFNMUIsU0FBUztnQkFBQztvQkFDZDBCLFVBQVVULEdBQUc7b0JBQ2JTLFVBQVVSLE1BQU07b0JBQ2hCUSxVQUFVUCxLQUFLO29CQUNmTyxVQUFVTixPQUFPO29CQUNqQk0sVUFBVUwsTUFBTTtvQkFDaEJLLFVBQVVKLFFBQVE7b0JBQ2xCSSxVQUFVSCxTQUFTO29CQUNuQkcsVUFBVUYsUUFBUTtpQkFDbkI7YUFBQztZQUVGLE1BQU0sSUFBSSxDQUFDN0IsTUFBTSxDQUFDSSxZQUFZLENBQUNDLE1BQU0sQ0FBQzJCLE1BQU0sQ0FBQztnQkFDM0MzQyxlQUFlLElBQUksQ0FBQ0EsYUFBYTtnQkFDakNrQixPQUFPO2dCQUNQMEIsa0JBQWtCO2dCQUNsQkMsVUFBVTtvQkFBRTdCO2dCQUFPO1lBQ3JCO1FBQ0YsRUFBRSxPQUFPSyxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDLE1BQU0sSUFBSXhCLE1BQU0sQ0FBQyw4QkFBOEIsRUFBRXdCLE1BQU1FLE9BQU8sQ0FBQyxDQUFDO1FBQ2xFO0lBQ0Y7SUFFQSx1QkFBdUI7SUFDdkIsTUFBTXVCLGdCQUFnQkMsU0FBaUIsRUFBRWYsU0FBaUIsRUFBcUI7UUFDN0UsSUFBSTtZQUNGLE1BQU1sQixXQUFXLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLFlBQVksQ0FBQ0MsTUFBTSxDQUFDQyxHQUFHLENBQUM7Z0JBQ3pEakIsZUFBZSxJQUFJLENBQUNBLGFBQWE7Z0JBQ2pDa0IsT0FBTyxDQUFDLEVBQUU2QixVQUFVLEVBQUUsRUFBRWYsVUFBVSxFQUFFLEVBQUVBLFVBQVUsQ0FBQztZQUNuRDtZQUNBLE9BQU9sQixTQUFTTSxJQUFJLENBQUNKLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO1FBQ3hDLEVBQUUsT0FBT0ssT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQywyQkFBMkIsRUFBRVcsVUFBVSxNQUFNLEVBQUVlLFVBQVUsQ0FBQyxDQUFDLEVBQUUxQjtZQUM1RSxNQUFNLElBQUl4QixNQUFNLENBQUMsbUJBQW1CLEVBQUVtQyxVQUFVLE1BQU0sRUFBRWUsVUFBVSxFQUFFLEVBQUUxQixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUN2RjtJQUNGO0lBRUEsNENBQTRDO0lBQzVDLE1BQU15QixlQUFlaEIsU0FBaUIsRUFBRWlCLGNBQW9CLEVBQWlCO1FBQzNFLElBQUk7WUFDRiw2QkFBNkI7WUFDN0IsTUFBTW5CLE1BQU0sTUFBTSxJQUFJLENBQUNnQixlQUFlLENBQUMsVUFBVWQ7WUFFakQsMEJBQTBCO1lBQzFCLE1BQU0sSUFBSSxDQUFDckIsTUFBTSxDQUFDSSxZQUFZLENBQUNDLE1BQU0sQ0FBQzJCLE1BQU0sQ0FBQztnQkFDM0MzQyxlQUFlLElBQUksQ0FBQ0EsYUFBYTtnQkFDakNrQixPQUFPO2dCQUNQMEIsa0JBQWtCO2dCQUNsQkMsVUFBVTtvQkFBRTdCLFFBQVE7d0JBQUNjO3FCQUFJO2dCQUFDO1lBQzVCO1lBRUEscURBQXFEO1lBQ3JELE1BQU0sSUFBSSxDQUFDb0IsZUFBZSxDQUFDLFVBQVVsQixXQUFXLEtBQUs7UUFDdkQsRUFBRSxPQUFPWCxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE1BQU0sSUFBSXhCLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRXdCLE1BQU1FLE9BQU8sQ0FBQyxDQUFDO1FBQ2hFO0lBQ0Y7SUFFQSxnREFBZ0Q7SUFDaEQsTUFBTTRCLGlCQUFpQm5CLFNBQWlCLEVBQWlCO1FBQ3ZELElBQUk7WUFDRix5Q0FBeUM7WUFDekMsTUFBTUYsTUFBTSxNQUFNLElBQUksQ0FBQ2dCLGVBQWUsQ0FBQyxZQUFZZDtZQUVuRCw0QkFBNEI7WUFDNUIsTUFBTSxJQUFJLENBQUNyQixNQUFNLENBQUNJLFlBQVksQ0FBQ0MsTUFBTSxDQUFDMkIsTUFBTSxDQUFDO2dCQUMzQzNDLGVBQWUsSUFBSSxDQUFDQSxhQUFhO2dCQUNqQ2tCLE9BQU87Z0JBQ1AwQixrQkFBa0I7Z0JBQ2xCQyxVQUFVO29CQUFFN0IsUUFBUTt3QkFBQ2M7cUJBQUk7Z0JBQUM7WUFDNUI7WUFFQSxrQ0FBa0M7WUFDbEMsTUFBTSxJQUFJLENBQUNvQixlQUFlLENBQUMsWUFBWWxCLFdBQVcsS0FBSztRQUN6RCxFQUFFLE9BQU9YLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsTUFBTSxJQUFJeEIsTUFBTSxDQUFDLDhCQUE4QixFQUFFd0IsTUFBTUUsT0FBTyxDQUFDLENBQUM7UUFDbEU7SUFDRjtJQUVBLDJDQUEyQztJQUMzQyxNQUFNMkIsZ0JBQWdCSCxTQUFpQixFQUFFakIsR0FBVyxFQUFFc0IsTUFBYyxFQUFFQyxLQUFhLEVBQWlCO1FBQ2xHLElBQUk7WUFDRixNQUFNLElBQUksQ0FBQzFDLE1BQU0sQ0FBQ0ksWUFBWSxDQUFDQyxNQUFNLENBQUNzQyxNQUFNLENBQUM7Z0JBQzNDdEQsZUFBZSxJQUFJLENBQUNBLGFBQWE7Z0JBQ2pDa0IsT0FBTyxDQUFDLEVBQUU2QixVQUFVLENBQUMsRUFBRUssT0FBTyxFQUFFdEIsSUFBSSxDQUFDO2dCQUNyQ2Msa0JBQWtCO2dCQUNsQkMsVUFBVTtvQkFBRTdCLFFBQVE7d0JBQUM7NEJBQUNxQzt5QkFBTTtxQkFBQztnQkFBQztZQUNoQztRQUNGLEVBQUUsT0FBT2hDLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsb0JBQW9CLEVBQUUrQixPQUFPLEVBQUV0QixJQUFJLElBQUksRUFBRWlCLFVBQVUsQ0FBQyxDQUFDLEVBQUUxQjtZQUN0RSxNQUFNLElBQUl4QixNQUFNLENBQUMsdUJBQXVCLEVBQUV3QixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUMzRDtJQUNGO0lBRUEsaUNBQWlDO0lBQ2pDLE1BQU1nQyxZQUFZQyxLQUFhLEVBSTVCO1FBQ0QsSUFBSTtZQUNGLE1BQU0sQ0FBQ0MsV0FBV0MsY0FBY0MsZ0JBQWdCLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO2dCQUNuRSxJQUFJLENBQUNoRCxZQUFZO2dCQUNqQixJQUFJLENBQUNXLGVBQWU7Z0JBQ3BCLElBQUksQ0FBQ0MsaUJBQWlCO2FBQ3ZCO1lBRUQsT0FBTztnQkFDTHFDLFlBQVlMLFVBQVVNLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRTFCLFFBQVEsQ0FBQzJCLFFBQVEsQ0FBQ1Q7Z0JBQ3REVSxVQUFVUixhQUFhSyxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUUxQixRQUFRLENBQUMyQixRQUFRLENBQUNUO2dCQUN2RFcsYUFBYVIsZ0JBQWdCSSxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUUxQixRQUFRLENBQUMyQixRQUFRLENBQUNUO1lBQy9EO1FBQ0YsRUFBRSxPQUFPbkMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtZQUN6QyxNQUFNLElBQUl4QixNQUFNLENBQUMseUJBQXlCLEVBQUV3QixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUM3RDtJQUNGO0lBRUEsaUNBQWlDO0lBQ2pDLE1BQU02QyxXQUtIO1FBQ0QsSUFBSTtZQUNGLE1BQU0sQ0FBQ1gsV0FBV0MsY0FBY0MsZ0JBQWdCLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO2dCQUNuRSxJQUFJLENBQUNoRCxZQUFZO2dCQUNqQixJQUFJLENBQUNXLGVBQWU7Z0JBQ3BCLElBQUksQ0FBQ0MsaUJBQWlCO2FBQ3ZCO1lBRUQsT0FBTztnQkFDTDRDLGlCQUFpQlosVUFBVTlCLE1BQU07Z0JBQ2pDMkMsZUFBZVosYUFBYS9CLE1BQU07Z0JBQ2xDNEMsa0JBQWtCWixnQkFBZ0JoQyxNQUFNO2dCQUN4QzZDLGNBQWNmLFVBQVU5QixNQUFNLEdBQUcrQixhQUFhL0IsTUFBTSxHQUFHZ0MsZ0JBQWdCaEMsTUFBTTtZQUMvRTtRQUNGLEVBQUUsT0FBT04sT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtZQUN0QyxNQUFNLElBQUl4QixNQUFNLENBQUMscUJBQXFCLEVBQUV3QixNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUN6RDtJQUNGO0lBRUEsZ0NBQWdDO0lBQ2hDa0QsZ0JBQWdCakIsS0FBYSxFQUFFbkIsU0FBaUIsSUFBSSxFQUFVO1FBQzVELE1BQU1xQyxTQUFTbEIsTUFBTTVCLEtBQUssQ0FBQyxDQUFDO1FBQzVCLE1BQU0rQyxPQUFPLElBQUlDLE9BQU9DLE9BQU87UUFDL0IsTUFBTUMsUUFBUSxJQUFJRixPQUFPRyxRQUFRLEtBQUs7UUFDdEMsT0FBTyxDQUFDLEVBQUUxQyxPQUFPLEVBQUV5QyxNQUFNLEVBQUVILEtBQUssRUFBRUQsT0FBTyxDQUFDO0lBQzVDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9saWIvZ29vZ2xlLXNoZWV0cy50cz8xOGM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdvb2dsZSB9IGZyb20gJ2dvb2dsZWFwaXMnXG5pbXBvcnQgeyBzZWN1cmVDb25maWcgfSBmcm9tICcuL3NlY3VyZS1jb25maWcnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRtaW5Sb3cge1xuICByb3dOdW1iZXI6IG51bWJlclxuICBhcmc6IHN0cmluZ1xuICBlc3RhZG86IHN0cmluZ1xuICBmZWNoYTogc3RyaW5nXG4gIGNsaWVudGU6IHN0cmluZ1xuICBvcmlnZW46IHN0cmluZ1xuICB0ZWxlZm9ubzogc3RyaW5nXG4gIGRpcmVjY2lvbjogc3RyaW5nXG4gIGNvbnN1bHRhOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdW90ZURhdGEge1xuICBhcmc6IHN0cmluZ1xuICBlc3RhZG86IHN0cmluZ1xuICBmZWNoYTogc3RyaW5nXG4gIGNsaWVudGU6IHN0cmluZ1xuICBvcmlnZW46IHN0cmluZ1xuICB0ZWxlZm9ubzogc3RyaW5nXG4gIGRpcmVjY2lvbjogc3RyaW5nXG4gIGNvbnN1bHRhOiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIEdvb2dsZVNoZWV0c0NsaWVudCB7XG4gIHByaXZhdGUgc2hlZXRzOiBhbnlcbiAgcHJpdmF0ZSBzcHJlYWRzaGVldElkOiBzdHJpbmdcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICghc2VjdXJlQ29uZmlnLmlzUmVhZHkoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWN1cmVDb25maWcgbm90IGluaXRpYWxpemVkLiBDYWxsIGluaXRpYWxpemVTZWN1cmVDb25maWcoKSBmaXJzdC4nKVxuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpZyA9IHNlY3VyZUNvbmZpZy5nZXRHb29nbGVTaGVldHNDb25maWcoKVxuICAgIHRoaXMuc3ByZWFkc2hlZXRJZCA9IGNvbmZpZy5zaGVldElkXG5cbiAgICBpZiAoIXRoaXMuc3ByZWFkc2hlZXRJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgU2hlZXQgSUQgaXMgbm90IGNvbmZpZ3VyZWQnKVxuICAgIH1cblxuICAgIGNvbnN0IGF1dGggPSBuZXcgZ29vZ2xlLmF1dGguR29vZ2xlQXV0aCh7XG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBjbGllbnRfZW1haWw6IGNvbmZpZy5zZXJ2aWNlQWNjb3VudEVtYWlsLFxuICAgICAgICBwcml2YXRlX2tleTogY29uZmlnLnByaXZhdGVLZXk/LnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgfSxcbiAgICAgIHNjb3BlczogY29uZmlnLnNjb3Blc1xuICAgIH0pXG4gICAgXG4gICAgdGhpcy5zaGVldHMgPSBnb29nbGUuc2hlZXRzKHsgdmVyc2lvbjogJ3Y0JywgYXV0aCB9KVxuICB9XG4gIFxuICAvLyBMZWVyIHBlc3Rhw7FhIFwiQWRtaW4uXCIgY29tcGxldGFcbiAgYXN5bmMgcmVhZEFkbWluVGFiKCk6IFByb21pc2U8QWRtaW5Sb3dbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuZ2V0KHtcbiAgICAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5zcHJlYWRzaGVldElkLFxuICAgICAgICByYW5nZTogJ0FkbWluLiFBOkgnIC8vIENvbHVtbmFzIEEtSFxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlQWRtaW5Sb3dzKHJlc3BvbnNlLmRhdGEudmFsdWVzIHx8IFtdKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIEFkbWluIHRhYjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgQWRtaW4gdGFiOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG4gIH1cbiAgXG4gIC8vIExlZXIgcGVzdGHDsWEgXCJFbnZpYWRvc1wiXG4gIGFzeW5jIHJlYWRFbnZpYWRvc1RhYigpOiBQcm9taXNlPEFkbWluUm93W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLmdldCh7XG4gICAgICAgIHNwcmVhZHNoZWV0SWQ6IHRoaXMuc3ByZWFkc2hlZXRJZCxcbiAgICAgICAgcmFuZ2U6ICdFbnZpYWRvcyFBOkgnXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXMucGFyc2VBZG1pblJvd3MocmVzcG9uc2UuZGF0YS52YWx1ZXMgfHwgW10pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgRW52aWFkb3MgdGFiOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVhZCBFbnZpYWRvcyB0YWI6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gTGVlciBwZXN0YcOxYSBcIkNvbmZpcm1hZG9cIlxuICBhc3luYyByZWFkQ29uZmlybWFkb1RhYigpOiBQcm9taXNlPEFkbWluUm93W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLmdldCh7XG4gICAgICAgIHNwcmVhZHNoZWV0SWQ6IHRoaXMuc3ByZWFkc2hlZXRJZCxcbiAgICAgICAgcmFuZ2U6ICdDb25maXJtYWRvIUE6SCdcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpcy5wYXJzZUFkbWluUm93cyhyZXNwb25zZS5kYXRhLnZhbHVlcyB8fCBbXSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBDb25maXJtYWRvIHRhYjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgQ29uZmlybWFkbyB0YWI6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gUGFyc2VhciBmaWxhcyBkZWwgc2hlZXRcbiAgcHJpdmF0ZSBwYXJzZUFkbWluUm93cyhyb3dzOiBhbnlbXVtdKTogQWRtaW5Sb3dbXSB7XG4gICAgaWYgKCFyb3dzIHx8IHJvd3MubGVuZ3RoID09PSAwKSByZXR1cm4gW11cbiAgICBcbiAgICAvLyBQcmltZXJhIGZpbGEgc29uIGhlYWRlcnMsIHNhbHRhcmxhXG4gICAgcmV0dXJuIHJvd3Muc2xpY2UoMSkubWFwKChyb3csIGluZGV4KSA9PiAoe1xuICAgICAgcm93TnVtYmVyOiBpbmRleCArIDIsIC8vICsyIHBvcnF1ZSBFeGNlbCBlbXBpZXphIGVuIDEgeSBzYWx0YW1vcyBoZWFkZXJcbiAgICAgIGFyZzogcm93WzBdIHx8ICcnLFxuICAgICAgZXN0YWRvOiByb3dbMV0gfHwgJycsXG4gICAgICBmZWNoYTogcm93WzJdIHx8ICcnLFxuICAgICAgY2xpZW50ZTogcm93WzNdIHx8ICcnLFxuICAgICAgb3JpZ2VuOiByb3dbNF0gfHwgJycsXG4gICAgICB0ZWxlZm9ubzogcm93WzVdIHx8ICcnLFxuICAgICAgZGlyZWNjaW9uOiByb3dbNl0gfHwgJycsXG4gICAgICBjb25zdWx0YTogcm93WzddIHx8ICcnLFxuICAgIH0pKVxuICB9XG4gIFxuICAvLyBBZ3JlZ2FyIG51ZXZhIGNvdGl6YWNpw7NuIGEgXCJBZG1pbi5cIlxuICBhc3luYyBhZGRRdW90ZVRvQWRtaW4ocXVvdGVEYXRhOiBRdW90ZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdmFsdWVzID0gW1tcbiAgICAgICAgcXVvdGVEYXRhLmFyZyxcbiAgICAgICAgcXVvdGVEYXRhLmVzdGFkbyxcbiAgICAgICAgcXVvdGVEYXRhLmZlY2hhLFxuICAgICAgICBxdW90ZURhdGEuY2xpZW50ZSxcbiAgICAgICAgcXVvdGVEYXRhLm9yaWdlbixcbiAgICAgICAgcXVvdGVEYXRhLnRlbGVmb25vLFxuICAgICAgICBxdW90ZURhdGEuZGlyZWNjaW9uLFxuICAgICAgICBxdW90ZURhdGEuY29uc3VsdGFcbiAgICAgIF1dXG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuYXBwZW5kKHtcbiAgICAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5zcHJlYWRzaGVldElkLFxuICAgICAgICByYW5nZTogJ0FkbWluLiFBOkgnLFxuICAgICAgICB2YWx1ZUlucHV0T3B0aW9uOiAnVVNFUl9FTlRFUkVEJyxcbiAgICAgICAgcmVzb3VyY2U6IHsgdmFsdWVzIH1cbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyBxdW90ZSB0byBBZG1pbjonLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFkZCBxdW90ZSB0byBBZG1pbjogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuICB9XG4gIFxuICAvLyBMZWVyIGZpbGEgZXNwZWPDrWZpY2FcbiAgYXN5bmMgcmVhZFNwZWNpZmljUm93KHNoZWV0TmFtZTogc3RyaW5nLCByb3dOdW1iZXI6IG51bWJlcik6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLmdldCh7XG4gICAgICAgIHNwcmVhZHNoZWV0SWQ6IHRoaXMuc3ByZWFkc2hlZXRJZCxcbiAgICAgICAgcmFuZ2U6IGAke3NoZWV0TmFtZX0hQSR7cm93TnVtYmVyfTpIJHtyb3dOdW1iZXJ9YFxuICAgICAgfSlcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnZhbHVlcz8uWzBdIHx8IFtdXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgc3BlY2lmaWMgcm93ICR7cm93TnVtYmVyfSBmcm9tICR7c2hlZXROYW1lfTpgLCBlcnJvcilcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgcm93ICR7cm93TnVtYmVyfSBmcm9tICR7c2hlZXROYW1lfTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuICB9XG4gIFxuICAvLyBNb3ZlciBjb3RpemFjacOzbiBkZSBcIkFkbWluLlwiIGEgXCJFbnZpYWRvc1wiXG4gIGFzeW5jIG1vdmVUb0VudmlhZG9zKHJvd051bWJlcjogbnVtYmVyLCBhZGRpdGlvbmFsRGF0YT86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBMZWVyIGxhIGZpbGEgZXNwZWPDrWZpY2FcbiAgICAgIGNvbnN0IHJvdyA9IGF3YWl0IHRoaXMucmVhZFNwZWNpZmljUm93KCdBZG1pbi4nLCByb3dOdW1iZXIpXG4gICAgICBcbiAgICAgIC8vIDIuIEFncmVnYXIgYSBcIkVudmlhZG9zXCJcbiAgICAgIGF3YWl0IHRoaXMuc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuYXBwZW5kKHtcbiAgICAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5zcHJlYWRzaGVldElkLFxuICAgICAgICByYW5nZTogJ0VudmlhZG9zIUE6SCcsXG4gICAgICAgIHZhbHVlSW5wdXRPcHRpb246ICdVU0VSX0VOVEVSRUQnLFxuICAgICAgICByZXNvdXJjZTogeyB2YWx1ZXM6IFtyb3ddIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIDMuIENhbWJpYXIgZXN0YWRvIGVuIFwiQWRtaW4uXCIgZW4gbHVnYXIgZGUgZWxpbWluYXJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ2VsbFZhbHVlKCdBZG1pbi4nLCByb3dOdW1iZXIsICdCJywgJ0VudmlhZG8nKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtb3ZpbmcgdG8gRW52aWFkb3M6JywgZXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBtb3ZlIHRvIEVudmlhZG9zOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG4gIH1cbiAgXG4gIC8vIE1vdmVyIGNvdGl6YWNpw7NuIGRlIFwiRW52aWFkb3NcIiBhIFwiQ29uZmlybWFkb1wiXG4gIGFzeW5jIG1vdmVUb0NvbmZpcm1hZG8ocm93TnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gMS4gTGVlciBsYSBmaWxhIGVzcGVjw61maWNhIGRlIEVudmlhZG9zXG4gICAgICBjb25zdCByb3cgPSBhd2FpdCB0aGlzLnJlYWRTcGVjaWZpY1JvdygnRW52aWFkb3MnLCByb3dOdW1iZXIpXG4gICAgICBcbiAgICAgIC8vIDIuIEFncmVnYXIgYSBcIkNvbmZpcm1hZG9cIlxuICAgICAgYXdhaXQgdGhpcy5zaGVldHMuc3ByZWFkc2hlZXRzLnZhbHVlcy5hcHBlbmQoe1xuICAgICAgICBzcHJlYWRzaGVldElkOiB0aGlzLnNwcmVhZHNoZWV0SWQsXG4gICAgICAgIHJhbmdlOiAnQ29uZmlybWFkbyFBOkgnLFxuICAgICAgICB2YWx1ZUlucHV0T3B0aW9uOiAnVVNFUl9FTlRFUkVEJyxcbiAgICAgICAgcmVzb3VyY2U6IHsgdmFsdWVzOiBbcm93XSB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyAzLiBDYW1iaWFyIGVzdGFkbyBlbiBcIkVudmlhZG9zXCJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ2VsbFZhbHVlKCdFbnZpYWRvcycsIHJvd051bWJlciwgJ0InLCAnQ29uZmlybWFkbycpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1vdmluZyB0byBDb25maXJtYWRvOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbW92ZSB0byBDb25maXJtYWRvOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEFjdHVhbGl6YXIgdmFsb3IgZGUgdW5hIGNlbGRhIGVzcGVjw61maWNhXG4gIGFzeW5jIHVwZGF0ZUNlbGxWYWx1ZShzaGVldE5hbWU6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMudXBkYXRlKHtcbiAgICAgICAgc3ByZWFkc2hlZXRJZDogdGhpcy5zcHJlYWRzaGVldElkLFxuICAgICAgICByYW5nZTogYCR7c2hlZXROYW1lfSEke2NvbHVtbn0ke3Jvd31gLFxuICAgICAgICB2YWx1ZUlucHV0T3B0aW9uOiAnVVNFUl9FTlRFUkVEJyxcbiAgICAgICAgcmVzb3VyY2U6IHsgdmFsdWVzOiBbW3ZhbHVlXV0gfVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgdXBkYXRpbmcgY2VsbCAke2NvbHVtbn0ke3Jvd30gaW4gJHtzaGVldE5hbWV9OmAsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGNlbGw6ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQnVzY2FyIGNvdGl6YWNpw7NuIHBvciB0ZWzDqWZvbm9cbiAgYXN5bmMgZmluZEJ5UGhvbmUocGhvbmU6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHBlbmRpZW50ZXM6IEFkbWluUm93W11cbiAgICBlbnZpYWRvczogQWRtaW5Sb3dbXVxuICAgIGNvbmZpcm1hZG9zOiBBZG1pblJvd1tdXG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgW2FkbWluUm93cywgZW52aWFkb3NSb3dzLCBjb25maXJtYWRvc1Jvd3NdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLnJlYWRBZG1pblRhYigpLFxuICAgICAgICB0aGlzLnJlYWRFbnZpYWRvc1RhYigpLFxuICAgICAgICB0aGlzLnJlYWRDb25maXJtYWRvVGFiKClcbiAgICAgIF0pXG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBlbmRpZW50ZXM6IGFkbWluUm93cy5maWx0ZXIociA9PiByLnRlbGVmb25vLmluY2x1ZGVzKHBob25lKSksXG4gICAgICAgIGVudmlhZG9zOiBlbnZpYWRvc1Jvd3MuZmlsdGVyKHIgPT4gci50ZWxlZm9uby5pbmNsdWRlcyhwaG9uZSkpLFxuICAgICAgICBjb25maXJtYWRvczogY29uZmlybWFkb3NSb3dzLmZpbHRlcihyID0+IHIudGVsZWZvbm8uaW5jbHVkZXMocGhvbmUpKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaW5kaW5nIGJ5IHBob25lOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmluZCBieSBwaG9uZTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuICB9XG4gIFxuICAvLyBPYnRlbmVyIGVzdGFkw61zdGljYXMgZ2VuZXJhbGVzXG4gIGFzeW5jIGdldFN0YXRzKCk6IFByb21pc2U8e1xuICAgIHRvdGFsUGVuZGllbnRlczogbnVtYmVyXG4gICAgdG90YWxFbnZpYWRvczogbnVtYmVyXG4gICAgdG90YWxDb25maXJtYWRvczogbnVtYmVyXG4gICAgdG90YWxHZW5lcmFsOiBudW1iZXJcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbYWRtaW5Sb3dzLCBlbnZpYWRvc1Jvd3MsIGNvbmZpcm1hZG9zUm93c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMucmVhZEFkbWluVGFiKCksXG4gICAgICAgIHRoaXMucmVhZEVudmlhZG9zVGFiKCksXG4gICAgICAgIHRoaXMucmVhZENvbmZpcm1hZG9UYWIoKVxuICAgICAgXSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWxQZW5kaWVudGVzOiBhZG1pblJvd3MubGVuZ3RoLFxuICAgICAgICB0b3RhbEVudmlhZG9zOiBlbnZpYWRvc1Jvd3MubGVuZ3RoLFxuICAgICAgICB0b3RhbENvbmZpcm1hZG9zOiBjb25maXJtYWRvc1Jvd3MubGVuZ3RoLFxuICAgICAgICB0b3RhbEdlbmVyYWw6IGFkbWluUm93cy5sZW5ndGggKyBlbnZpYWRvc1Jvd3MubGVuZ3RoICsgY29uZmlybWFkb3NSb3dzLmxlbmd0aFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHN0YXRzOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHN0YXRzOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEdlbmVyYXIgY8OzZGlnbyBBcmcgYXV0b23DoXRpY29cbiAgZ2VuZXJhdGVBcmdDb2RlKHBob25lOiBzdHJpbmcsIG9yaWdlbjogc3RyaW5nID0gJ1dBJyk6IHN0cmluZyB7XG4gICAgY29uc3QgcHJlZml4ID0gcGhvbmUuc2xpY2UoLTQpXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0RGF0ZSgpXG4gICAgY29uc3QgbW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgKyAxXG4gICAgcmV0dXJuIGAke29yaWdlbn0ke21vbnRofSR7ZGF0ZX0ke3ByZWZpeH1gXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnb29nbGUiLCJzZWN1cmVDb25maWciLCJHb29nbGVTaGVldHNDbGllbnQiLCJjb25zdHJ1Y3RvciIsImlzUmVhZHkiLCJFcnJvciIsImNvbmZpZyIsImdldEdvb2dsZVNoZWV0c0NvbmZpZyIsInNwcmVhZHNoZWV0SWQiLCJzaGVldElkIiwiYXV0aCIsIkdvb2dsZUF1dGgiLCJjcmVkZW50aWFscyIsImNsaWVudF9lbWFpbCIsInNlcnZpY2VBY2NvdW50RW1haWwiLCJwcml2YXRlX2tleSIsInByaXZhdGVLZXkiLCJyZXBsYWNlIiwic2NvcGVzIiwic2hlZXRzIiwidmVyc2lvbiIsInJlYWRBZG1pblRhYiIsInJlc3BvbnNlIiwic3ByZWFkc2hlZXRzIiwidmFsdWVzIiwiZ2V0IiwicmFuZ2UiLCJwYXJzZUFkbWluUm93cyIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwicmVhZEVudmlhZG9zVGFiIiwicmVhZENvbmZpcm1hZG9UYWIiLCJyb3dzIiwibGVuZ3RoIiwic2xpY2UiLCJtYXAiLCJyb3ciLCJpbmRleCIsInJvd051bWJlciIsImFyZyIsImVzdGFkbyIsImZlY2hhIiwiY2xpZW50ZSIsIm9yaWdlbiIsInRlbGVmb25vIiwiZGlyZWNjaW9uIiwiY29uc3VsdGEiLCJhZGRRdW90ZVRvQWRtaW4iLCJxdW90ZURhdGEiLCJhcHBlbmQiLCJ2YWx1ZUlucHV0T3B0aW9uIiwicmVzb3VyY2UiLCJyZWFkU3BlY2lmaWNSb3ciLCJzaGVldE5hbWUiLCJtb3ZlVG9FbnZpYWRvcyIsImFkZGl0aW9uYWxEYXRhIiwidXBkYXRlQ2VsbFZhbHVlIiwibW92ZVRvQ29uZmlybWFkbyIsImNvbHVtbiIsInZhbHVlIiwidXBkYXRlIiwiZmluZEJ5UGhvbmUiLCJwaG9uZSIsImFkbWluUm93cyIsImVudmlhZG9zUm93cyIsImNvbmZpcm1hZG9zUm93cyIsIlByb21pc2UiLCJhbGwiLCJwZW5kaWVudGVzIiwiZmlsdGVyIiwiciIsImluY2x1ZGVzIiwiZW52aWFkb3MiLCJjb25maXJtYWRvcyIsImdldFN0YXRzIiwidG90YWxQZW5kaWVudGVzIiwidG90YWxFbnZpYWRvcyIsInRvdGFsQ29uZmlybWFkb3MiLCJ0b3RhbEdlbmVyYWwiLCJnZW5lcmF0ZUFyZ0NvZGUiLCJwcmVmaXgiLCJkYXRlIiwiRGF0ZSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/google-sheets.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/initialize-system.ts":
/*!**************************************!*\
  !*** ./src/lib/initialize-system.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSystemStatus: () => (/* binding */ getSystemStatus),\n/* harmony export */   initializeBMCSystem: () => (/* binding */ initializeBMCSystem),\n/* harmony export */   reinitializeSystem: () => (/* binding */ reinitializeSystem)\n/* harmony export */ });\n/* harmony import */ var _secure_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./secure-config */ \"(rsc)/./src/lib/secure-config.ts\");\n/* harmony import */ var _google_sheets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-sheets */ \"(rsc)/./src/lib/google-sheets.ts\");\n/* harmony import */ var _quote_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./quote-engine */ \"(rsc)/./src/lib/quote-engine.ts\");\n\n\n\n// Inicializar todo el sistema BMC de forma segura\nasync function initializeBMCSystem(credentialsPath) {\n    try {\n        console.log(\"\\uD83D\\uDE80 Inicializando Sistema BMC de Cotizaci\\xf3n...\");\n        // 1. Inicializar configuraci√≥n segura\n        console.log(\"\\uD83D\\uDD10 Cargando credenciales...\");\n        await (0,_secure_config__WEBPACK_IMPORTED_MODULE_0__.initializeSecureConfig)(credentialsPath);\n        // 2. Validar credenciales\n        console.log(\"‚úÖ Validando credenciales...\");\n        const validation = secureConfig.validateAllCredentials();\n        if (!validation.isValid) {\n            console.warn(\"‚ö†Ô∏è Credenciales faltantes:\", validation.missing);\n            return {\n                success: false,\n                error: `Credenciales faltantes: ${validation.missing.join(\", \")}`\n            };\n        }\n        // 3. Probar conexi√≥n a Google Sheets\n        console.log(\"\\uD83D\\uDCCA Probando conexi\\xf3n a Google Sheets...\");\n        try {\n            const sheetsClient = new _google_sheets__WEBPACK_IMPORTED_MODULE_1__.GoogleSheetsClient();\n            await sheetsClient.getStats();\n            console.log(\"‚úÖ Google Sheets conectado correctamente\");\n        } catch (error) {\n            console.warn(\"‚ö†Ô∏è Error conectando a Google Sheets:\", error.message);\n        }\n        // 4. Probar motor de cotizaci√≥n\n        console.log(\"\\uD83E\\uDD16 Probando motor de cotizaci\\xf3n...\");\n        try {\n            const testResponse = await _quote_engine__WEBPACK_IMPORTED_MODULE_2__.quoteEngine.procesarConsulta(\"Test de conexi\\xf3n\");\n            console.log(\"‚úÖ Motor de cotizaci\\xf3n funcionando\");\n        } catch (error) {\n            console.warn(\"‚ö†Ô∏è Error en motor de cotizaci\\xf3n:\", error.message);\n        }\n        // 5. Obtener resumen de configuraci√≥n\n        const configSummary = secureConfig.getConfigSummary();\n        console.log(\"\\uD83C\\uDF89 Sistema BMC inicializado correctamente\");\n        return {\n            success: true,\n            configSummary\n        };\n    } catch (error) {\n        console.error(\"‚ùå Error inicializando sistema BMC:\", error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Funci√≥n para verificar estado del sistema\nfunction getSystemStatus() {\n    return {\n        isInitialized: secureConfig.isReady(),\n        configSummary: secureConfig.isReady() ? secureConfig.getConfigSummary() : null,\n        validation: secureConfig.isReady() ? secureConfig.validateAllCredentials() : null\n    };\n}\n// Funci√≥n para reinicializar el sistema\nasync function reinitializeSystem(credentialsPath) {\n    console.log(\"\\uD83D\\uDD04 Reinicializando sistema BMC...\");\n    return await initializeBMCSystem(credentialsPath);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2luaXRpYWxpemUtc3lzdGVtLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF3RDtBQUNKO0FBQ1I7QUFFNUMsa0RBQWtEO0FBQzNDLGVBQWVHLG9CQUFvQkMsZUFBd0I7SUFLaEUsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUM7UUFFWixzQ0FBc0M7UUFDdENELFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1OLHNFQUFzQkEsQ0FBQ0k7UUFFN0IsMEJBQTBCO1FBQzFCQyxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNQyxhQUFhQyxhQUFhQyxzQkFBc0I7UUFFdEQsSUFBSSxDQUFDRixXQUFXRyxPQUFPLEVBQUU7WUFDdkJMLFFBQVFNLElBQUksQ0FBQyw4QkFBOEJKLFdBQVdLLE9BQU87WUFDN0QsT0FBTztnQkFDTEMsU0FBUztnQkFDVEMsT0FBTyxDQUFDLHdCQUF3QixFQUFFUCxXQUFXSyxPQUFPLENBQUNHLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDbkU7UUFDRjtRQUVBLHFDQUFxQztRQUNyQ1YsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSTtZQUNGLE1BQU1VLGVBQWUsSUFBSWYsOERBQWtCQTtZQUMzQyxNQUFNZSxhQUFhQyxRQUFRO1lBQzNCWixRQUFRQyxHQUFHLENBQUM7UUFDZCxFQUFFLE9BQU9RLE9BQU87WUFDZFQsUUFBUU0sSUFBSSxDQUFDLHdDQUF3Q0csTUFBTUksT0FBTztRQUNwRTtRQUVBLGdDQUFnQztRQUNoQ2IsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSTtZQUNGLE1BQU1hLGVBQWUsTUFBTWpCLHNEQUFXQSxDQUFDa0IsZ0JBQWdCLENBQUM7WUFDeERmLFFBQVFDLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT1EsT0FBTztZQUNkVCxRQUFRTSxJQUFJLENBQUMsdUNBQW9DRyxNQUFNSSxPQUFPO1FBQ2hFO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU1HLGdCQUFnQmIsYUFBYWMsZ0JBQWdCO1FBRW5EakIsUUFBUUMsR0FBRyxDQUFDO1FBRVosT0FBTztZQUNMTyxTQUFTO1lBQ1RRO1FBQ0Y7SUFFRixFQUFFLE9BQU9QLE9BQVk7UUFDbkJULFFBQVFTLEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3BELE9BQU87WUFDTEQsU0FBUztZQUNUQyxPQUFPQSxNQUFNSSxPQUFPO1FBQ3RCO0lBQ0Y7QUFDRjtBQUVBLDRDQUE0QztBQUNyQyxTQUFTSztJQUNkLE9BQU87UUFDTEMsZUFBZWhCLGFBQWFpQixPQUFPO1FBQ25DSixlQUFlYixhQUFhaUIsT0FBTyxLQUFLakIsYUFBYWMsZ0JBQWdCLEtBQUs7UUFDMUVmLFlBQVlDLGFBQWFpQixPQUFPLEtBQUtqQixhQUFhQyxzQkFBc0IsS0FBSztJQUMvRTtBQUNGO0FBRUEsd0NBQXdDO0FBQ2pDLGVBQWVpQixtQkFBbUJ0QixlQUF3QjtJQUMvREMsUUFBUUMsR0FBRyxDQUFDO0lBQ1osT0FBTyxNQUFNSCxvQkFBb0JDO0FBQ25DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29udmVyc2F0aW9uYWwtcXVvdGluZy1kYXNoYm9hcmQvLi9zcmMvbGliL2luaXRpYWxpemUtc3lzdGVtLnRzP2EzY2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZVNlY3VyZUNvbmZpZyB9IGZyb20gJy4vc2VjdXJlLWNvbmZpZydcbmltcG9ydCB7IEdvb2dsZVNoZWV0c0NsaWVudCB9IGZyb20gJy4vZ29vZ2xlLXNoZWV0cydcbmltcG9ydCB7IHF1b3RlRW5naW5lIH0gZnJvbSAnLi9xdW90ZS1lbmdpbmUnXG5cbi8vIEluaWNpYWxpemFyIHRvZG8gZWwgc2lzdGVtYSBCTUMgZGUgZm9ybWEgc2VndXJhXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUJNQ1N5c3RlbShjcmVkZW50aWFsc1BhdGg/OiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgc3VjY2VzczogYm9vbGVhblxuICBlcnJvcj86IHN0cmluZ1xuICBjb25maWdTdW1tYXJ5PzogYW55XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfmoAgSW5pY2lhbGl6YW5kbyBTaXN0ZW1hIEJNQyBkZSBDb3RpemFjacOzbi4uLicpXG4gICAgXG4gICAgLy8gMS4gSW5pY2lhbGl6YXIgY29uZmlndXJhY2nDs24gc2VndXJhXG4gICAgY29uc29sZS5sb2coJ/CflJAgQ2FyZ2FuZG8gY3JlZGVuY2lhbGVzLi4uJylcbiAgICBhd2FpdCBpbml0aWFsaXplU2VjdXJlQ29uZmlnKGNyZWRlbnRpYWxzUGF0aClcbiAgICBcbiAgICAvLyAyLiBWYWxpZGFyIGNyZWRlbmNpYWxlc1xuICAgIGNvbnNvbGUubG9nKCfinIUgVmFsaWRhbmRvIGNyZWRlbmNpYWxlcy4uLicpXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHNlY3VyZUNvbmZpZy52YWxpZGF0ZUFsbENyZWRlbnRpYWxzKClcbiAgICBcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gQ3JlZGVuY2lhbGVzIGZhbHRhbnRlczonLCB2YWxpZGF0aW9uLm1pc3NpbmcpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBDcmVkZW5jaWFsZXMgZmFsdGFudGVzOiAke3ZhbGlkYXRpb24ubWlzc2luZy5qb2luKCcsICcpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMy4gUHJvYmFyIGNvbmV4acOzbiBhIEdvb2dsZSBTaGVldHNcbiAgICBjb25zb2xlLmxvZygn8J+TiiBQcm9iYW5kbyBjb25leGnDs24gYSBHb29nbGUgU2hlZXRzLi4uJylcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2hlZXRzQ2xpZW50ID0gbmV3IEdvb2dsZVNoZWV0c0NsaWVudCgpXG4gICAgICBhd2FpdCBzaGVldHNDbGllbnQuZ2V0U3RhdHMoKVxuICAgICAgY29uc29sZS5sb2coJ+KchSBHb29nbGUgU2hlZXRzIGNvbmVjdGFkbyBjb3JyZWN0YW1lbnRlJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRXJyb3IgY29uZWN0YW5kbyBhIEdvb2dsZSBTaGVldHM6JywgZXJyb3IubWVzc2FnZSlcbiAgICB9XG4gICAgXG4gICAgLy8gNC4gUHJvYmFyIG1vdG9yIGRlIGNvdGl6YWNpw7NuXG4gICAgY29uc29sZS5sb2coJ/CfpJYgUHJvYmFuZG8gbW90b3IgZGUgY290aXphY2nDs24uLi4nKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXN0UmVzcG9uc2UgPSBhd2FpdCBxdW90ZUVuZ2luZS5wcm9jZXNhckNvbnN1bHRhKCdUZXN0IGRlIGNvbmV4acOzbicpXG4gICAgICBjb25zb2xlLmxvZygn4pyFIE1vdG9yIGRlIGNvdGl6YWNpw7NuIGZ1bmNpb25hbmRvJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gRXJyb3IgZW4gbW90b3IgZGUgY290aXphY2nDs246JywgZXJyb3IubWVzc2FnZSlcbiAgICB9XG4gICAgXG4gICAgLy8gNS4gT2J0ZW5lciByZXN1bWVuIGRlIGNvbmZpZ3VyYWNpw7NuXG4gICAgY29uc3QgY29uZmlnU3VtbWFyeSA9IHNlY3VyZUNvbmZpZy5nZXRDb25maWdTdW1tYXJ5KClcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+OiSBTaXN0ZW1hIEJNQyBpbmljaWFsaXphZG8gY29ycmVjdGFtZW50ZScpXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb25maWdTdW1tYXJ5XG4gICAgfVxuICAgIFxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGluaWNpYWxpemFuZG8gc2lzdGVtYSBCTUM6JywgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICB9XG4gIH1cbn1cblxuLy8gRnVuY2nDs24gcGFyYSB2ZXJpZmljYXIgZXN0YWRvIGRlbCBzaXN0ZW1hXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3lzdGVtU3RhdHVzKCkge1xuICByZXR1cm4ge1xuICAgIGlzSW5pdGlhbGl6ZWQ6IHNlY3VyZUNvbmZpZy5pc1JlYWR5KCksXG4gICAgY29uZmlnU3VtbWFyeTogc2VjdXJlQ29uZmlnLmlzUmVhZHkoKSA/IHNlY3VyZUNvbmZpZy5nZXRDb25maWdTdW1tYXJ5KCkgOiBudWxsLFxuICAgIHZhbGlkYXRpb246IHNlY3VyZUNvbmZpZy5pc1JlYWR5KCkgPyBzZWN1cmVDb25maWcudmFsaWRhdGVBbGxDcmVkZW50aWFscygpIDogbnVsbFxuICB9XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgcmVpbmljaWFsaXphciBlbCBzaXN0ZW1hXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVpbml0aWFsaXplU3lzdGVtKGNyZWRlbnRpYWxzUGF0aD86IHN0cmluZykge1xuICBjb25zb2xlLmxvZygn8J+UhCBSZWluaWNpYWxpemFuZG8gc2lzdGVtYSBCTUMuLi4nKVxuICByZXR1cm4gYXdhaXQgaW5pdGlhbGl6ZUJNQ1N5c3RlbShjcmVkZW50aWFsc1BhdGgpXG59XG4iXSwibmFtZXMiOlsiaW5pdGlhbGl6ZVNlY3VyZUNvbmZpZyIsIkdvb2dsZVNoZWV0c0NsaWVudCIsInF1b3RlRW5naW5lIiwiaW5pdGlhbGl6ZUJNQ1N5c3RlbSIsImNyZWRlbnRpYWxzUGF0aCIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uIiwic2VjdXJlQ29uZmlnIiwidmFsaWRhdGVBbGxDcmVkZW50aWFscyIsImlzVmFsaWQiLCJ3YXJuIiwibWlzc2luZyIsInN1Y2Nlc3MiLCJlcnJvciIsImpvaW4iLCJzaGVldHNDbGllbnQiLCJnZXRTdGF0cyIsIm1lc3NhZ2UiLCJ0ZXN0UmVzcG9uc2UiLCJwcm9jZXNhckNvbnN1bHRhIiwiY29uZmlnU3VtbWFyeSIsImdldENvbmZpZ1N1bW1hcnkiLCJnZXRTeXN0ZW1TdGF0dXMiLCJpc0luaXRpYWxpemVkIiwiaXNSZWFkeSIsInJlaW5pdGlhbGl6ZVN5c3RlbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/initialize-system.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/integrated-quote-engine.ts":
/*!********************************************!*\
  !*** ./src/lib/integrated-quote-engine.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   motorCotizacionIntegrado: () => (/* binding */ motorCotizacionIntegrado)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _secure_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./secure-config */ \"(rsc)/./src/lib/secure-config.ts\");\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _quote_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./quote-service */ \"(rsc)/./src/lib/quote-service.ts\");\n/* harmony import */ var _quote_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./quote-parser */ \"(rsc)/./src/lib/quote-parser.ts\");\n/* harmony import */ var _knowledge_base__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./knowledge-base */ \"(rsc)/./src/lib/knowledge-base.ts\");\n/**\n * üèóÔ∏è Motor de Cotizaci√≥n Integrado con Base de Conocimiento Evolutiva\n * \n * Este m√≥dulo integra el sistema de cotizaci√≥n BMC con la base de conocimiento\n * din√°mica que aprende y evoluciona basada en interacciones reales.\n */ \n\n\n\n\n\nclass MotorCotizacionIntegrado {\n    constructor(){\n        this.baseConocimiento = new Map();\n        this.patronesVenta = [];\n        this.conocimientoProductos = [];\n        this.interacciones = [];\n        if (!_secure_config__WEBPACK_IMPORTED_MODULE_1__.secureConfig.isReady()) {\n            throw new Error(\"SecureConfig not initialized. Call initializeSecureConfig() first.\");\n        }\n        const config = _secure_config__WEBPACK_IMPORTED_MODULE_1__.secureConfig.getOpenAIConfig();\n        this.openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n            apiKey: config.apiKey\n        });\n        this.quoteService = new _quote_service__WEBPACK_IMPORTED_MODULE_3__.QuoteService();\n        // Inicializar base de conocimiento\n        this.inicializarBaseConocimiento();\n    }\n    /**\n   * üß† Inicializar Base de Conocimiento Din√°mica\n   */ async inicializarBaseConocimiento() {\n        try {\n            await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__.connectDB)();\n            // Cargar patrones de venta existentes\n            await this.cargarPatronesVenta();\n            // Cargar conocimiento de productos\n            await this.cargarConocimientoProductos();\n            // Cargar interacciones hist√≥ricas\n            await this.cargarInteraccionesHistoricas();\n            console.log(\"‚úÖ Base de conocimiento inicializada correctamente\");\n        } catch (error) {\n            console.error(\"‚ùå Error inicializando base de conocimiento:\", error);\n        }\n    }\n    /**\n   * üîÑ Procesar Consulta con IA Integrada\n   */ async procesarConsulta(consulta, userPhone1, userName) {\n        try {\n            // 1. Parsear consulta con IA\n            const parsed = await (0,_quote_parser__WEBPACK_IMPORTED_MODULE_4__.parseQuoteConsulta)(consulta);\n            // 2. Analizar contexto y patrones\n            const contexto = await this.analizarContexto(consulta, userPhone1);\n            // 3. Generar respuesta inteligente\n            const respuesta = await this.generarRespuestaInteligente(consulta, parsed, contexto);\n            // 4. Registrar interacci√≥n para aprendizaje\n            await this.registrarInteraccion({\n                id: this.generarId(),\n                telefono: userPhone1,\n                nombre: userName || \"Cliente\",\n                consulta,\n                respuesta: respuesta.mensaje,\n                cotizacion_generada: respuesta.tipo === \"cotizacion\",\n                conversion: false,\n                timestamp: new Date(),\n                lecciones_aprendidas: []\n            });\n            return respuesta;\n        } catch (error) {\n            console.error(\"Error procesando consulta:\", error);\n            return {\n                tipo: \"informacion\",\n                mensaje: \"Disculpa, hubo un error procesando tu consulta. Por favor, intenta de nuevo.\",\n                confianza: 0,\n                patrones_aplicados: [],\n                conocimiento_utilizado: [],\n                recomendaciones: []\n            };\n        }\n    }\n    /**\n   * üéØ Analizar Contexto y Patrones\n   */ async analizarContexto(consulta, userPhone1) {\n        // Buscar patrones similares en interacciones anteriores\n        const patronesSimilares = this.buscarPatronesSimilares(consulta);\n        // Analizar perfil del cliente\n        const perfilCliente = await this.analizarPerfilCliente(userPhone1);\n        // Identificar tipo de consulta\n        const tipoConsulta = this.identificarTipoConsulta(consulta);\n        return {\n            patronesSimilares,\n            perfilCliente,\n            tipoConsulta,\n            confianza: this.calcularConfianza(patronesSimilares, perfilCliente)\n        };\n    }\n    /**\n   * ü§ñ Generar Respuesta Inteligente\n   */ async generarRespuestaInteligente(consulta, parsed, contexto) {\n        const prompt = `Eres un experto en ventas de productos de construcci√≥n (BMC Uruguay) con acceso a una base de conocimiento que aprende y evoluciona.\n\nCONSULTA DEL CLIENTE: \"${consulta}\"\n\nINFORMACI√ìN PARSEADA:\n${JSON.stringify(parsed, null, 2)}\n\nCONTEXTO Y PATRONES:\n- Patrones similares encontrados: ${contexto.patronesSimilares.length}\n- Perfil del cliente: ${JSON.stringify(contexto.perfilCliente)}\n- Tipo de consulta: ${contexto.tipoConsulta}\n- Confianza: ${contexto.confianza}\n\nBASE DE CONOCIMIENTO DISPONIBLE:\n- Productos: Isodec, Isoroof, Isopanel, Isowall, Chapas, Calamer√≠a\n- Servicios: Instalaci√≥n, Flete, Accesorios\n- Zonas: Montevideo, Canelones, Maldonado, Rivera, etc.\n\nINSTRUCCIONES:\n1. Si es una consulta de cotizaci√≥n, genera una cotizaci√≥n detallada\n2. Si es una pregunta de informaci√≥n, responde con datos precisos\n3. Si es una objeci√≥n, maneja inteligentemente la situaci√≥n\n4. Aplica patrones de venta exitosos del historial\n5. Personaliza la respuesta seg√∫n el perfil del cliente\n6. Incluye recomendaciones basadas en conocimiento acumulado\n\nResponde en formato JSON:\n{\n  \"tipo\": \"cotizacion\" | \"informacion\" | \"objecion\" | \"seguimiento\",\n  \"mensaje\": \"Respuesta personalizada al cliente\",\n  \"cotizacion\": { /* datos de cotizaci√≥n si aplica */ },\n  \"confianza\": 0.95,\n  \"patrones_aplicados\": [\"patron1\", \"patron2\"],\n  \"conocimiento_utilizado\": [\"conocimiento1\", \"conocimiento2\"],\n  \"recomendaciones\": [\"recomendacion1\", \"recomendacion2\"]\n}`;\n        const completion = await this.openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            response_format: {\n                type: \"json_object\"\n            },\n            temperature: 0.3\n        });\n        const respuesta = JSON.parse(completion.choices[0].message.content || \"{}\");\n        // Si es cotizaci√≥n, calcular precios reales\n        if (respuesta.tipo === \"cotizacion\" && parsed.producto) {\n            const cotizacionReal = (0,_knowledge_base__WEBPACK_IMPORTED_MODULE_5__.calculateFullQuote)(parsed, this.detectarZonaPorTelefono(userPhone));\n            respuesta.cotizacion = cotizacionReal;\n        }\n        return respuesta;\n    }\n    /**\n   * üîç Buscar Patrones Similares\n   */ buscarPatronesSimilares(consulta) {\n        return this.patronesVenta.filter((patron)=>this.calcularSimilitud(consulta, patron.patron) > 0.7);\n    }\n    /**\n   * üë§ Analizar Perfil del Cliente\n   */ async analizarPerfilCliente(userPhone1) {\n        // Buscar interacciones anteriores del cliente\n        const interaccionesCliente = this.interacciones.filter((i)=>i.telefono === userPhone1);\n        if (interaccionesCliente.length === 0) {\n            return {\n                tipo: \"nuevo_cliente\",\n                confianza: 0.5\n            };\n        }\n        // Analizar patrones del cliente\n        const productosConsultados = interaccionesCliente.filter((i)=>i.cotizacion_generada).map((i)=>this.extraerProductosDeConsulta(i.consulta)).flat();\n        const serviciosPreferidos = interaccionesCliente.filter((i)=>i.cotizacion_generada).map((i)=>this.extraerServiciosDeConsulta(i.consulta)).flat();\n        const tasaConversion = interaccionesCliente.filter((i)=>i.conversion).length / interaccionesCliente.length;\n        return {\n            tipo: \"cliente_recurrente\",\n            total_interacciones: interaccionesCliente.length,\n            productos_preferidos: this.contarFrecuencias(productosConsultados),\n            servicios_preferidos: this.contarFrecuencias(serviciosPreferidos),\n            tasa_conversion: tasaConversion,\n            ultima_interaccion: Math.max(...interaccionesCliente.map((i)=>i.timestamp.getTime())),\n            confianza: Math.min(0.9, 0.5 + interaccionesCliente.length * 0.1)\n        };\n    }\n    /**\n   * üéØ Identificar Tipo de Consulta\n   */ identificarTipoConsulta(consulta) {\n        const consultaLower = consulta.toLowerCase();\n        if (consultaLower.includes(\"precio\") || consultaLower.includes(\"cuesta\") || consultaLower.includes(\"cotizar\")) {\n            return \"cotizacion\";\n        }\n        if (consultaLower.includes(\"que es\") || consultaLower.includes(\"como funciona\") || consultaLower.includes(\"caracteristicas\")) {\n            return \"informacion\";\n        }\n        if (consultaLower.includes(\"muy caro\") || consultaLower.includes(\"no me convence\") || consultaLower.includes(\"problema\")) {\n            return \"objeccion\";\n        }\n        return \"seguimiento\";\n    }\n    /**\n   * üìä Calcular Confianza\n   */ calcularConfianza(patrones, perfil) {\n        let confianza = 0.5 // Base\n        ;\n        // Aumentar confianza con patrones similares\n        if (patrones.length > 0) {\n            confianza += 0.2;\n        }\n        // Aumentar confianza con perfil del cliente\n        if (perfil.tipo === \"cliente_recurrente\") {\n            confianza += 0.3;\n        }\n        return Math.min(1.0, confianza);\n    }\n    /**\n   * üìù Registrar Interacci√≥n para Aprendizaje\n   */ async registrarInteraccion(interaccion) {\n        this.interacciones.push(interaccion);\n        // Guardar en base de datos\n        try {\n            await this.quoteService.createQuote({\n                arg: `INT-${Date.now()}`,\n                estado: \"Procesado\",\n                fecha: interaccion.timestamp.toISOString().split(\"T\")[0],\n                cliente: interaccion.nombre,\n                origen: \"IA_Integrada\",\n                telefono: interaccion.telefono,\n                direccion: \"Sistema IA\",\n                consulta: interaccion.consulta,\n                parsedData: {}\n            });\n        } catch (error) {\n            console.error(\"Error guardando interacci\\xf3n:\", error);\n        }\n    }\n    /**\n   * üß† Actualizar Base de Conocimiento\n   */ async actualizarBaseConocimiento() {\n        try {\n            // Analizar nuevas interacciones\n            await this.analizarNuevasInteracciones();\n            // Actualizar patrones de venta\n            await this.actualizarPatronesVenta();\n            // Actualizar conocimiento de productos\n            await this.actualizarConocimientoProductos();\n            console.log(\"‚úÖ Base de conocimiento actualizada\");\n        } catch (error) {\n            console.error(\"‚ùå Error actualizando base de conocimiento:\", error);\n        }\n    }\n    /**\n   * üìà Obtener M√©tricas del Sistema\n   */ async obtenerMetricas() {\n        const totalInteracciones = this.interacciones.length;\n        const cotizacionesGeneradas = this.interacciones.filter((i)=>i.cotizacion_generada).length;\n        const conversiones = this.interacciones.filter((i)=>i.conversion).length;\n        const tasaConversion = conversiones / cotizacionesGeneradas || 0;\n        return {\n            total_interacciones: totalInteracciones,\n            cotizaciones_generadas: cotizacionesGeneradas,\n            conversiones: conversiones,\n            tasa_conversion: tasaConversion,\n            patrones_identificados: this.patronesVenta.length,\n            productos_conocidos: this.conocimientoProductos.length,\n            confianza_promedio: this.calcularConfianzaPromedio()\n        };\n    }\n    // M√©todos auxiliares\n    generarId() {\n        return `int_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    calcularSimilitud(texto1, texto2) {\n        // Implementaci√≥n simple de similitud (en producci√≥n usar embedding)\n        const palabras1 = texto1.toLowerCase().split(\" \");\n        const palabras2 = texto2.toLowerCase().split(\" \");\n        const interseccion = palabras1.filter((p)=>palabras2.includes(p));\n        return interseccion.length / Math.max(palabras1.length, palabras2.length);\n    }\n    extraerProductosDeConsulta(consulta) {\n        const productos = Object.keys(_knowledge_base__WEBPACK_IMPORTED_MODULE_5__.PRODUCTOS);\n        return productos.filter((producto)=>consulta.toLowerCase().includes(producto.toLowerCase()));\n    }\n    extraerServiciosDeConsulta(consulta) {\n        const servicios = Object.keys(_knowledge_base__WEBPACK_IMPORTED_MODULE_5__.SERVICIOS_ADICIONALES);\n        return servicios.filter((servicio)=>consulta.toLowerCase().includes(servicio.toLowerCase()));\n    }\n    contarFrecuencias(items) {\n        return items.reduce((acc, item)=>{\n            acc[item] = (acc[item] || 0) + 1;\n            return acc;\n        }, {});\n    }\n    detectarZonaPorTelefono(telefono) {\n        const codigos = {\n            \"2\": \"montevideo\",\n            \"4\": \"canelones\",\n            \"5\": \"fray_bentos\",\n            \"6\": \"colonia\"\n        };\n        const codigoArea = telefono.slice(0, 1);\n        return codigos[codigoArea] || \"montevideo\";\n    }\n    calcularConfianzaPromedio() {\n        if (this.interacciones.length === 0) return 0;\n        return this.interacciones.reduce((sum, i)=>sum + (i.satisfaccion || 0.5), 0) / this.interacciones.length;\n    }\n    // M√©todos de carga de datos (implementar seg√∫n necesidades)\n    async cargarPatronesVenta() {\n    // Implementar carga de patrones desde MongoDB\n    }\n    async cargarConocimientoProductos() {\n    // Implementar carga de conocimiento desde MongoDB\n    }\n    async cargarInteraccionesHistoricas() {\n    // Implementar carga de interacciones desde MongoDB\n    }\n    async analizarNuevasInteracciones() {\n    // Implementar an√°lisis de nuevas interacciones\n    }\n    async actualizarPatronesVenta() {\n    // Implementar actualizaci√≥n de patrones\n    }\n    async actualizarConocimientoProductos() {\n    // Implementar actualizaci√≥n de conocimiento\n    }\n}\n// Exportar instancia singleton\nconst motorCotizacionIntegrado = new MotorCotizacionIntegrado();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ludGVncmF0ZWQtcXVvdGUtZW5naW5lLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUU4QjtBQUNlO0FBQ1Q7QUFDUztBQUNrQjtBQUNvQztBQWlEcEcsTUFBTVE7SUFRSkMsYUFBYzthQUxOQyxtQkFBcUMsSUFBSUM7YUFDekNDLGdCQUErQixFQUFFO2FBQ2pDQyx3QkFBZ0QsRUFBRTthQUNsREMsZ0JBQXNDLEVBQUU7UUFHOUMsSUFBSSxDQUFDYix3REFBWUEsQ0FBQ2MsT0FBTyxJQUFJO1lBQzNCLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtRQUVBLE1BQU1DLFNBQVNoQix3REFBWUEsQ0FBQ2lCLGVBQWU7UUFDM0MsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSW5CLDBDQUFNQSxDQUFDO1lBQUVvQixRQUFRSCxPQUFPRyxNQUFNO1FBQUM7UUFDakQsSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSWxCLHdEQUFZQTtRQUVwQyxtQ0FBbUM7UUFDbkMsSUFBSSxDQUFDbUIsMkJBQTJCO0lBQ2xDO0lBRUE7O0dBRUMsR0FDRCxNQUFjQSw4QkFBOEI7UUFDMUMsSUFBSTtZQUNGLE1BQU1wQixtREFBU0E7WUFFZixzQ0FBc0M7WUFDdEMsTUFBTSxJQUFJLENBQUNxQixtQkFBbUI7WUFFOUIsbUNBQW1DO1lBQ25DLE1BQU0sSUFBSSxDQUFDQywyQkFBMkI7WUFFdEMsa0NBQWtDO1lBQ2xDLE1BQU0sSUFBSSxDQUFDQyw2QkFBNkI7WUFFeENDLFFBQVFDLEdBQUcsQ0FBQztRQUNkLEVBQUUsT0FBT0MsT0FBTztZQUNkRixRQUFRRSxLQUFLLENBQUMsK0NBQStDQTtRQUMvRDtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNQyxpQkFBaUJDLFFBQWdCLEVBQUVDLFVBQWlCLEVBQUVDLFFBQWlCLEVBQWlDO1FBQzVHLElBQUk7WUFDRiw2QkFBNkI7WUFDN0IsTUFBTUMsU0FBUyxNQUFNN0IsaUVBQWtCQSxDQUFDMEI7WUFF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QUFNLENBQUMsQ0FBQ0MsS0FBS0M7WUFDeEJELEdBQUcsQ0FBQ0MsS0FBSyxHQUFHLENBQUNELEdBQUcsQ0FBQ0MsS0FBSyxJQUFJLEtBQUs7WUFDL0IsT0FBT0Q7UUFDVCxHQUFHLENBQUM7SUFDTjtJQUVRdkUsd0JBQXdCeEMsUUFBZ0IsRUFBVTtRQUN4RCxNQUFNaUgsVUFBcUM7WUFDekMsS0FBSztZQUNMLEtBQUs7WUFDTCxLQUFLO1lBQ0wsS0FBSztRQUNQO1FBQ0EsTUFBTUMsYUFBYWxILFNBQVNtSCxLQUFLLENBQUMsR0FBRztRQUNyQyxPQUFPRixPQUFPLENBQUNDLFdBQVcsSUFBSTtJQUNoQztJQUVRcEIsNEJBQW9DO1FBQzFDLElBQUksSUFBSSxDQUFDekgsYUFBYSxDQUFDa0QsTUFBTSxLQUFLLEdBQUcsT0FBTztRQUM1QyxPQUFPLElBQUksQ0FBQ2xELGFBQWEsQ0FBQ3lJLE1BQU0sQ0FBQyxDQUFDTSxLQUFLdEUsSUFBTXNFLE1BQU90RSxDQUFBQSxFQUFFdUUsWUFBWSxJQUFJLEdBQUUsR0FBSSxLQUFLLElBQUksQ0FBQ2hKLGFBQWEsQ0FBQ2tELE1BQU07SUFDNUc7SUFFQSw0REFBNEQ7SUFDNUQsTUFBY3pDLHNCQUFzQjtJQUNsQyw4Q0FBOEM7SUFDaEQ7SUFFQSxNQUFjQyw4QkFBOEI7SUFDMUMsa0RBQWtEO0lBQ3BEO0lBRUEsTUFBY0MsZ0NBQWdDO0lBQzVDLG1EQUFtRDtJQUNyRDtJQUVBLE1BQWNtRyw4QkFBOEI7SUFDMUMsK0NBQStDO0lBQ2pEO0lBRUEsTUFBY0MsMEJBQTBCO0lBQ3RDLHdDQUF3QztJQUMxQztJQUVBLE1BQWNDLGtDQUFrQztJQUM5Qyw0Q0FBNEM7SUFDOUM7QUFDRjtBQUVBLCtCQUErQjtBQUN4QixNQUFNaUMsMkJBQTJCLElBQUl2SiwyQkFBMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9saWIvaW50ZWdyYXRlZC1xdW90ZS1lbmdpbmUudHM/ZmMwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIPCfj5fvuI8gTW90b3IgZGUgQ290aXphY2nDs24gSW50ZWdyYWRvIGNvbiBCYXNlIGRlIENvbm9jaW1pZW50byBFdm9sdXRpdmFcbiAqIFxuICogRXN0ZSBtw7NkdWxvIGludGVncmEgZWwgc2lzdGVtYSBkZSBjb3RpemFjacOzbiBCTUMgY29uIGxhIGJhc2UgZGUgY29ub2NpbWllbnRvXG4gKiBkaW7DoW1pY2EgcXVlIGFwcmVuZGUgeSBldm9sdWNpb25hIGJhc2FkYSBlbiBpbnRlcmFjY2lvbmVzIHJlYWxlcy5cbiAqL1xuXG5pbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyBzZWN1cmVDb25maWcgfSBmcm9tICcuL3NlY3VyZS1jb25maWcnXG5pbXBvcnQgeyBjb25uZWN0REIgfSBmcm9tICcuL21vbmdvZGInXG5pbXBvcnQgeyBRdW90ZVNlcnZpY2UgfSBmcm9tICcuL3F1b3RlLXNlcnZpY2UnXG5pbXBvcnQgeyBwYXJzZVF1b3RlQ29uc3VsdGEsIFBhcnNlZFF1b3RlIH0gZnJvbSAnLi9xdW90ZS1wYXJzZXInXG5pbXBvcnQgeyBQUk9EVUNUT1MsIFNFUlZJQ0lPU19BRElDSU9OQUxFUywgWk9OQVNfRkxFVEUsIGNhbGN1bGF0ZUZ1bGxRdW90ZSB9IGZyb20gJy4va25vd2xlZGdlLWJhc2UnXG5cbi8vIEludGVyZmFjZXMgcGFyYSBlbCBzaXN0ZW1hIGludGVncmFkb1xuZXhwb3J0IGludGVyZmFjZSBJbnRlcmFjY2lvbkNsaWVudGUge1xuICBpZDogc3RyaW5nXG4gIHRlbGVmb25vOiBzdHJpbmdcbiAgbm9tYnJlOiBzdHJpbmdcbiAgY29uc3VsdGE6IHN0cmluZ1xuICByZXNwdWVzdGE6IHN0cmluZ1xuICBjb3RpemFjaW9uX2dlbmVyYWRhOiBib29sZWFuXG4gIGNvbnZlcnNpb246IGJvb2xlYW5cbiAgdGltZXN0YW1wOiBEYXRlXG4gIHNhdGlzZmFjY2lvbj86IG51bWJlclxuICBsZWNjaW9uZXNfYXByZW5kaWRhczogc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXRyb25WZW50YSB7XG4gIGlkOiBzdHJpbmdcbiAgcGF0cm9uOiBzdHJpbmdcbiAgZnJlY3VlbmNpYTogbnVtYmVyXG4gIHRhc2FfY29udmVyc2lvbjogbnVtYmVyXG4gIHByb2R1Y3Rvc19hc29jaWFkb3M6IHN0cmluZ1tdXG4gIHNlcnZpY2lvc19wb3B1bGFyZXM6IHN0cmluZ1tdXG4gIHpvbmFfZ2VvZ3JhZmljYTogc3RyaW5nXG4gIHBlcmZpbF9jbGllbnRlOiBzdHJpbmdcbiAgdGltZXN0YW1wOiBEYXRlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29ub2NpbWllbnRvUHJvZHVjdG8ge1xuICBwcm9kdWN0bzogc3RyaW5nXG4gIGNvbnN1bHRhc19mcmVjdWVudGVzOiBzdHJpbmdbXVxuICBvYmplY2lvbmVzX2NvbXVuZXM6IHN0cmluZ1tdXG4gIHJlc3B1ZXN0YXNfZWZlY3RpdmFzOiBzdHJpbmdbXVxuICBwcmVjaW9fb3B0aW1vOiBudW1iZXJcbiAgc2VydmljaW9zX2NvbXBsZW1lbnRhcmlvczogc3RyaW5nW11cbiAgdGFzYV9jb252ZXJzaW9uOiBudW1iZXJcbiAgdWx0aW1hX2FjdHVhbGl6YWNpb246IERhdGVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNwdWVzdGFJbnRlbGlnZW50ZSB7XG4gIHRpcG86ICdjb3RpemFjaW9uJyB8ICdpbmZvcm1hY2lvbicgfCAnb2JqZWNjaW9uJyB8ICdzZWd1aW1pZW50bydcbiAgbWVuc2FqZTogc3RyaW5nXG4gIGNvdGl6YWNpb24/OiBhbnlcbiAgY29uZmlhbnphOiBudW1iZXJcbiAgcGF0cm9uZXNfYXBsaWNhZG9zOiBzdHJpbmdbXVxuICBjb25vY2ltaWVudG9fdXRpbGl6YWRvOiBzdHJpbmdbXVxuICByZWNvbWVuZGFjaW9uZXM6IHN0cmluZ1tdXG59XG5cbmNsYXNzIE1vdG9yQ290aXphY2lvbkludGVncmFkbyB7XG4gIHByaXZhdGUgb3BlbmFpOiBPcGVuQUlcbiAgcHJpdmF0ZSBxdW90ZVNlcnZpY2U6IFF1b3RlU2VydmljZVxuICBwcml2YXRlIGJhc2VDb25vY2ltaWVudG86IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBwYXRyb25lc1ZlbnRhOiBQYXRyb25WZW50YVtdID0gW11cbiAgcHJpdmF0ZSBjb25vY2ltaWVudG9Qcm9kdWN0b3M6IENvbm9jaW1pZW50b1Byb2R1Y3RvW10gPSBbXVxuICBwcml2YXRlIGludGVyYWNjaW9uZXM6IEludGVyYWNjaW9uQ2xpZW50ZVtdID0gW11cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAoIXNlY3VyZUNvbmZpZy5pc1JlYWR5KCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJlQ29uZmlnIG5vdCBpbml0aWFsaXplZC4gQ2FsbCBpbml0aWFsaXplU2VjdXJlQ29uZmlnKCkgZmlyc3QuJylcbiAgICB9XG5cbiAgICBjb25zdCBjb25maWcgPSBzZWN1cmVDb25maWcuZ2V0T3BlbkFJQ29uZmlnKClcbiAgICB0aGlzLm9wZW5haSA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IGNvbmZpZy5hcGlLZXkgfSlcbiAgICB0aGlzLnF1b3RlU2VydmljZSA9IG5ldyBRdW90ZVNlcnZpY2UoKVxuICAgIFxuICAgIC8vIEluaWNpYWxpemFyIGJhc2UgZGUgY29ub2NpbWllbnRvXG4gICAgdGhpcy5pbmljaWFsaXphckJhc2VDb25vY2ltaWVudG8oKVxuICB9XG5cbiAgLyoqXG4gICAqIPCfp6AgSW5pY2lhbGl6YXIgQmFzZSBkZSBDb25vY2ltaWVudG8gRGluw6FtaWNhXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGluaWNpYWxpemFyQmFzZUNvbm9jaW1pZW50bygpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29ubmVjdERCKClcbiAgICAgIFxuICAgICAgLy8gQ2FyZ2FyIHBhdHJvbmVzIGRlIHZlbnRhIGV4aXN0ZW50ZXNcbiAgICAgIGF3YWl0IHRoaXMuY2FyZ2FyUGF0cm9uZXNWZW50YSgpXG4gICAgICBcbiAgICAgIC8vIENhcmdhciBjb25vY2ltaWVudG8gZGUgcHJvZHVjdG9zXG4gICAgICBhd2FpdCB0aGlzLmNhcmdhckNvbm9jaW1pZW50b1Byb2R1Y3RvcygpXG4gICAgICBcbiAgICAgIC8vIENhcmdhciBpbnRlcmFjY2lvbmVzIGhpc3TDs3JpY2FzXG4gICAgICBhd2FpdCB0aGlzLmNhcmdhckludGVyYWNjaW9uZXNIaXN0b3JpY2FzKClcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ+KchSBCYXNlIGRlIGNvbm9jaW1pZW50byBpbmljaWFsaXphZGEgY29ycmVjdGFtZW50ZScpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbmljaWFsaXphbmRvIGJhc2UgZGUgY29ub2NpbWllbnRvOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDwn5SEIFByb2Nlc2FyIENvbnN1bHRhIGNvbiBJQSBJbnRlZ3JhZGFcbiAgICovXG4gIGFzeW5jIHByb2Nlc2FyQ29uc3VsdGEoY29uc3VsdGE6IHN0cmluZywgdXNlclBob25lOiBzdHJpbmcsIHVzZXJOYW1lPzogc3RyaW5nKTogUHJvbWlzZTxSZXNwdWVzdGFJbnRlbGlnZW50ZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBQYXJzZWFyIGNvbnN1bHRhIGNvbiBJQVxuICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VRdW90ZUNvbnN1bHRhKGNvbnN1bHRhKVxuICAgICAgXG4gICAgICAvLyAyLiBBbmFsaXphciBjb250ZXh0byB5IHBhdHJvbmVzXG4gICAgICBjb25zdCBjb250ZXh0byA9IGF3YWl0IHRoaXMuYW5hbGl6YXJDb250ZXh0byhjb25zdWx0YSwgdXNlclBob25lKVxuICAgICAgXG4gICAgICAvLyAzLiBHZW5lcmFyIHJlc3B1ZXN0YSBpbnRlbGlnZW50ZVxuICAgICAgY29uc3QgcmVzcHVlc3RhID0gYXdhaXQgdGhpcy5nZW5lcmFyUmVzcHVlc3RhSW50ZWxpZ2VudGUoY29uc3VsdGEsIHBhcnNlZCwgY29udGV4dG8pXG4gICAgICBcbiAgICAgIC8vIDQuIFJlZ2lzdHJhciBpbnRlcmFjY2nDs24gcGFyYSBhcHJlbmRpemFqZVxuICAgICAgYXdhaXQgdGhpcy5yZWdpc3RyYXJJbnRlcmFjY2lvbih7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXJJZCgpLFxuICAgICAgICB0ZWxlZm9ubzogdXNlclBob25lLFxuICAgICAgICBub21icmU6IHVzZXJOYW1lIHx8ICdDbGllbnRlJyxcbiAgICAgICAgY29uc3VsdGEsXG4gICAgICAgIHJlc3B1ZXN0YTogcmVzcHVlc3RhLm1lbnNhamUsXG4gICAgICAgIGNvdGl6YWNpb25fZ2VuZXJhZGE6IHJlc3B1ZXN0YS50aXBvID09PSAnY290aXphY2lvbicsXG4gICAgICAgIGNvbnZlcnNpb246IGZhbHNlLCAvLyBTZSBhY3R1YWxpemFyw6EgZGVzcHXDqXNcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBsZWNjaW9uZXNfYXByZW5kaWRhczogW11cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHJldHVybiByZXNwdWVzdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2VzYW5kbyBjb25zdWx0YTonLCBlcnJvcilcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpcG86ICdpbmZvcm1hY2lvbicsXG4gICAgICAgIG1lbnNhamU6ICdEaXNjdWxwYSwgaHVibyB1biBlcnJvciBwcm9jZXNhbmRvIHR1IGNvbnN1bHRhLiBQb3IgZmF2b3IsIGludGVudGEgZGUgbnVldm8uJyxcbiAgICAgICAgY29uZmlhbnphOiAwLFxuICAgICAgICBwYXRyb25lc19hcGxpY2Fkb3M6IFtdLFxuICAgICAgICBjb25vY2ltaWVudG9fdXRpbGl6YWRvOiBbXSxcbiAgICAgICAgcmVjb21lbmRhY2lvbmVzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDwn46vIEFuYWxpemFyIENvbnRleHRvIHkgUGF0cm9uZXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYW5hbGl6YXJDb250ZXh0byhjb25zdWx0YTogc3RyaW5nLCB1c2VyUGhvbmU6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gQnVzY2FyIHBhdHJvbmVzIHNpbWlsYXJlcyBlbiBpbnRlcmFjY2lvbmVzIGFudGVyaW9yZXNcbiAgICBjb25zdCBwYXRyb25lc1NpbWlsYXJlcyA9IHRoaXMuYnVzY2FyUGF0cm9uZXNTaW1pbGFyZXMoY29uc3VsdGEpXG4gICAgXG4gICAgLy8gQW5hbGl6YXIgcGVyZmlsIGRlbCBjbGllbnRlXG4gICAgY29uc3QgcGVyZmlsQ2xpZW50ZSA9IGF3YWl0IHRoaXMuYW5hbGl6YXJQZXJmaWxDbGllbnRlKHVzZXJQaG9uZSlcbiAgICBcbiAgICAvLyBJZGVudGlmaWNhciB0aXBvIGRlIGNvbnN1bHRhXG4gICAgY29uc3QgdGlwb0NvbnN1bHRhID0gdGhpcy5pZGVudGlmaWNhclRpcG9Db25zdWx0YShjb25zdWx0YSlcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgcGF0cm9uZXNTaW1pbGFyZXMsXG4gICAgICBwZXJmaWxDbGllbnRlLFxuICAgICAgdGlwb0NvbnN1bHRhLFxuICAgICAgY29uZmlhbnphOiB0aGlzLmNhbGN1bGFyQ29uZmlhbnphKHBhdHJvbmVzU2ltaWxhcmVzLCBwZXJmaWxDbGllbnRlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDwn6SWIEdlbmVyYXIgUmVzcHVlc3RhIEludGVsaWdlbnRlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdlbmVyYXJSZXNwdWVzdGFJbnRlbGlnZW50ZShcbiAgICBjb25zdWx0YTogc3RyaW5nLCBcbiAgICBwYXJzZWQ6IFBhcnNlZFF1b3RlLCBcbiAgICBjb250ZXh0bzogYW55XG4gICk6IFByb21pc2U8UmVzcHVlc3RhSW50ZWxpZ2VudGU+IHtcbiAgICBcbiAgICBjb25zdCBwcm9tcHQgPSBgRXJlcyB1biBleHBlcnRvIGVuIHZlbnRhcyBkZSBwcm9kdWN0b3MgZGUgY29uc3RydWNjacOzbiAoQk1DIFVydWd1YXkpIGNvbiBhY2Nlc28gYSB1bmEgYmFzZSBkZSBjb25vY2ltaWVudG8gcXVlIGFwcmVuZGUgeSBldm9sdWNpb25hLlxuXG5DT05TVUxUQSBERUwgQ0xJRU5URTogXCIke2NvbnN1bHRhfVwiXG5cbklORk9STUFDScOTTiBQQVJTRUFEQTpcbiR7SlNPTi5zdHJpbmdpZnkocGFyc2VkLCBudWxsLCAyKX1cblxuQ09OVEVYVE8gWSBQQVRST05FUzpcbi0gUGF0cm9uZXMgc2ltaWxhcmVzIGVuY29udHJhZG9zOiAke2NvbnRleHRvLnBhdHJvbmVzU2ltaWxhcmVzLmxlbmd0aH1cbi0gUGVyZmlsIGRlbCBjbGllbnRlOiAke0pTT04uc3RyaW5naWZ5KGNvbnRleHRvLnBlcmZpbENsaWVudGUpfVxuLSBUaXBvIGRlIGNvbnN1bHRhOiAke2NvbnRleHRvLnRpcG9Db25zdWx0YX1cbi0gQ29uZmlhbnphOiAke2NvbnRleHRvLmNvbmZpYW56YX1cblxuQkFTRSBERSBDT05PQ0lNSUVOVE8gRElTUE9OSUJMRTpcbi0gUHJvZHVjdG9zOiBJc29kZWMsIElzb3Jvb2YsIElzb3BhbmVsLCBJc293YWxsLCBDaGFwYXMsIENhbGFtZXLDrWFcbi0gU2VydmljaW9zOiBJbnN0YWxhY2nDs24sIEZsZXRlLCBBY2Nlc29yaW9zXG4tIFpvbmFzOiBNb250ZXZpZGVvLCBDYW5lbG9uZXMsIE1hbGRvbmFkbywgUml2ZXJhLCBldGMuXG5cbklOU1RSVUNDSU9ORVM6XG4xLiBTaSBlcyB1bmEgY29uc3VsdGEgZGUgY290aXphY2nDs24sIGdlbmVyYSB1bmEgY290aXphY2nDs24gZGV0YWxsYWRhXG4yLiBTaSBlcyB1bmEgcHJlZ3VudGEgZGUgaW5mb3JtYWNpw7NuLCByZXNwb25kZSBjb24gZGF0b3MgcHJlY2lzb3NcbjMuIFNpIGVzIHVuYSBvYmplY2nDs24sIG1hbmVqYSBpbnRlbGlnZW50ZW1lbnRlIGxhIHNpdHVhY2nDs25cbjQuIEFwbGljYSBwYXRyb25lcyBkZSB2ZW50YSBleGl0b3NvcyBkZWwgaGlzdG9yaWFsXG41LiBQZXJzb25hbGl6YSBsYSByZXNwdWVzdGEgc2Vnw7puIGVsIHBlcmZpbCBkZWwgY2xpZW50ZVxuNi4gSW5jbHV5ZSByZWNvbWVuZGFjaW9uZXMgYmFzYWRhcyBlbiBjb25vY2ltaWVudG8gYWN1bXVsYWRvXG5cblJlc3BvbmRlIGVuIGZvcm1hdG8gSlNPTjpcbntcbiAgXCJ0aXBvXCI6IFwiY290aXphY2lvblwiIHwgXCJpbmZvcm1hY2lvblwiIHwgXCJvYmplY2lvblwiIHwgXCJzZWd1aW1pZW50b1wiLFxuICBcIm1lbnNhamVcIjogXCJSZXNwdWVzdGEgcGVyc29uYWxpemFkYSBhbCBjbGllbnRlXCIsXG4gIFwiY290aXphY2lvblwiOiB7IC8qIGRhdG9zIGRlIGNvdGl6YWNpw7NuIHNpIGFwbGljYSAqLyB9LFxuICBcImNvbmZpYW56YVwiOiAwLjk1LFxuICBcInBhdHJvbmVzX2FwbGljYWRvc1wiOiBbXCJwYXRyb24xXCIsIFwicGF0cm9uMlwiXSxcbiAgXCJjb25vY2ltaWVudG9fdXRpbGl6YWRvXCI6IFtcImNvbm9jaW1pZW50bzFcIiwgXCJjb25vY2ltaWVudG8yXCJdLFxuICBcInJlY29tZW5kYWNpb25lc1wiOiBbXCJyZWNvbWVuZGFjaW9uMVwiLCBcInJlY29tZW5kYWNpb24yXCJdXG59YFxuXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IHRoaXMub3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTQnLFxuICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgfSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjNcbiAgICB9KVxuXG4gICAgY29uc3QgcmVzcHVlc3RhID0gSlNPTi5wYXJzZShjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50IHx8ICd7fScpXG4gICAgXG4gICAgLy8gU2kgZXMgY290aXphY2nDs24sIGNhbGN1bGFyIHByZWNpb3MgcmVhbGVzXG4gICAgaWYgKHJlc3B1ZXN0YS50aXBvID09PSAnY290aXphY2lvbicgJiYgcGFyc2VkLnByb2R1Y3RvKSB7XG4gICAgICBjb25zdCBjb3RpemFjaW9uUmVhbCA9IGNhbGN1bGF0ZUZ1bGxRdW90ZShwYXJzZWQsIHRoaXMuZGV0ZWN0YXJab25hUG9yVGVsZWZvbm8odXNlclBob25lKSlcbiAgICAgIHJlc3B1ZXN0YS5jb3RpemFjaW9uID0gY290aXphY2lvblJlYWxcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcHVlc3RhXG4gIH1cblxuICAvKipcbiAgICog8J+UjSBCdXNjYXIgUGF0cm9uZXMgU2ltaWxhcmVzXG4gICAqL1xuICBwcml2YXRlIGJ1c2NhclBhdHJvbmVzU2ltaWxhcmVzKGNvbnN1bHRhOiBzdHJpbmcpOiBQYXRyb25WZW50YVtdIHtcbiAgICByZXR1cm4gdGhpcy5wYXRyb25lc1ZlbnRhLmZpbHRlcihwYXRyb24gPT4gXG4gICAgICB0aGlzLmNhbGN1bGFyU2ltaWxpdHVkKGNvbnN1bHRhLCBwYXRyb24ucGF0cm9uKSA+IDAuN1xuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiDwn5GkIEFuYWxpemFyIFBlcmZpbCBkZWwgQ2xpZW50ZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBhbmFsaXphclBlcmZpbENsaWVudGUodXNlclBob25lOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIEJ1c2NhciBpbnRlcmFjY2lvbmVzIGFudGVyaW9yZXMgZGVsIGNsaWVudGVcbiAgICBjb25zdCBpbnRlcmFjY2lvbmVzQ2xpZW50ZSA9IHRoaXMuaW50ZXJhY2Npb25lcy5maWx0ZXIoaSA9PiBpLnRlbGVmb25vID09PSB1c2VyUGhvbmUpXG4gICAgXG4gICAgaWYgKGludGVyYWNjaW9uZXNDbGllbnRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgdGlwbzogJ251ZXZvX2NsaWVudGUnLCBjb25maWFuemE6IDAuNSB9XG4gICAgfVxuXG4gICAgLy8gQW5hbGl6YXIgcGF0cm9uZXMgZGVsIGNsaWVudGVcbiAgICBjb25zdCBwcm9kdWN0b3NDb25zdWx0YWRvcyA9IGludGVyYWNjaW9uZXNDbGllbnRlXG4gICAgICAuZmlsdGVyKGkgPT4gaS5jb3RpemFjaW9uX2dlbmVyYWRhKVxuICAgICAgLm1hcChpID0+IHRoaXMuZXh0cmFlclByb2R1Y3Rvc0RlQ29uc3VsdGEoaS5jb25zdWx0YSkpXG4gICAgICAuZmxhdCgpXG5cbiAgICBjb25zdCBzZXJ2aWNpb3NQcmVmZXJpZG9zID0gaW50ZXJhY2Npb25lc0NsaWVudGVcbiAgICAgIC5maWx0ZXIoaSA9PiBpLmNvdGl6YWNpb25fZ2VuZXJhZGEpXG4gICAgICAubWFwKGkgPT4gdGhpcy5leHRyYWVyU2VydmljaW9zRGVDb25zdWx0YShpLmNvbnN1bHRhKSlcbiAgICAgIC5mbGF0KClcblxuICAgIGNvbnN0IHRhc2FDb252ZXJzaW9uID0gaW50ZXJhY2Npb25lc0NsaWVudGUuZmlsdGVyKGkgPT4gaS5jb252ZXJzaW9uKS5sZW5ndGggLyBpbnRlcmFjY2lvbmVzQ2xpZW50ZS5sZW5ndGhcblxuICAgIHJldHVybiB7XG4gICAgICB0aXBvOiAnY2xpZW50ZV9yZWN1cnJlbnRlJyxcbiAgICAgIHRvdGFsX2ludGVyYWNjaW9uZXM6IGludGVyYWNjaW9uZXNDbGllbnRlLmxlbmd0aCxcbiAgICAgIHByb2R1Y3Rvc19wcmVmZXJpZG9zOiB0aGlzLmNvbnRhckZyZWN1ZW5jaWFzKHByb2R1Y3Rvc0NvbnN1bHRhZG9zKSxcbiAgICAgIHNlcnZpY2lvc19wcmVmZXJpZG9zOiB0aGlzLmNvbnRhckZyZWN1ZW5jaWFzKHNlcnZpY2lvc1ByZWZlcmlkb3MpLFxuICAgICAgdGFzYV9jb252ZXJzaW9uOiB0YXNhQ29udmVyc2lvbixcbiAgICAgIHVsdGltYV9pbnRlcmFjY2lvbjogTWF0aC5tYXgoLi4uaW50ZXJhY2Npb25lc0NsaWVudGUubWFwKGkgPT4gaS50aW1lc3RhbXAuZ2V0VGltZSgpKSksXG4gICAgICBjb25maWFuemE6IE1hdGgubWluKDAuOSwgMC41ICsgKGludGVyYWNjaW9uZXNDbGllbnRlLmxlbmd0aCAqIDAuMSkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIPCfjq8gSWRlbnRpZmljYXIgVGlwbyBkZSBDb25zdWx0YVxuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmaWNhclRpcG9Db25zdWx0YShjb25zdWx0YTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb25zdWx0YUxvd2VyID0gY29uc3VsdGEudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIGlmIChjb25zdWx0YUxvd2VyLmluY2x1ZGVzKCdwcmVjaW8nKSB8fCBjb25zdWx0YUxvd2VyLmluY2x1ZGVzKCdjdWVzdGEnKSB8fCBjb25zdWx0YUxvd2VyLmluY2x1ZGVzKCdjb3RpemFyJykpIHtcbiAgICAgIHJldHVybiAnY290aXphY2lvbidcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMoJ3F1ZSBlcycpIHx8IGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMoJ2NvbW8gZnVuY2lvbmEnKSB8fCBjb25zdWx0YUxvd2VyLmluY2x1ZGVzKCdjYXJhY3RlcmlzdGljYXMnKSkge1xuICAgICAgcmV0dXJuICdpbmZvcm1hY2lvbidcbiAgICB9XG4gICAgXG4gICAgaWYgKGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMoJ211eSBjYXJvJykgfHwgY29uc3VsdGFMb3dlci5pbmNsdWRlcygnbm8gbWUgY29udmVuY2UnKSB8fCBjb25zdWx0YUxvd2VyLmluY2x1ZGVzKCdwcm9ibGVtYScpKSB7XG4gICAgICByZXR1cm4gJ29iamVjY2lvbidcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICdzZWd1aW1pZW50bydcbiAgfVxuXG4gIC8qKlxuICAgKiDwn5OKIENhbGN1bGFyIENvbmZpYW56YVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhckNvbmZpYW56YShwYXRyb25lczogUGF0cm9uVmVudGFbXSwgcGVyZmlsOiBhbnkpOiBudW1iZXIge1xuICAgIGxldCBjb25maWFuemEgPSAwLjUgLy8gQmFzZVxuICAgIFxuICAgIC8vIEF1bWVudGFyIGNvbmZpYW56YSBjb24gcGF0cm9uZXMgc2ltaWxhcmVzXG4gICAgaWYgKHBhdHJvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbmZpYW56YSArPSAwLjJcbiAgICB9XG4gICAgXG4gICAgLy8gQXVtZW50YXIgY29uZmlhbnphIGNvbiBwZXJmaWwgZGVsIGNsaWVudGVcbiAgICBpZiAocGVyZmlsLnRpcG8gPT09ICdjbGllbnRlX3JlY3VycmVudGUnKSB7XG4gICAgICBjb25maWFuemEgKz0gMC4zXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBNYXRoLm1pbigxLjAsIGNvbmZpYW56YSlcbiAgfVxuXG4gIC8qKlxuICAgKiDwn5OdIFJlZ2lzdHJhciBJbnRlcmFjY2nDs24gcGFyYSBBcHJlbmRpemFqZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZWdpc3RyYXJJbnRlcmFjY2lvbihpbnRlcmFjY2lvbjogSW50ZXJhY2Npb25DbGllbnRlKSB7XG4gICAgdGhpcy5pbnRlcmFjY2lvbmVzLnB1c2goaW50ZXJhY2Npb24pXG4gICAgXG4gICAgLy8gR3VhcmRhciBlbiBiYXNlIGRlIGRhdG9zXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucXVvdGVTZXJ2aWNlLmNyZWF0ZVF1b3RlKHtcbiAgICAgICAgYXJnOiBgSU5ULSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICBlc3RhZG86ICdQcm9jZXNhZG8nLFxuICAgICAgICBmZWNoYTogaW50ZXJhY2Npb24udGltZXN0YW1wLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgY2xpZW50ZTogaW50ZXJhY2Npb24ubm9tYnJlLFxuICAgICAgICBvcmlnZW46ICdJQV9JbnRlZ3JhZGEnLFxuICAgICAgICB0ZWxlZm9ubzogaW50ZXJhY2Npb24udGVsZWZvbm8sXG4gICAgICAgIGRpcmVjY2lvbjogJ1Npc3RlbWEgSUEnLFxuICAgICAgICBjb25zdWx0YTogaW50ZXJhY2Npb24uY29uc3VsdGEsXG4gICAgICAgIHBhcnNlZERhdGE6IHt9IGFzIFBhcnNlZFF1b3RlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBndWFyZGFuZG8gaW50ZXJhY2Npw7NuOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDwn6egIEFjdHVhbGl6YXIgQmFzZSBkZSBDb25vY2ltaWVudG9cbiAgICovXG4gIGFzeW5jIGFjdHVhbGl6YXJCYXNlQ29ub2NpbWllbnRvKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBBbmFsaXphciBudWV2YXMgaW50ZXJhY2Npb25lc1xuICAgICAgYXdhaXQgdGhpcy5hbmFsaXphck51ZXZhc0ludGVyYWNjaW9uZXMoKVxuICAgICAgXG4gICAgICAvLyBBY3R1YWxpemFyIHBhdHJvbmVzIGRlIHZlbnRhXG4gICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJQYXRyb25lc1ZlbnRhKClcbiAgICAgIFxuICAgICAgLy8gQWN0dWFsaXphciBjb25vY2ltaWVudG8gZGUgcHJvZHVjdG9zXG4gICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJDb25vY2ltaWVudG9Qcm9kdWN0b3MoKVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn4pyFIEJhc2UgZGUgY29ub2NpbWllbnRvIGFjdHVhbGl6YWRhJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGFjdHVhbGl6YW5kbyBiYXNlIGRlIGNvbm9jaW1pZW50bzonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog8J+TiCBPYnRlbmVyIE3DqXRyaWNhcyBkZWwgU2lzdGVtYVxuICAgKi9cbiAgYXN5bmMgb2J0ZW5lck1ldHJpY2FzKCk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgdG90YWxJbnRlcmFjY2lvbmVzID0gdGhpcy5pbnRlcmFjY2lvbmVzLmxlbmd0aFxuICAgIGNvbnN0IGNvdGl6YWNpb25lc0dlbmVyYWRhcyA9IHRoaXMuaW50ZXJhY2Npb25lcy5maWx0ZXIoaSA9PiBpLmNvdGl6YWNpb25fZ2VuZXJhZGEpLmxlbmd0aFxuICAgIGNvbnN0IGNvbnZlcnNpb25lcyA9IHRoaXMuaW50ZXJhY2Npb25lcy5maWx0ZXIoaSA9PiBpLmNvbnZlcnNpb24pLmxlbmd0aFxuICAgIGNvbnN0IHRhc2FDb252ZXJzaW9uID0gY29udmVyc2lvbmVzIC8gY290aXphY2lvbmVzR2VuZXJhZGFzIHx8IDBcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxfaW50ZXJhY2Npb25lczogdG90YWxJbnRlcmFjY2lvbmVzLFxuICAgICAgY290aXphY2lvbmVzX2dlbmVyYWRhczogY290aXphY2lvbmVzR2VuZXJhZGFzLFxuICAgICAgY29udmVyc2lvbmVzOiBjb252ZXJzaW9uZXMsXG4gICAgICB0YXNhX2NvbnZlcnNpb246IHRhc2FDb252ZXJzaW9uLFxuICAgICAgcGF0cm9uZXNfaWRlbnRpZmljYWRvczogdGhpcy5wYXRyb25lc1ZlbnRhLmxlbmd0aCxcbiAgICAgIHByb2R1Y3Rvc19jb25vY2lkb3M6IHRoaXMuY29ub2NpbWllbnRvUHJvZHVjdG9zLmxlbmd0aCxcbiAgICAgIGNvbmZpYW56YV9wcm9tZWRpbzogdGhpcy5jYWxjdWxhckNvbmZpYW56YVByb21lZGlvKClcbiAgICB9XG4gIH1cblxuICAvLyBNw6l0b2RvcyBhdXhpbGlhcmVzXG4gIHByaXZhdGUgZ2VuZXJhcklkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBpbnRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gXG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGFyU2ltaWxpdHVkKHRleHRvMTogc3RyaW5nLCB0ZXh0bzI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgLy8gSW1wbGVtZW50YWNpw7NuIHNpbXBsZSBkZSBzaW1pbGl0dWQgKGVuIHByb2R1Y2Npw7NuIHVzYXIgZW1iZWRkaW5nKVxuICAgIGNvbnN0IHBhbGFicmFzMSA9IHRleHRvMS50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJylcbiAgICBjb25zdCBwYWxhYnJhczIgPSB0ZXh0bzIudG9Mb3dlckNhc2UoKS5zcGxpdCgnICcpXG4gICAgY29uc3QgaW50ZXJzZWNjaW9uID0gcGFsYWJyYXMxLmZpbHRlcihwID0+IHBhbGFicmFzMi5pbmNsdWRlcyhwKSlcbiAgICByZXR1cm4gaW50ZXJzZWNjaW9uLmxlbmd0aCAvIE1hdGgubWF4KHBhbGFicmFzMS5sZW5ndGgsIHBhbGFicmFzMi5sZW5ndGgpXG4gIH1cblxuICBwcml2YXRlIGV4dHJhZXJQcm9kdWN0b3NEZUNvbnN1bHRhKGNvbnN1bHRhOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcHJvZHVjdG9zID0gT2JqZWN0LmtleXMoUFJPRFVDVE9TKVxuICAgIHJldHVybiBwcm9kdWN0b3MuZmlsdGVyKHByb2R1Y3RvID0+IFxuICAgICAgY29uc3VsdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwcm9kdWN0by50b0xvd2VyQ2FzZSgpKVxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgZXh0cmFlclNlcnZpY2lvc0RlQ29uc3VsdGEoY29uc3VsdGE6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZXJ2aWNpb3MgPSBPYmplY3Qua2V5cyhTRVJWSUNJT1NfQURJQ0lPTkFMRVMpXG4gICAgcmV0dXJuIHNlcnZpY2lvcy5maWx0ZXIoc2VydmljaW8gPT4gXG4gICAgICBjb25zdWx0YS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlcnZpY2lvLnRvTG93ZXJDYXNlKCkpXG4gICAgKVxuICB9XG5cbiAgcHJpdmF0ZSBjb250YXJGcmVjdWVuY2lhcyhpdGVtczogc3RyaW5nW10pOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHtcbiAgICByZXR1cm4gaXRlbXMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICAgIGFjY1tpdGVtXSA9IChhY2NbaXRlbV0gfHwgMCkgKyAxXG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0YXJab25hUG9yVGVsZWZvbm8odGVsZWZvbm86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgY29kaWdvczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgICcyJzogJ21vbnRldmlkZW8nLFxuICAgICAgJzQnOiAnY2FuZWxvbmVzJyxcbiAgICAgICc1JzogJ2ZyYXlfYmVudG9zJyxcbiAgICAgICc2JzogJ2NvbG9uaWEnXG4gICAgfVxuICAgIGNvbnN0IGNvZGlnb0FyZWEgPSB0ZWxlZm9uby5zbGljZSgwLCAxKVxuICAgIHJldHVybiBjb2RpZ29zW2NvZGlnb0FyZWFdIHx8ICdtb250ZXZpZGVvJ1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhckNvbmZpYW56YVByb21lZGlvKCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuaW50ZXJhY2Npb25lcy5sZW5ndGggPT09IDApIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY2Npb25lcy5yZWR1Y2UoKHN1bSwgaSkgPT4gc3VtICsgKGkuc2F0aXNmYWNjaW9uIHx8IDAuNSksIDApIC8gdGhpcy5pbnRlcmFjY2lvbmVzLmxlbmd0aFxuICB9XG5cbiAgLy8gTcOpdG9kb3MgZGUgY2FyZ2EgZGUgZGF0b3MgKGltcGxlbWVudGFyIHNlZ8O6biBuZWNlc2lkYWRlcylcbiAgcHJpdmF0ZSBhc3luYyBjYXJnYXJQYXRyb25lc1ZlbnRhKCkge1xuICAgIC8vIEltcGxlbWVudGFyIGNhcmdhIGRlIHBhdHJvbmVzIGRlc2RlIE1vbmdvREJcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY2FyZ2FyQ29ub2NpbWllbnRvUHJvZHVjdG9zKCkge1xuICAgIC8vIEltcGxlbWVudGFyIGNhcmdhIGRlIGNvbm9jaW1pZW50byBkZXNkZSBNb25nb0RCXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNhcmdhckludGVyYWNjaW9uZXNIaXN0b3JpY2FzKCkge1xuICAgIC8vIEltcGxlbWVudGFyIGNhcmdhIGRlIGludGVyYWNjaW9uZXMgZGVzZGUgTW9uZ29EQlxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhbmFsaXphck51ZXZhc0ludGVyYWNjaW9uZXMoKSB7XG4gICAgLy8gSW1wbGVtZW50YXIgYW7DoWxpc2lzIGRlIG51ZXZhcyBpbnRlcmFjY2lvbmVzXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFjdHVhbGl6YXJQYXRyb25lc1ZlbnRhKCkge1xuICAgIC8vIEltcGxlbWVudGFyIGFjdHVhbGl6YWNpw7NuIGRlIHBhdHJvbmVzXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGFjdHVhbGl6YXJDb25vY2ltaWVudG9Qcm9kdWN0b3MoKSB7XG4gICAgLy8gSW1wbGVtZW50YXIgYWN0dWFsaXphY2nDs24gZGUgY29ub2NpbWllbnRvXG4gIH1cbn1cblxuLy8gRXhwb3J0YXIgaW5zdGFuY2lhIHNpbmdsZXRvblxuZXhwb3J0IGNvbnN0IG1vdG9yQ290aXphY2lvbkludGVncmFkbyA9IG5ldyBNb3RvckNvdGl6YWNpb25JbnRlZ3JhZG8oKVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsInNlY3VyZUNvbmZpZyIsImNvbm5lY3REQiIsIlF1b3RlU2VydmljZSIsInBhcnNlUXVvdGVDb25zdWx0YSIsIlBST0RVQ1RPUyIsIlNFUlZJQ0lPU19BRElDSU9OQUxFUyIsImNhbGN1bGF0ZUZ1bGxRdW90ZSIsIk1vdG9yQ290aXphY2lvbkludGVncmFkbyIsImNvbnN0cnVjdG9yIiwiYmFzZUNvbm9jaW1pZW50byIsIk1hcCIsInBhdHJvbmVzVmVudGEiLCJjb25vY2ltaWVudG9Qcm9kdWN0b3MiLCJpbnRlcmFjY2lvbmVzIiwiaXNSZWFkeSIsIkVycm9yIiwiY29uZmlnIiwiZ2V0T3BlbkFJQ29uZmlnIiwib3BlbmFpIiwiYXBpS2V5IiwicXVvdGVTZXJ2aWNlIiwiaW5pY2lhbGl6YXJCYXNlQ29ub2NpbWllbnRvIiwiY2FyZ2FyUGF0cm9uZXNWZW50YSIsImNhcmdhckNvbm9jaW1pZW50b1Byb2R1Y3RvcyIsImNhcmdhckludGVyYWNjaW9uZXNIaXN0b3JpY2FzIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwicHJvY2VzYXJDb25zdWx0YSIsImNvbnN1bHRhIiwidXNlclBob25lIiwidXNlck5hbWUiLCJwYXJzZWQiLCJjb250ZXh0byIsImFuYWxpemFyQ29udGV4dG8iLCJyZXNwdWVzdGEiLCJnZW5lcmFyUmVzcHVlc3RhSW50ZWxpZ2VudGUiLCJyZWdpc3RyYXJJbnRlcmFjY2lvbiIsImlkIiwiZ2VuZXJhcklkIiwidGVsZWZvbm8iLCJub21icmUiLCJtZW5zYWplIiwiY290aXphY2lvbl9nZW5lcmFkYSIsInRpcG8iLCJjb252ZXJzaW9uIiwidGltZXN0YW1wIiwiRGF0ZSIsImxlY2Npb25lc19hcHJlbmRpZGFzIiwiY29uZmlhbnphIiwicGF0cm9uZXNfYXBsaWNhZG9zIiwiY29ub2NpbWllbnRvX3V0aWxpemFkbyIsInJlY29tZW5kYWNpb25lcyIsInBhdHJvbmVzU2ltaWxhcmVzIiwiYnVzY2FyUGF0cm9uZXNTaW1pbGFyZXMiLCJwZXJmaWxDbGllbnRlIiwiYW5hbGl6YXJQZXJmaWxDbGllbnRlIiwidGlwb0NvbnN1bHRhIiwiaWRlbnRpZmljYXJUaXBvQ29uc3VsdGEiLCJjYWxjdWxhckNvbmZpYW56YSIsInByb21wdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJjb21wbGV0aW9uIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsInRlbXBlcmF0dXJlIiwicGFyc2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsInByb2R1Y3RvIiwiY290aXphY2lvblJlYWwiLCJkZXRlY3RhclpvbmFQb3JUZWxlZm9ubyIsImNvdGl6YWNpb24iLCJmaWx0ZXIiLCJwYXRyb24iLCJjYWxjdWxhclNpbWlsaXR1ZCIsImludGVyYWNjaW9uZXNDbGllbnRlIiwiaSIsInByb2R1Y3Rvc0NvbnN1bHRhZG9zIiwibWFwIiwiZXh0cmFlclByb2R1Y3Rvc0RlQ29uc3VsdGEiLCJmbGF0Iiwic2VydmljaW9zUHJlZmVyaWRvcyIsImV4dHJhZXJTZXJ2aWNpb3NEZUNvbnN1bHRhIiwidGFzYUNvbnZlcnNpb24iLCJ0b3RhbF9pbnRlcmFjY2lvbmVzIiwicHJvZHVjdG9zX3ByZWZlcmlkb3MiLCJjb250YXJGcmVjdWVuY2lhcyIsInNlcnZpY2lvc19wcmVmZXJpZG9zIiwidGFzYV9jb252ZXJzaW9uIiwidWx0aW1hX2ludGVyYWNjaW9uIiwiTWF0aCIsIm1heCIsImdldFRpbWUiLCJtaW4iLCJjb25zdWx0YUxvd2VyIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInBhdHJvbmVzIiwicGVyZmlsIiwiaW50ZXJhY2Npb24iLCJwdXNoIiwiY3JlYXRlUXVvdGUiLCJhcmciLCJub3ciLCJlc3RhZG8iLCJmZWNoYSIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJjbGllbnRlIiwib3JpZ2VuIiwiZGlyZWNjaW9uIiwicGFyc2VkRGF0YSIsImFjdHVhbGl6YXJCYXNlQ29ub2NpbWllbnRvIiwiYW5hbGl6YXJOdWV2YXNJbnRlcmFjY2lvbmVzIiwiYWN0dWFsaXphclBhdHJvbmVzVmVudGEiLCJhY3R1YWxpemFyQ29ub2NpbWllbnRvUHJvZHVjdG9zIiwib2J0ZW5lck1ldHJpY2FzIiwidG90YWxJbnRlcmFjY2lvbmVzIiwiY290aXphY2lvbmVzR2VuZXJhZGFzIiwiY29udmVyc2lvbmVzIiwiY290aXphY2lvbmVzX2dlbmVyYWRhcyIsInBhdHJvbmVzX2lkZW50aWZpY2Fkb3MiLCJwcm9kdWN0b3NfY29ub2NpZG9zIiwiY29uZmlhbnphX3Byb21lZGlvIiwiY2FsY3VsYXJDb25maWFuemFQcm9tZWRpbyIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwidGV4dG8xIiwidGV4dG8yIiwicGFsYWJyYXMxIiwicGFsYWJyYXMyIiwiaW50ZXJzZWNjaW9uIiwicCIsInByb2R1Y3RvcyIsIk9iamVjdCIsImtleXMiLCJzZXJ2aWNpb3MiLCJzZXJ2aWNpbyIsIml0ZW1zIiwicmVkdWNlIiwiYWNjIiwiaXRlbSIsImNvZGlnb3MiLCJjb2RpZ29BcmVhIiwic2xpY2UiLCJzdW0iLCJzYXRpc2ZhY2Npb24iLCJtb3RvckNvdGl6YWNpb25JbnRlZ3JhZG8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/integrated-quote-engine.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/knowledge-base.ts":
/*!***********************************!*\
  !*** ./src/lib/knowledge-base.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KNOWLEDGE_BASE: () => (/* binding */ KNOWLEDGE_BASE),\n/* harmony export */   PRODUCTOS_BMC: () => (/* binding */ PRODUCTOS_BMC),\n/* harmony export */   REGLAS_COTIZACION: () => (/* binding */ REGLAS_COTIZACION),\n/* harmony export */   SERVICIOS_ADICIONALES: () => (/* binding */ SERVICIOS_ADICIONALES),\n/* harmony export */   ZONAS_FLETE: () => (/* binding */ ZONAS_FLETE),\n/* harmony export */   buscarProductos: () => (/* binding */ buscarProductos),\n/* harmony export */   calcularPrecioBase: () => (/* binding */ calcularPrecioBase),\n/* harmony export */   calcularServiciosAdicionales: () => (/* binding */ calcularServiciosAdicionales),\n/* harmony export */   generarCotizacion: () => (/* binding */ generarCotizacion)\n/* harmony export */ });\n// Base de Conocimiento para Sistema de Cotizaci√≥n BMC\n// Basada en an√°lisis del Google Sheet y productos identificados\n// Base de datos de productos BMC\nconst PRODUCTOS_BMC = [\n    {\n        id: \"isodec_50\",\n        nombre: \"Isodec EPS\",\n        categoria: \"paneles\",\n        subcategoria: \"aislante\",\n        descripcion: \"Panel aislante de poliestireno expandido (EPS) para paredes y techos\",\n        especificaciones: {\n            grosor: [\n                50,\n                100,\n                150,\n                200\n            ],\n            colores: [\n                \"blanco\",\n                \"gris\",\n                \"personalizado\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000,\n                    12000\n                ],\n                ancho: [\n                    1000,\n                    1200\n                ],\n                alto: [\n                    50,\n                    100,\n                    150,\n                    200\n                ]\n            },\n            unidades: [\n                \"m2\",\n                \"panel\"\n            ]\n        },\n        precios: {\n            base: 45,\n            unidad: \"m2\",\n            variaciones: {\n                grosor: {\n                    50: 1.0,\n                    100: 1.3,\n                    150: 1.6,\n                    200: 2.0\n                },\n                color: {\n                    \"blanco\": 1.0,\n                    \"gris\": 1.1,\n                    \"personalizado\": 1.3\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: true\n        },\n        aplicaciones: [\n            \"paredes\",\n            \"techos\",\n            \"galpones\",\n            \"naves industriales\"\n        ],\n        sinonimos: [\n            \"isodec\",\n            \"panel eps\",\n            \"aislante eps\",\n            \"panel aislante\"\n        ],\n        palabras_clave: [\n            \"isodec\",\n            \"eps\",\n            \"aislante\",\n            \"panel\",\n            \"poliestireno\"\n        ]\n    },\n    {\n        id: \"isoroof_30\",\n        nombre: \"Isoroof\",\n        categoria: \"paneles\",\n        subcategoria: \"techo\",\n        descripcion: \"Panel aislante para techos con acabado met\\xe1lico\",\n        especificaciones: {\n            grosor: [\n                30,\n                50,\n                80\n            ],\n            colores: [\n                \"blanco\",\n                \"gris\",\n                \"rojo\",\n                \"azul\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000,\n                    12000\n                ],\n                ancho: [\n                    1000,\n                    1200\n                ]\n            },\n            unidades: [\n                \"m2\",\n                \"panel\"\n            ]\n        },\n        precios: {\n            base: 65,\n            unidad: \"m2\",\n            variaciones: {\n                grosor: {\n                    30: 1.0,\n                    50: 1.2,\n                    80: 1.5\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: true\n        },\n        aplicaciones: [\n            \"techos\",\n            \"cubiertas\",\n            \"galpones\"\n        ],\n        sinonimos: [\n            \"isoroof\",\n            \"panel techo\",\n            \"cubierta aislante\"\n        ],\n        palabras_clave: [\n            \"isoroof\",\n            \"techo\",\n            \"cubierta\",\n            \"panel techo\"\n        ]\n    },\n    {\n        id: \"isopanel_general\",\n        nombre: \"Isopanel\",\n        categoria: \"paneles\",\n        subcategoria: \"general\",\n        descripcion: \"Panel aislante de uso general para construcci\\xf3n\",\n        especificaciones: {\n            grosor: [\n                50,\n                100,\n                150,\n                200,\n                250\n            ],\n            colores: [\n                \"blanco\",\n                \"gris\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000,\n                    12000\n                ],\n                ancho: [\n                    1000,\n                    1200\n                ]\n            },\n            unidades: [\n                \"m2\",\n                \"panel\"\n            ]\n        },\n        precios: {\n            base: 55,\n            unidad: \"m2\",\n            variaciones: {\n                grosor: {\n                    50: 1.0,\n                    100: 1.2,\n                    150: 1.4,\n                    200: 1.7,\n                    250: 2.0\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: true\n        },\n        aplicaciones: [\n            \"paredes\",\n            \"techos\",\n            \"divisiones\"\n        ],\n        sinonimos: [\n            \"isopanel\",\n            \"panel general\",\n            \"panel construcci\\xf3n\"\n        ],\n        palabras_clave: [\n            \"isopanel\",\n            \"panel\",\n            \"construcci\\xf3n\",\n            \"general\"\n        ]\n    },\n    {\n        id: \"isowall_50\",\n        nombre: \"Isowall\",\n        categoria: \"paneles\",\n        subcategoria: \"pared\",\n        descripcion: \"Panel aislante espec\\xedfico para paredes exteriores\",\n        especificaciones: {\n            grosor: [\n                50,\n                100,\n                150\n            ],\n            colores: [\n                \"blanco\",\n                \"gris\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000\n                ],\n                ancho: [\n                    1000,\n                    1200\n                ]\n            },\n            unidades: [\n                \"m2\",\n                \"panel\"\n            ]\n        },\n        precios: {\n            base: 50,\n            unidad: \"m2\",\n            variaciones: {\n                grosor: {\n                    50: 1.0,\n                    100: 1.3,\n                    150: 1.6\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: true\n        },\n        aplicaciones: [\n            \"paredes exteriores\",\n            \"fachadas\",\n            \"divisiones\"\n        ],\n        sinonimos: [\n            \"isowall\",\n            \"panel pared\",\n            \"pared aislante\"\n        ],\n        palabras_clave: [\n            \"isowall\",\n            \"pared\",\n            \"fachada\",\n            \"exterior\"\n        ]\n    },\n    {\n        id: \"chapa_galvanizada\",\n        nombre: \"Chapa Galvanizada\",\n        categoria: \"chapas\",\n        subcategoria: \"metalica\",\n        descripcion: \"Chapa de acero galvanizado para techos y paredes\",\n        especificaciones: {\n            grosor: [\n                0.30,\n                0.41,\n                0.50\n            ],\n            colores: [\n                \"galvanizado\",\n                \"pintado\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000,\n                    12000\n                ],\n                ancho: [\n                    1000,\n                    1200\n                ]\n            },\n            unidades: [\n                \"m2\",\n                \"chapa\"\n            ]\n        },\n        precios: {\n            base: 25,\n            unidad: \"m2\",\n            variaciones: {\n                grosor: {\n                    0.30: 1.0,\n                    0.41: 1.2,\n                    0.50: 1.4\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: true\n        },\n        aplicaciones: [\n            \"techos\",\n            \"paredes\",\n            \"galpones\"\n        ],\n        sinonimos: [\n            \"chapa\",\n            \"galvanizada\",\n            \"acero\",\n            \"techo met\\xe1lico\"\n        ],\n        palabras_clave: [\n            \"chapa\",\n            \"galvanizada\",\n            \"acero\",\n            \"metal\"\n        ]\n    },\n    {\n        id: \"calameria_estructura\",\n        nombre: \"Calamer\\xeda\",\n        categoria: \"calameria\",\n        subcategoria: \"estructura\",\n        descripcion: \"Estructura met\\xe1lica para soporte de paneles y chapas\",\n        especificaciones: {\n            grosor: [\n                1.5,\n                2.0,\n                2.5\n            ],\n            colores: [\n                \"galvanizado\",\n                \"pintado\"\n            ],\n            dimensiones: {\n                largo: [\n                    3000,\n                    6000,\n                    12000\n                ]\n            },\n            unidades: [\n                \"ml\",\n                \"kg\"\n            ]\n        },\n        precios: {\n            base: 15,\n            unidad: \"ml\",\n            variaciones: {\n                grosor: {\n                    1.5: 1.0,\n                    2.0: 1.3,\n                    2.5: 1.6\n                }\n            }\n        },\n        servicios: {\n            instalacion: true,\n            flete: true,\n            accesorios: false\n        },\n        aplicaciones: [\n            \"estructura\",\n            \"soporte\",\n            \"galpones\"\n        ],\n        sinonimos: [\n            \"calameria\",\n            \"estructura\",\n            \"perfil\",\n            \"viga\"\n        ],\n        palabras_clave: [\n            \"calameria\",\n            \"estructura\",\n            \"perfil\",\n            \"soporte\"\n        ]\n    }\n];\n// Zonas de flete en Uruguay\nconst ZONAS_FLETE = {\n    \"montevideo\": {\n        nombre: \"Montevideo\",\n        flete_base: 50,\n        multiplicador: 1.0,\n        observaciones: \"Zona metropolitana\"\n    },\n    \"canelones\": {\n        nombre: \"Canelones\",\n        flete_base: 80,\n        multiplicador: 1.2,\n        observaciones: \"Incluye Pando, Las Piedras, Ciudad de la Costa\"\n    },\n    \"maldonado\": {\n        nombre: \"Maldonado\",\n        flete_base: 120,\n        multiplicador: 1.5,\n        observaciones: \"Incluye Punta del Este, Piri\\xe1polis\"\n    },\n    \"rivera\": {\n        nombre: \"Rivera\",\n        flete_base: 200,\n        multiplicador: 2.0,\n        observaciones: \"Zona fronteriza\"\n    },\n    \"artigas\": {\n        nombre: \"Artigas\",\n        flete_base: 250,\n        multiplicador: 2.5,\n        observaciones: \"Zona norte\"\n    },\n    \"fray_bentos\": {\n        nombre: \"Fray Bentos\",\n        flete_base: 180,\n        multiplicador: 1.8,\n        observaciones: \"R\\xedo Negro\"\n    },\n    \"colonia\": {\n        nombre: \"Colonia\",\n        flete_base: 150,\n        multiplicador: 1.6,\n        observaciones: \"Colonia del Sacramento\"\n    }\n};\n// Servicios adicionales\nconst SERVICIOS_ADICIONALES = {\n    instalacion: {\n        base: 100,\n        por_m2: 15,\n        minimo: 200\n    },\n    flete: {\n        base: 50,\n        por_km: 2.5,\n        minimo: 80\n    },\n    accesorios: {\n        \"babetas\": {\n            precio: 25,\n            descripcion: \"Babetas de terminaci\\xf3n\",\n            requerido_con: [\n                \"isodec\",\n                \"isoroof\",\n                \"isopanel\"\n            ]\n        },\n        \"gotero\": {\n            precio: 30,\n            descripcion: \"Gotero frontal\",\n            requerido_con: [\n                \"isoroof\",\n                \"chapa\"\n            ]\n        },\n        \"remates\": {\n            precio: 20,\n            descripcion: \"Remates de esquina\",\n            requerido_con: [\n                \"isodec\",\n                \"isopanel\",\n                \"isowall\"\n            ]\n        },\n        \"juntas\": {\n            precio: 15,\n            descripcion: \"Juntas de dilataci\\xf3n\",\n            requerido_con: [\n                \"isodec\",\n                \"isoroof\",\n                \"isopanel\"\n            ]\n        }\n    }\n};\n// Reglas de cotizaci√≥n inteligentes\nconst REGLAS_COTIZACION = [\n    {\n        id: \"galpon_completo\",\n        nombre: \"Galp\\xf3n Completo\",\n        condicion: (parsed)=>parsed.dimensiones?.largo && parsed.dimensiones?.ancho && parsed.dimensiones?.alto && parsed.producto?.tipo?.toLowerCase().includes(\"isodec\"),\n        accion: (parsed, base)=>{\n            const area = parsed.dimensiones.largo * parsed.dimensiones.ancho / 10000 // m2\n            ;\n            const precio = area * base.precios.base * (base.precios.variaciones?.grosor?.[parsed.producto.grosor] || 1);\n            return {\n                precio: Math.round(precio),\n                descripcion: `Galp√≥n completo de ${parsed.dimensiones.largo}m x ${parsed.dimensiones.ancho}m x ${parsed.dimensiones.alto}m`,\n                recomendaciones: [\n                    \"Incluir estructura de calameria\",\n                    \"Considerar accesorios de terminaci\\xf3n\",\n                    \"Verificar cimentaci\\xf3n existente\"\n                ]\n            };\n        },\n        prioridad: 1\n    },\n    {\n        id: \"techo_solo\",\n        nombre: \"Solo Techo\",\n        condicion: (parsed)=>parsed.consulta_original?.toLowerCase().includes(\"techo\") && !parsed.consulta_original?.toLowerCase().includes(\"pared\"),\n        accion: (parsed, base)=>{\n            const area = parsed.dimensiones?.area_m2 || 50 // default 50m2\n            ;\n            const precio = area * base.precios.base;\n            return {\n                precio: Math.round(precio),\n                descripcion: `Cubierta de techo de ${area}m¬≤`,\n                recomendaciones: [\n                    \"Verificar inclinaci\\xf3n m\\xednima 5%\",\n                    \"Incluir sistema de drenaje\",\n                    \"Considerar aislaci\\xf3n t\\xe9rmica\"\n                ]\n            };\n        },\n        prioridad: 2\n    },\n    {\n        id: \"paredes_exteriores\",\n        nombre: \"Paredes Exteriores\",\n        condicion: (parsed)=>parsed.consulta_original?.toLowerCase().includes(\"pared\") && parsed.producto?.tipo?.toLowerCase().includes(\"isowall\"),\n        accion: (parsed, base)=>{\n            const area = parsed.dimensiones?.area_m2 || 100 // default 100m2\n            ;\n            const precio = area * base.precios.base;\n            return {\n                precio: Math.round(precio),\n                descripcion: `Paredes exteriores de ${area}m¬≤`,\n                recomendaciones: [\n                    \"Incluir sistema de fijaci\\xf3n\",\n                    \"Considerar juntas de dilataci\\xf3n\",\n                    \"Verificar resistencia al viento\"\n                ]\n            };\n        },\n        prioridad: 3\n    }\n];\n// Base de conocimiento completa\nconst KNOWLEDGE_BASE = {\n    productos: PRODUCTOS_BMC,\n    reglas: REGLAS_COTIZACION,\n    zonas: ZONAS_FLETE,\n    servicios: SERVICIOS_ADICIONALES\n};\n// Funci√≥n para buscar productos por consulta\nfunction buscarProductos(consulta) {\n    const consultaLower = consulta.toLowerCase();\n    return PRODUCTOS_BMC.filter((producto)=>producto.sinonimos.some((sinonimo)=>consultaLower.includes(sinonimo.toLowerCase())) || producto.palabras_clave.some((palabra)=>consultaLower.includes(palabra.toLowerCase())) || producto.nombre.toLowerCase().includes(consultaLower));\n}\n// Funci√≥n para calcular precio base\nfunction calcularPrecioBase(producto, parsed) {\n    let precio = producto.precios.base;\n    // Aplicar variaciones por grosor\n    if (parsed.producto?.grosor && producto.precios.variaciones?.grosor) {\n        const grosor = parseInt(parsed.producto.grosor.replace(\"mm\", \"\"));\n        const multiplicador = producto.precios.variaciones.grosor[grosor] || 1;\n        precio *= multiplicador;\n    }\n    // Aplicar variaciones por color\n    if (parsed.producto?.color && producto.precios.variaciones?.color) {\n        const multiplicador = producto.precios.variaciones.color[parsed.producto.color] || 1;\n        precio *= multiplicador;\n    }\n    return precio;\n}\n// Funci√≥n para calcular servicios adicionales\nfunction calcularServiciosAdicionales(parsed, zona = \"montevideo\") {\n    const area = parsed.dimensiones?.area_m2 || 50;\n    const zonaData = ZONAS_FLETE[zona] || ZONAS_FLETE.montevideo;\n    const instalacion = Math.max(SERVICIOS_ADICIONALES.instalacion.base + area * SERVICIOS_ADICIONALES.instalacion.por_m2, SERVICIOS_ADICIONALES.instalacion.minimo);\n    const flete = zonaData.flete_base * zonaData.multiplicador;\n    let accesorios = 0;\n    if (parsed.servicios?.accesorios) {\n        // Calcular accesorios seg√∫n el producto\n        const producto = buscarProductos(parsed.producto?.tipo || \"\")[0];\n        if (producto) {\n            Object.values(SERVICIOS_ADICIONALES.accesorios).forEach((acc)=>{\n                if (acc.requerido_con?.some((prod)=>producto.sinonimos.includes(prod))) {\n                    accesorios += acc.precio;\n                }\n            });\n        }\n    }\n    return {\n        instalacion: Math.round(instalacion),\n        flete: Math.round(flete),\n        accesorios: Math.round(accesorios),\n        total: Math.round(instalacion + flete + accesorios)\n    };\n}\n// Funci√≥n para generar cotizaci√≥n completa\nfunction generarCotizacion(parsed, zona = \"montevideo\") {\n    const productos = buscarProductos(parsed.producto?.tipo || parsed.consulta_original || \"\");\n    const producto = productos[0] || null;\n    if (!producto) {\n        return {\n            producto: null,\n            precio_base: 0,\n            area: 0,\n            servicios: {\n                instalacion: 0,\n                flete: 0,\n                accesorios: 0,\n                total: 0\n            },\n            total: 0,\n            recomendaciones: [\n                \"Producto no identificado. Contactar para cotizaci\\xf3n personalizada.\"\n            ],\n            descripcion: \"Producto no encontrado en base de datos\"\n        };\n    }\n    const area = parsed.dimensiones?.area_m2 || (parsed.dimensiones?.largo && parsed.dimensiones?.ancho ? parsed.dimensiones.largo * parsed.dimensiones.ancho / 10000 : 50);\n    const precio_base = calcularPrecioBase(producto, parsed) * area;\n    const servicios = calcularServiciosAdicionales(parsed, zona);\n    // Aplicar reglas de cotizaci√≥n\n    let recomendaciones = [];\n    let descripcion = `${producto.nombre} - ${area}m¬≤`;\n    for (const regla of REGLAS_COTIZACION){\n        if (regla.condicion(parsed)) {\n            const resultado = regla.accion(parsed, producto);\n            recomendaciones = [\n                ...recomendaciones,\n                ...resultado.recomendaciones\n            ];\n            descripcion = resultado.descripcion;\n            break;\n        }\n    }\n    const total = Math.round(precio_base + servicios.total);\n    return {\n        producto,\n        precio_base: Math.round(precio_base),\n        area: Math.round(area * 100) / 100,\n        servicios,\n        total,\n        recomendaciones,\n        descripcion\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0IsV0FBVyxFQUFFRSxRQUNoRCxPQUFRRixXQUFXLENBQUNDLEtBQUssR0FBRzRCLE9BQU83QixXQUFXLENBQUNFLEtBQUssR0FBSSxRQUFRLEVBQUM7SUFFckUsTUFBTWtFLGNBQWNmLG1CQUFtQnZCLFVBQVVELFVBQVVNO0lBQzNELE1BQU16QixZQUFZOEMsNkJBQTZCM0IsUUFBUTRCO0lBRXZELCtCQUErQjtJQUMvQixJQUFJbkIsa0JBQTRCLEVBQUU7SUFDbEMsSUFBSTFDLGNBQWMsQ0FBQyxFQUFFa0MsU0FBU3JDLE1BQU0sQ0FBQyxHQUFHLEVBQUUwQyxLQUFLLEVBQUUsQ0FBQztJQUVsRCxLQUFLLE1BQU1rQyxTQUFTMUMsa0JBQW1CO1FBQ3JDLElBQUkwQyxNQUFNekMsU0FBUyxDQUFDQyxTQUFTO1lBQzNCLE1BQU15QyxZQUFZRCxNQUFNbkMsTUFBTSxDQUFDTCxRQUFRQztZQUN2Q1Esa0JBQWtCO21CQUFJQTttQkFBb0JnQyxVQUFVaEMsZUFBZTthQUFDO1lBQ3BFMUMsY0FBYzBFLFVBQVUxRSxXQUFXO1lBQ25DO1FBQ0Y7SUFDRjtJQUVBLE1BQU1zRSxRQUFROUIsS0FBS0MsS0FBSyxDQUFDK0IsY0FBYzFELFVBQVV3RCxLQUFLO0lBRXRELE9BQU87UUFDTHBDO1FBQ0FzQyxhQUFhaEMsS0FBS0MsS0FBSyxDQUFDK0I7UUFDeEJqQyxNQUFNQyxLQUFLQyxLQUFLLENBQUNGLE9BQU8sT0FBTztRQUMvQnpCO1FBQ0F3RDtRQUNBNUI7UUFDQTFDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlcnNhdGlvbmFsLXF1b3RpbmctZGFzaGJvYXJkLy4vc3JjL2xpYi9rbm93bGVkZ2UtYmFzZS50cz8xZTBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEJhc2UgZGUgQ29ub2NpbWllbnRvIHBhcmEgU2lzdGVtYSBkZSBDb3RpemFjacOzbiBCTUNcbi8vIEJhc2FkYSBlbiBhbsOhbGlzaXMgZGVsIEdvb2dsZSBTaGVldCB5IHByb2R1Y3RvcyBpZGVudGlmaWNhZG9zXG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZHVjdCB7XG4gIGlkOiBzdHJpbmdcbiAgbm9tYnJlOiBzdHJpbmdcbiAgY2F0ZWdvcmlhOiAncGFuZWxlcycgfCAnY2hhcGFzJyB8ICdjYWxhbWVyaWEnIHwgJ2FjY2Vzb3Jpb3MnIHwgJ3NlcnZpY2lvcydcbiAgc3ViY2F0ZWdvcmlhPzogc3RyaW5nXG4gIGRlc2NyaXBjaW9uOiBzdHJpbmdcbiAgZXNwZWNpZmljYWNpb25lczoge1xuICAgIGdyb3Nvcj86IG51bWJlcltdIC8vIGVuIG1tXG4gICAgY29sb3Jlcz86IHN0cmluZ1tdXG4gICAgZGltZW5zaW9uZXM/OiB7XG4gICAgICBsYXJnbz86IG51bWJlcltdXG4gICAgICBhbmNobz86IG51bWJlcltdXG4gICAgICBhbHRvPzogbnVtYmVyW11cbiAgICB9XG4gICAgdW5pZGFkZXM/OiBzdHJpbmdbXVxuICB9XG4gIHByZWNpb3M6IHtcbiAgICBiYXNlOiBudW1iZXIgLy8gcHJlY2lvIHBvciBtMiBvIHVuaWRhZFxuICAgIHVuaWRhZDogJ20yJyB8ICdtbCcgfCAndW5pZGFkJyB8ICdwYW5lbCdcbiAgICB2YXJpYWNpb25lcz86IHtcbiAgICAgIGdyb3Nvcj86IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH0gLy8gbXVsdGlwbGljYWRvciBwb3IgZ3Jvc29yXG4gICAgICBjb2xvcj86IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gLy8gbXVsdGlwbGljYWRvciBwb3IgY29sb3JcbiAgICB9XG4gIH1cbiAgc2VydmljaW9zOiB7XG4gICAgaW5zdGFsYWNpb246IGJvb2xlYW5cbiAgICBmbGV0ZTogYm9vbGVhblxuICAgIGFjY2Vzb3Jpb3M6IGJvb2xlYW5cbiAgfVxuICBhcGxpY2FjaW9uZXM6IHN0cmluZ1tdXG4gIHNpbm9uaW1vczogc3RyaW5nW11cbiAgcGFsYWJyYXNfY2xhdmU6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ290aXphY2lvblJ1bGUge1xuICBpZDogc3RyaW5nXG4gIG5vbWJyZTogc3RyaW5nXG4gIGNvbmRpY2lvbjogKHBhcnNlZDogYW55KSA9PiBib29sZWFuXG4gIGFjY2lvbjogKHBhcnNlZDogYW55LCBiYXNlOiBQcm9kdWN0KSA9PiB7XG4gICAgcHJlY2lvOiBudW1iZXJcbiAgICBkZXNjcmlwY2lvbjogc3RyaW5nXG4gICAgcmVjb21lbmRhY2lvbmVzOiBzdHJpbmdbXVxuICB9XG4gIHByaW9yaWRhZDogbnVtYmVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgS25vd2xlZGdlQmFzZSB7XG4gIHByb2R1Y3RvczogUHJvZHVjdFtdXG4gIHJlZ2xhczogQ290aXphY2lvblJ1bGVbXVxuICB6b25hczoge1xuICAgIFtrZXk6IHN0cmluZ106IHtcbiAgICAgIG5vbWJyZTogc3RyaW5nXG4gICAgICBmbGV0ZV9iYXNlOiBudW1iZXJcbiAgICAgIG11bHRpcGxpY2Fkb3I6IG51bWJlclxuICAgICAgb2JzZXJ2YWNpb25lcz86IHN0cmluZ1xuICAgIH1cbiAgfVxuICBzZXJ2aWNpb3M6IHtcbiAgICBpbnN0YWxhY2lvbjoge1xuICAgICAgYmFzZTogbnVtYmVyXG4gICAgICBwb3JfbTI6IG51bWJlclxuICAgICAgbWluaW1vOiBudW1iZXJcbiAgICB9XG4gICAgZmxldGU6IHtcbiAgICAgIGJhc2U6IG51bWJlclxuICAgICAgcG9yX2ttOiBudW1iZXJcbiAgICAgIG1pbmltbzogbnVtYmVyXG4gICAgfVxuICAgIGFjY2Vzb3Jpb3M6IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IHtcbiAgICAgICAgcHJlY2lvOiBudW1iZXJcbiAgICAgICAgZGVzY3JpcGNpb246IHN0cmluZ1xuICAgICAgICByZXF1ZXJpZG9fY29uPzogc3RyaW5nW11cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gQmFzZSBkZSBkYXRvcyBkZSBwcm9kdWN0b3MgQk1DXG5leHBvcnQgY29uc3QgUFJPRFVDVE9TX0JNQzogUHJvZHVjdFtdID0gW1xuICB7XG4gICAgaWQ6ICdpc29kZWNfNTAnLFxuICAgIG5vbWJyZTogJ0lzb2RlYyBFUFMnLFxuICAgIGNhdGVnb3JpYTogJ3BhbmVsZXMnLFxuICAgIHN1YmNhdGVnb3JpYTogJ2Fpc2xhbnRlJyxcbiAgICBkZXNjcmlwY2lvbjogJ1BhbmVsIGFpc2xhbnRlIGRlIHBvbGllc3RpcmVubyBleHBhbmRpZG8gKEVQUykgcGFyYSBwYXJlZGVzIHkgdGVjaG9zJyxcbiAgICBlc3BlY2lmaWNhY2lvbmVzOiB7XG4gICAgICBncm9zb3I6IFs1MCwgMTAwLCAxNTAsIDIwMF0sXG4gICAgICBjb2xvcmVzOiBbJ2JsYW5jbycsICdncmlzJywgJ3BlcnNvbmFsaXphZG8nXSxcbiAgICAgIGRpbWVuc2lvbmVzOiB7XG4gICAgICAgIGxhcmdvOiBbMzAwMCwgNjAwMCwgMTIwMDBdLFxuICAgICAgICBhbmNobzogWzEwMDAsIDEyMDBdLFxuICAgICAgICBhbHRvOiBbNTAsIDEwMCwgMTUwLCAyMDBdXG4gICAgICB9LFxuICAgICAgdW5pZGFkZXM6IFsnbTInLCAncGFuZWwnXVxuICAgIH0sXG4gICAgcHJlY2lvczoge1xuICAgICAgYmFzZTogNDUsIC8vIFVTRCBwb3IgbTJcbiAgICAgIHVuaWRhZDogJ20yJyxcbiAgICAgIHZhcmlhY2lvbmVzOiB7XG4gICAgICAgIGdyb3Nvcjoge1xuICAgICAgICAgIDUwOiAxLjAsXG4gICAgICAgICAgMTAwOiAxLjMsXG4gICAgICAgICAgMTUwOiAxLjYsXG4gICAgICAgICAgMjAwOiAyLjBcbiAgICAgICAgfSxcbiAgICAgICAgY29sb3I6IHtcbiAgICAgICAgICAnYmxhbmNvJzogMS4wLFxuICAgICAgICAgICdncmlzJzogMS4xLFxuICAgICAgICAgICdwZXJzb25hbGl6YWRvJzogMS4zXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNlcnZpY2lvczoge1xuICAgICAgaW5zdGFsYWNpb246IHRydWUsXG4gICAgICBmbGV0ZTogdHJ1ZSxcbiAgICAgIGFjY2Vzb3Jpb3M6IHRydWVcbiAgICB9LFxuICAgIGFwbGljYWNpb25lczogWydwYXJlZGVzJywgJ3RlY2hvcycsICdnYWxwb25lcycsICduYXZlcyBpbmR1c3RyaWFsZXMnXSxcbiAgICBzaW5vbmltb3M6IFsnaXNvZGVjJywgJ3BhbmVsIGVwcycsICdhaXNsYW50ZSBlcHMnLCAncGFuZWwgYWlzbGFudGUnXSxcbiAgICBwYWxhYnJhc19jbGF2ZTogWydpc29kZWMnLCAnZXBzJywgJ2Fpc2xhbnRlJywgJ3BhbmVsJywgJ3BvbGllc3RpcmVubyddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2lzb3Jvb2ZfMzAnLFxuICAgIG5vbWJyZTogJ0lzb3Jvb2YnLFxuICAgIGNhdGVnb3JpYTogJ3BhbmVsZXMnLFxuICAgIHN1YmNhdGVnb3JpYTogJ3RlY2hvJyxcbiAgICBkZXNjcmlwY2lvbjogJ1BhbmVsIGFpc2xhbnRlIHBhcmEgdGVjaG9zIGNvbiBhY2FiYWRvIG1ldMOhbGljbycsXG4gICAgZXNwZWNpZmljYWNpb25lczoge1xuICAgICAgZ3Jvc29yOiBbMzAsIDUwLCA4MF0sXG4gICAgICBjb2xvcmVzOiBbJ2JsYW5jbycsICdncmlzJywgJ3Jvam8nLCAnYXp1bCddLFxuICAgICAgZGltZW5zaW9uZXM6IHtcbiAgICAgICAgbGFyZ286IFszMDAwLCA2MDAwLCAxMjAwMF0sXG4gICAgICAgIGFuY2hvOiBbMTAwMCwgMTIwMF1cbiAgICAgIH0sXG4gICAgICB1bmlkYWRlczogWydtMicsICdwYW5lbCddXG4gICAgfSxcbiAgICBwcmVjaW9zOiB7XG4gICAgICBiYXNlOiA2NSxcbiAgICAgIHVuaWRhZDogJ20yJyxcbiAgICAgIHZhcmlhY2lvbmVzOiB7XG4gICAgICAgIGdyb3Nvcjoge1xuICAgICAgICAgIDMwOiAxLjAsXG4gICAgICAgICAgNTA6IDEuMixcbiAgICAgICAgICA4MDogMS41XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNlcnZpY2lvczoge1xuICAgICAgaW5zdGFsYWNpb246IHRydWUsXG4gICAgICBmbGV0ZTogdHJ1ZSxcbiAgICAgIGFjY2Vzb3Jpb3M6IHRydWVcbiAgICB9LFxuICAgIGFwbGljYWNpb25lczogWyd0ZWNob3MnLCAnY3ViaWVydGFzJywgJ2dhbHBvbmVzJ10sXG4gICAgc2lub25pbW9zOiBbJ2lzb3Jvb2YnLCAncGFuZWwgdGVjaG8nLCAnY3ViaWVydGEgYWlzbGFudGUnXSxcbiAgICBwYWxhYnJhc19jbGF2ZTogWydpc29yb29mJywgJ3RlY2hvJywgJ2N1YmllcnRhJywgJ3BhbmVsIHRlY2hvJ11cbiAgfSxcbiAge1xuICAgIGlkOiAnaXNvcGFuZWxfZ2VuZXJhbCcsXG4gICAgbm9tYnJlOiAnSXNvcGFuZWwnLFxuICAgIGNhdGVnb3JpYTogJ3BhbmVsZXMnLFxuICAgIHN1YmNhdGVnb3JpYTogJ2dlbmVyYWwnLFxuICAgIGRlc2NyaXBjaW9uOiAnUGFuZWwgYWlzbGFudGUgZGUgdXNvIGdlbmVyYWwgcGFyYSBjb25zdHJ1Y2Npw7NuJyxcbiAgICBlc3BlY2lmaWNhY2lvbmVzOiB7XG4gICAgICBncm9zb3I6IFs1MCwgMTAwLCAxNTAsIDIwMCwgMjUwXSxcbiAgICAgIGNvbG9yZXM6IFsnYmxhbmNvJywgJ2dyaXMnXSxcbiAgICAgIGRpbWVuc2lvbmVzOiB7XG4gICAgICAgIGxhcmdvOiBbMzAwMCwgNjAwMCwgMTIwMDBdLFxuICAgICAgICBhbmNobzogWzEwMDAsIDEyMDBdXG4gICAgICB9LFxuICAgICAgdW5pZGFkZXM6IFsnbTInLCAncGFuZWwnXVxuICAgIH0sXG4gICAgcHJlY2lvczoge1xuICAgICAgYmFzZTogNTUsXG4gICAgICB1bmlkYWQ6ICdtMicsXG4gICAgICB2YXJpYWNpb25lczoge1xuICAgICAgICBncm9zb3I6IHtcbiAgICAgICAgICA1MDogMS4wLFxuICAgICAgICAgIDEwMDogMS4yLFxuICAgICAgICAgIDE1MDogMS40LFxuICAgICAgICAgIDIwMDogMS43LFxuICAgICAgICAgIDI1MDogMi4wXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHNlcnZpY2lvczoge1xuICAgICAgaW5zdGFsYWNpb246IHRydWUsXG4gICAgICBmbGV0ZTogdHJ1ZSxcbiAgICAgIGFjY2Vzb3Jpb3M6IHRydWVcbiAgICB9LFxuICAgIGFwbGljYWNpb25lczogWydwYXJlZGVzJywgJ3RlY2hvcycsICdkaXZpc2lvbmVzJ10sXG4gICAgc2lub25pbW9zOiBbJ2lzb3BhbmVsJywgJ3BhbmVsIGdlbmVyYWwnLCAncGFuZWwgY29uc3RydWNjacOzbiddLFxuICAgIHBhbGFicmFzX2NsYXZlOiBbJ2lzb3BhbmVsJywgJ3BhbmVsJywgJ2NvbnN0cnVjY2nDs24nLCAnZ2VuZXJhbCddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2lzb3dhbGxfNTAnLFxuICAgIG5vbWJyZTogJ0lzb3dhbGwnLFxuICAgIGNhdGVnb3JpYTogJ3BhbmVsZXMnLFxuICAgIHN1YmNhdGVnb3JpYTogJ3BhcmVkJyxcbiAgICBkZXNjcmlwY2lvbjogJ1BhbmVsIGFpc2xhbnRlIGVzcGVjw61maWNvIHBhcmEgcGFyZWRlcyBleHRlcmlvcmVzJyxcbiAgICBlc3BlY2lmaWNhY2lvbmVzOiB7XG4gICAgICBncm9zb3I6IFs1MCwgMTAwLCAxNTBdLFxuICAgICAgY29sb3JlczogWydibGFuY28nLCAnZ3JpcyddLFxuICAgICAgZGltZW5zaW9uZXM6IHtcbiAgICAgICAgbGFyZ286IFszMDAwLCA2MDAwXSxcbiAgICAgICAgYW5jaG86IFsxMDAwLCAxMjAwXVxuICAgICAgfSxcbiAgICAgIHVuaWRhZGVzOiBbJ20yJywgJ3BhbmVsJ11cbiAgICB9LFxuICAgIHByZWNpb3M6IHtcbiAgICAgIGJhc2U6IDUwLFxuICAgICAgdW5pZGFkOiAnbTInLFxuICAgICAgdmFyaWFjaW9uZXM6IHtcbiAgICAgICAgZ3Jvc29yOiB7XG4gICAgICAgICAgNTA6IDEuMCxcbiAgICAgICAgICAxMDA6IDEuMyxcbiAgICAgICAgICAxNTA6IDEuNlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXJ2aWNpb3M6IHtcbiAgICAgIGluc3RhbGFjaW9uOiB0cnVlLFxuICAgICAgZmxldGU6IHRydWUsXG4gICAgICBhY2Nlc29yaW9zOiB0cnVlXG4gICAgfSxcbiAgICBhcGxpY2FjaW9uZXM6IFsncGFyZWRlcyBleHRlcmlvcmVzJywgJ2ZhY2hhZGFzJywgJ2RpdmlzaW9uZXMnXSxcbiAgICBzaW5vbmltb3M6IFsnaXNvd2FsbCcsICdwYW5lbCBwYXJlZCcsICdwYXJlZCBhaXNsYW50ZSddLFxuICAgIHBhbGFicmFzX2NsYXZlOiBbJ2lzb3dhbGwnLCAncGFyZWQnLCAnZmFjaGFkYScsICdleHRlcmlvciddXG4gIH0sXG4gIHtcbiAgICBpZDogJ2NoYXBhX2dhbHZhbml6YWRhJyxcbiAgICBub21icmU6ICdDaGFwYSBHYWx2YW5pemFkYScsXG4gICAgY2F0ZWdvcmlhOiAnY2hhcGFzJyxcbiAgICBzdWJjYXRlZ29yaWE6ICdtZXRhbGljYScsXG4gICAgZGVzY3JpcGNpb246ICdDaGFwYSBkZSBhY2VybyBnYWx2YW5pemFkbyBwYXJhIHRlY2hvcyB5IHBhcmVkZXMnLFxuICAgIGVzcGVjaWZpY2FjaW9uZXM6IHtcbiAgICAgIGdyb3NvcjogWzAuMzAsIDAuNDEsIDAuNTBdLFxuICAgICAgY29sb3JlczogWydnYWx2YW5pemFkbycsICdwaW50YWRvJ10sXG4gICAgICBkaW1lbnNpb25lczoge1xuICAgICAgICBsYXJnbzogWzMwMDAsIDYwMDAsIDEyMDAwXSxcbiAgICAgICAgYW5jaG86IFsxMDAwLCAxMjAwXVxuICAgICAgfSxcbiAgICAgIHVuaWRhZGVzOiBbJ20yJywgJ2NoYXBhJ11cbiAgICB9LFxuICAgIHByZWNpb3M6IHtcbiAgICAgIGJhc2U6IDI1LFxuICAgICAgdW5pZGFkOiAnbTInLFxuICAgICAgdmFyaWFjaW9uZXM6IHtcbiAgICAgICAgZ3Jvc29yOiB7XG4gICAgICAgICAgMC4zMDogMS4wLFxuICAgICAgICAgIDAuNDE6IDEuMixcbiAgICAgICAgICAwLjUwOiAxLjRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgc2VydmljaW9zOiB7XG4gICAgICBpbnN0YWxhY2lvbjogdHJ1ZSxcbiAgICAgIGZsZXRlOiB0cnVlLFxuICAgICAgYWNjZXNvcmlvczogdHJ1ZVxuICAgIH0sXG4gICAgYXBsaWNhY2lvbmVzOiBbJ3RlY2hvcycsICdwYXJlZGVzJywgJ2dhbHBvbmVzJ10sXG4gICAgc2lub25pbW9zOiBbJ2NoYXBhJywgJ2dhbHZhbml6YWRhJywgJ2FjZXJvJywgJ3RlY2hvIG1ldMOhbGljbyddLFxuICAgIHBhbGFicmFzX2NsYXZlOiBbJ2NoYXBhJywgJ2dhbHZhbml6YWRhJywgJ2FjZXJvJywgJ21ldGFsJ11cbiAgfSxcbiAge1xuICAgIGlkOiAnY2FsYW1lcmlhX2VzdHJ1Y3R1cmEnLFxuICAgIG5vbWJyZTogJ0NhbGFtZXLDrWEnLFxuICAgIGNhdGVnb3JpYTogJ2NhbGFtZXJpYScsXG4gICAgc3ViY2F0ZWdvcmlhOiAnZXN0cnVjdHVyYScsXG4gICAgZGVzY3JpcGNpb246ICdFc3RydWN0dXJhIG1ldMOhbGljYSBwYXJhIHNvcG9ydGUgZGUgcGFuZWxlcyB5IGNoYXBhcycsXG4gICAgZXNwZWNpZmljYWNpb25lczoge1xuICAgICAgZ3Jvc29yOiBbMS41LCAyLjAsIDIuNV0sXG4gICAgICBjb2xvcmVzOiBbJ2dhbHZhbml6YWRvJywgJ3BpbnRhZG8nXSxcbiAgICAgIGRpbWVuc2lvbmVzOiB7XG4gICAgICAgIGxhcmdvOiBbMzAwMCwgNjAwMCwgMTIwMDBdXG4gICAgICB9LFxuICAgICAgdW5pZGFkZXM6IFsnbWwnLCAna2cnXVxuICAgIH0sXG4gICAgcHJlY2lvczoge1xuICAgICAgYmFzZTogMTUsXG4gICAgICB1bmlkYWQ6ICdtbCcsXG4gICAgICB2YXJpYWNpb25lczoge1xuICAgICAgICBncm9zb3I6IHtcbiAgICAgICAgICAxLjU6IDEuMCxcbiAgICAgICAgICAyLjA6IDEuMyxcbiAgICAgICAgICAyLjU6IDEuNlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXJ2aWNpb3M6IHtcbiAgICAgIGluc3RhbGFjaW9uOiB0cnVlLFxuICAgICAgZmxldGU6IHRydWUsXG4gICAgICBhY2Nlc29yaW9zOiBmYWxzZVxuICAgIH0sXG4gICAgYXBsaWNhY2lvbmVzOiBbJ2VzdHJ1Y3R1cmEnLCAnc29wb3J0ZScsICdnYWxwb25lcyddLFxuICAgIHNpbm9uaW1vczogWydjYWxhbWVyaWEnLCAnZXN0cnVjdHVyYScsICdwZXJmaWwnLCAndmlnYSddLFxuICAgIHBhbGFicmFzX2NsYXZlOiBbJ2NhbGFtZXJpYScsICdlc3RydWN0dXJhJywgJ3BlcmZpbCcsICdzb3BvcnRlJ11cbiAgfVxuXVxuXG4vLyBab25hcyBkZSBmbGV0ZSBlbiBVcnVndWF5XG5leHBvcnQgY29uc3QgWk9OQVNfRkxFVEUgPSB7XG4gICdtb250ZXZpZGVvJzoge1xuICAgIG5vbWJyZTogJ01vbnRldmlkZW8nLFxuICAgIGZsZXRlX2Jhc2U6IDUwLFxuICAgIG11bHRpcGxpY2Fkb3I6IDEuMCxcbiAgICBvYnNlcnZhY2lvbmVzOiAnWm9uYSBtZXRyb3BvbGl0YW5hJ1xuICB9LFxuICAnY2FuZWxvbmVzJzoge1xuICAgIG5vbWJyZTogJ0NhbmVsb25lcycsXG4gICAgZmxldGVfYmFzZTogODAsXG4gICAgbXVsdGlwbGljYWRvcjogMS4yLFxuICAgIG9ic2VydmFjaW9uZXM6ICdJbmNsdXllIFBhbmRvLCBMYXMgUGllZHJhcywgQ2l1ZGFkIGRlIGxhIENvc3RhJ1xuICB9LFxuICAnbWFsZG9uYWRvJzoge1xuICAgIG5vbWJyZTogJ01hbGRvbmFkbycsXG4gICAgZmxldGVfYmFzZTogMTIwLFxuICAgIG11bHRpcGxpY2Fkb3I6IDEuNSxcbiAgICBvYnNlcnZhY2lvbmVzOiAnSW5jbHV5ZSBQdW50YSBkZWwgRXN0ZSwgUGlyacOhcG9saXMnXG4gIH0sXG4gICdyaXZlcmEnOiB7XG4gICAgbm9tYnJlOiAnUml2ZXJhJyxcbiAgICBmbGV0ZV9iYXNlOiAyMDAsXG4gICAgbXVsdGlwbGljYWRvcjogMi4wLFxuICAgIG9ic2VydmFjaW9uZXM6ICdab25hIGZyb250ZXJpemEnXG4gIH0sXG4gICdhcnRpZ2FzJzoge1xuICAgIG5vbWJyZTogJ0FydGlnYXMnLFxuICAgIGZsZXRlX2Jhc2U6IDI1MCxcbiAgICBtdWx0aXBsaWNhZG9yOiAyLjUsXG4gICAgb2JzZXJ2YWNpb25lczogJ1pvbmEgbm9ydGUnXG4gIH0sXG4gICdmcmF5X2JlbnRvcyc6IHtcbiAgICBub21icmU6ICdGcmF5IEJlbnRvcycsXG4gICAgZmxldGVfYmFzZTogMTgwLFxuICAgIG11bHRpcGxpY2Fkb3I6IDEuOCxcbiAgICBvYnNlcnZhY2lvbmVzOiAnUsOtbyBOZWdybydcbiAgfSxcbiAgJ2NvbG9uaWEnOiB7XG4gICAgbm9tYnJlOiAnQ29sb25pYScsXG4gICAgZmxldGVfYmFzZTogMTUwLFxuICAgIG11bHRpcGxpY2Fkb3I6IDEuNixcbiAgICBvYnNlcnZhY2lvbmVzOiAnQ29sb25pYSBkZWwgU2FjcmFtZW50bydcbiAgfVxufVxuXG4vLyBTZXJ2aWNpb3MgYWRpY2lvbmFsZXNcbmV4cG9ydCBjb25zdCBTRVJWSUNJT1NfQURJQ0lPTkFMRVMgPSB7XG4gIGluc3RhbGFjaW9uOiB7XG4gICAgYmFzZTogMTAwLFxuICAgIHBvcl9tMjogMTUsXG4gICAgbWluaW1vOiAyMDBcbiAgfSxcbiAgZmxldGU6IHtcbiAgICBiYXNlOiA1MCxcbiAgICBwb3Jfa206IDIuNSxcbiAgICBtaW5pbW86IDgwXG4gIH0sXG4gIGFjY2Vzb3Jpb3M6IHtcbiAgICAnYmFiZXRhcyc6IHtcbiAgICAgIHByZWNpbzogMjUsXG4gICAgICBkZXNjcmlwY2lvbjogJ0JhYmV0YXMgZGUgdGVybWluYWNpw7NuJyxcbiAgICAgIHJlcXVlcmlkb19jb246IFsnaXNvZGVjJywgJ2lzb3Jvb2YnLCAnaXNvcGFuZWwnXVxuICAgIH0sXG4gICAgJ2dvdGVybyc6IHtcbiAgICAgIHByZWNpbzogMzAsXG4gICAgICBkZXNjcmlwY2lvbjogJ0dvdGVybyBmcm9udGFsJyxcbiAgICAgIHJlcXVlcmlkb19jb246IFsnaXNvcm9vZicsICdjaGFwYSddXG4gICAgfSxcbiAgICAncmVtYXRlcyc6IHtcbiAgICAgIHByZWNpbzogMjAsXG4gICAgICBkZXNjcmlwY2lvbjogJ1JlbWF0ZXMgZGUgZXNxdWluYScsXG4gICAgICByZXF1ZXJpZG9fY29uOiBbJ2lzb2RlYycsICdpc29wYW5lbCcsICdpc293YWxsJ11cbiAgICB9LFxuICAgICdqdW50YXMnOiB7XG4gICAgICBwcmVjaW86IDE1LFxuICAgICAgZGVzY3JpcGNpb246ICdKdW50YXMgZGUgZGlsYXRhY2nDs24nLFxuICAgICAgcmVxdWVyaWRvX2NvbjogWydpc29kZWMnLCAnaXNvcm9vZicsICdpc29wYW5lbCddXG4gICAgfVxuICB9XG59XG5cbi8vIFJlZ2xhcyBkZSBjb3RpemFjacOzbiBpbnRlbGlnZW50ZXNcbmV4cG9ydCBjb25zdCBSRUdMQVNfQ09USVpBQ0lPTjogQ290aXphY2lvblJ1bGVbXSA9IFtcbiAge1xuICAgIGlkOiAnZ2FscG9uX2NvbXBsZXRvJyxcbiAgICBub21icmU6ICdHYWxww7NuIENvbXBsZXRvJyxcbiAgICBjb25kaWNpb246IChwYXJzZWQpID0+IFxuICAgICAgcGFyc2VkLmRpbWVuc2lvbmVzPy5sYXJnbyAmJiBwYXJzZWQuZGltZW5zaW9uZXM/LmFuY2hvICYmIHBhcnNlZC5kaW1lbnNpb25lcz8uYWx0byAmJlxuICAgICAgcGFyc2VkLnByb2R1Y3RvPy50aXBvPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpc29kZWMnKSxcbiAgICBhY2Npb246IChwYXJzZWQsIGJhc2UpID0+IHtcbiAgICAgIGNvbnN0IGFyZWEgPSAocGFyc2VkLmRpbWVuc2lvbmVzLmxhcmdvICogcGFyc2VkLmRpbWVuc2lvbmVzLmFuY2hvKSAvIDEwMDAwIC8vIG0yXG4gICAgICBjb25zdCBwcmVjaW8gPSBhcmVhICogYmFzZS5wcmVjaW9zLmJhc2UgKiAoYmFzZS5wcmVjaW9zLnZhcmlhY2lvbmVzPy5ncm9zb3I/LltwYXJzZWQucHJvZHVjdG8uZ3Jvc29yXSB8fCAxKVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmVjaW86IE1hdGgucm91bmQocHJlY2lvKSxcbiAgICAgICAgZGVzY3JpcGNpb246IGBHYWxww7NuIGNvbXBsZXRvIGRlICR7cGFyc2VkLmRpbWVuc2lvbmVzLmxhcmdvfW0geCAke3BhcnNlZC5kaW1lbnNpb25lcy5hbmNob31tIHggJHtwYXJzZWQuZGltZW5zaW9uZXMuYWx0b31tYCxcbiAgICAgICAgcmVjb21lbmRhY2lvbmVzOiBbXG4gICAgICAgICAgJ0luY2x1aXIgZXN0cnVjdHVyYSBkZSBjYWxhbWVyaWEnLFxuICAgICAgICAgICdDb25zaWRlcmFyIGFjY2Vzb3Jpb3MgZGUgdGVybWluYWNpw7NuJyxcbiAgICAgICAgICAnVmVyaWZpY2FyIGNpbWVudGFjacOzbiBleGlzdGVudGUnXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9LFxuICAgIHByaW9yaWRhZDogMVxuICB9LFxuICB7XG4gICAgaWQ6ICd0ZWNob19zb2xvJyxcbiAgICBub21icmU6ICdTb2xvIFRlY2hvJyxcbiAgICBjb25kaWNpb246IChwYXJzZWQpID0+IFxuICAgICAgcGFyc2VkLmNvbnN1bHRhX29yaWdpbmFsPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0ZWNobycpICYmXG4gICAgICAhcGFyc2VkLmNvbnN1bHRhX29yaWdpbmFsPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwYXJlZCcpLFxuICAgIGFjY2lvbjogKHBhcnNlZCwgYmFzZSkgPT4ge1xuICAgICAgY29uc3QgYXJlYSA9IHBhcnNlZC5kaW1lbnNpb25lcz8uYXJlYV9tMiB8fCA1MCAvLyBkZWZhdWx0IDUwbTJcbiAgICAgIGNvbnN0IHByZWNpbyA9IGFyZWEgKiBiYXNlLnByZWNpb3MuYmFzZVxuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcmVjaW86IE1hdGgucm91bmQocHJlY2lvKSxcbiAgICAgICAgZGVzY3JpcGNpb246IGBDdWJpZXJ0YSBkZSB0ZWNobyBkZSAke2FyZWF9bcKyYCxcbiAgICAgICAgcmVjb21lbmRhY2lvbmVzOiBbXG4gICAgICAgICAgJ1ZlcmlmaWNhciBpbmNsaW5hY2nDs24gbcOtbmltYSA1JScsXG4gICAgICAgICAgJ0luY2x1aXIgc2lzdGVtYSBkZSBkcmVuYWplJyxcbiAgICAgICAgICAnQ29uc2lkZXJhciBhaXNsYWNpw7NuIHTDqXJtaWNhJ1xuICAgICAgICBdXG4gICAgICB9XG4gICAgfSxcbiAgICBwcmlvcmlkYWQ6IDJcbiAgfSxcbiAge1xuICAgIGlkOiAncGFyZWRlc19leHRlcmlvcmVzJyxcbiAgICBub21icmU6ICdQYXJlZGVzIEV4dGVyaW9yZXMnLFxuICAgIGNvbmRpY2lvbjogKHBhcnNlZCkgPT4gXG4gICAgICBwYXJzZWQuY29uc3VsdGFfb3JpZ2luYWw/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BhcmVkJykgJiZcbiAgICAgIHBhcnNlZC5wcm9kdWN0bz8udGlwbz8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaXNvd2FsbCcpLFxuICAgIGFjY2lvbjogKHBhcnNlZCwgYmFzZSkgPT4ge1xuICAgICAgY29uc3QgYXJlYSA9IHBhcnNlZC5kaW1lbnNpb25lcz8uYXJlYV9tMiB8fCAxMDAgLy8gZGVmYXVsdCAxMDBtMlxuICAgICAgY29uc3QgcHJlY2lvID0gYXJlYSAqIGJhc2UucHJlY2lvcy5iYXNlXG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByZWNpbzogTWF0aC5yb3VuZChwcmVjaW8pLFxuICAgICAgICBkZXNjcmlwY2lvbjogYFBhcmVkZXMgZXh0ZXJpb3JlcyBkZSAke2FyZWF9bcKyYCxcbiAgICAgICAgcmVjb21lbmRhY2lvbmVzOiBbXG4gICAgICAgICAgJ0luY2x1aXIgc2lzdGVtYSBkZSBmaWphY2nDs24nLFxuICAgICAgICAgICdDb25zaWRlcmFyIGp1bnRhcyBkZSBkaWxhdGFjacOzbicsXG4gICAgICAgICAgJ1ZlcmlmaWNhciByZXNpc3RlbmNpYSBhbCB2aWVudG8nXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9LFxuICAgIHByaW9yaWRhZDogM1xuICB9XG5dXG5cbi8vIEJhc2UgZGUgY29ub2NpbWllbnRvIGNvbXBsZXRhXG5leHBvcnQgY29uc3QgS05PV0xFREdFX0JBU0U6IEtub3dsZWRnZUJhc2UgPSB7XG4gIHByb2R1Y3RvczogUFJPRFVDVE9TX0JNQyxcbiAgcmVnbGFzOiBSRUdMQVNfQ09USVpBQ0lPTixcbiAgem9uYXM6IFpPTkFTX0ZMRVRFLFxuICBzZXJ2aWNpb3M6IFNFUlZJQ0lPU19BRElDSU9OQUxFU1xufVxuXG4vLyBGdW5jacOzbiBwYXJhIGJ1c2NhciBwcm9kdWN0b3MgcG9yIGNvbnN1bHRhXG5leHBvcnQgZnVuY3Rpb24gYnVzY2FyUHJvZHVjdG9zKGNvbnN1bHRhOiBzdHJpbmcpOiBQcm9kdWN0W10ge1xuICBjb25zdCBjb25zdWx0YUxvd2VyID0gY29uc3VsdGEudG9Mb3dlckNhc2UoKVxuICBcbiAgcmV0dXJuIFBST0RVQ1RPU19CTUMuZmlsdGVyKHByb2R1Y3RvID0+IFxuICAgIHByb2R1Y3RvLnNpbm9uaW1vcy5zb21lKHNpbm9uaW1vID0+IGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMoc2lub25pbW8udG9Mb3dlckNhc2UoKSkpIHx8XG4gICAgcHJvZHVjdG8ucGFsYWJyYXNfY2xhdmUuc29tZShwYWxhYnJhID0+IGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMocGFsYWJyYS50b0xvd2VyQ2FzZSgpKSkgfHxcbiAgICBwcm9kdWN0by5ub21icmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhjb25zdWx0YUxvd2VyKVxuICApXG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgY2FsY3VsYXIgcHJlY2lvIGJhc2VcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhclByZWNpb0Jhc2UocHJvZHVjdG86IFByb2R1Y3QsIHBhcnNlZDogYW55KTogbnVtYmVyIHtcbiAgbGV0IHByZWNpbyA9IHByb2R1Y3RvLnByZWNpb3MuYmFzZVxuICBcbiAgLy8gQXBsaWNhciB2YXJpYWNpb25lcyBwb3IgZ3Jvc29yXG4gIGlmIChwYXJzZWQucHJvZHVjdG8/Lmdyb3NvciAmJiBwcm9kdWN0by5wcmVjaW9zLnZhcmlhY2lvbmVzPy5ncm9zb3IpIHtcbiAgICBjb25zdCBncm9zb3IgPSBwYXJzZUludChwYXJzZWQucHJvZHVjdG8uZ3Jvc29yLnJlcGxhY2UoJ21tJywgJycpKVxuICAgIGNvbnN0IG11bHRpcGxpY2Fkb3IgPSBwcm9kdWN0by5wcmVjaW9zLnZhcmlhY2lvbmVzLmdyb3Nvcltncm9zb3JdIHx8IDFcbiAgICBwcmVjaW8gKj0gbXVsdGlwbGljYWRvclxuICB9XG4gIFxuICAvLyBBcGxpY2FyIHZhcmlhY2lvbmVzIHBvciBjb2xvclxuICBpZiAocGFyc2VkLnByb2R1Y3RvPy5jb2xvciAmJiBwcm9kdWN0by5wcmVjaW9zLnZhcmlhY2lvbmVzPy5jb2xvcikge1xuICAgIGNvbnN0IG11bHRpcGxpY2Fkb3IgPSBwcm9kdWN0by5wcmVjaW9zLnZhcmlhY2lvbmVzLmNvbG9yW3BhcnNlZC5wcm9kdWN0by5jb2xvcl0gfHwgMVxuICAgIHByZWNpbyAqPSBtdWx0aXBsaWNhZG9yXG4gIH1cbiAgXG4gIHJldHVybiBwcmVjaW9cbn1cblxuLy8gRnVuY2nDs24gcGFyYSBjYWxjdWxhciBzZXJ2aWNpb3MgYWRpY2lvbmFsZXNcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhclNlcnZpY2lvc0FkaWNpb25hbGVzKHBhcnNlZDogYW55LCB6b25hOiBzdHJpbmcgPSAnbW9udGV2aWRlbycpOiB7XG4gIGluc3RhbGFjaW9uOiBudW1iZXJcbiAgZmxldGU6IG51bWJlclxuICBhY2Nlc29yaW9zOiBudW1iZXJcbiAgdG90YWw6IG51bWJlclxufSB7XG4gIGNvbnN0IGFyZWEgPSBwYXJzZWQuZGltZW5zaW9uZXM/LmFyZWFfbTIgfHwgNTBcbiAgY29uc3Qgem9uYURhdGEgPSBaT05BU19GTEVURVt6b25hIGFzIGtleW9mIHR5cGVvZiBaT05BU19GTEVURV0gfHwgWk9OQVNfRkxFVEUubW9udGV2aWRlb1xuICBcbiAgY29uc3QgaW5zdGFsYWNpb24gPSBNYXRoLm1heChcbiAgICBTRVJWSUNJT1NfQURJQ0lPTkFMRVMuaW5zdGFsYWNpb24uYmFzZSArIChhcmVhICogU0VSVklDSU9TX0FESUNJT05BTEVTLmluc3RhbGFjaW9uLnBvcl9tMiksXG4gICAgU0VSVklDSU9TX0FESUNJT05BTEVTLmluc3RhbGFjaW9uLm1pbmltb1xuICApXG4gIFxuICBjb25zdCBmbGV0ZSA9IHpvbmFEYXRhLmZsZXRlX2Jhc2UgKiB6b25hRGF0YS5tdWx0aXBsaWNhZG9yXG4gIFxuICBsZXQgYWNjZXNvcmlvcyA9IDBcbiAgaWYgKHBhcnNlZC5zZXJ2aWNpb3M/LmFjY2Vzb3Jpb3MpIHtcbiAgICAvLyBDYWxjdWxhciBhY2Nlc29yaW9zIHNlZ8O6biBlbCBwcm9kdWN0b1xuICAgIGNvbnN0IHByb2R1Y3RvID0gYnVzY2FyUHJvZHVjdG9zKHBhcnNlZC5wcm9kdWN0bz8udGlwbyB8fCAnJylbMF1cbiAgICBpZiAocHJvZHVjdG8pIHtcbiAgICAgIE9iamVjdC52YWx1ZXMoU0VSVklDSU9TX0FESUNJT05BTEVTLmFjY2Vzb3Jpb3MpLmZvckVhY2goYWNjID0+IHtcbiAgICAgICAgaWYgKGFjYy5yZXF1ZXJpZG9fY29uPy5zb21lKHByb2QgPT4gcHJvZHVjdG8uc2lub25pbW9zLmluY2x1ZGVzKHByb2QpKSkge1xuICAgICAgICAgIGFjY2Vzb3Jpb3MgKz0gYWNjLnByZWNpb1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBpbnN0YWxhY2lvbjogTWF0aC5yb3VuZChpbnN0YWxhY2lvbiksXG4gICAgZmxldGU6IE1hdGgucm91bmQoZmxldGUpLFxuICAgIGFjY2Vzb3Jpb3M6IE1hdGgucm91bmQoYWNjZXNvcmlvcyksXG4gICAgdG90YWw6IE1hdGgucm91bmQoaW5zdGFsYWNpb24gKyBmbGV0ZSArIGFjY2Vzb3Jpb3MpXG4gIH1cbn1cblxuLy8gRnVuY2nDs24gcGFyYSBnZW5lcmFyIGNvdGl6YWNpw7NuIGNvbXBsZXRhXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhckNvdGl6YWNpb24ocGFyc2VkOiBhbnksIHpvbmE6IHN0cmluZyA9ICdtb250ZXZpZGVvJyk6IHtcbiAgcHJvZHVjdG86IFByb2R1Y3QgfCBudWxsXG4gIHByZWNpb19iYXNlOiBudW1iZXJcbiAgYXJlYTogbnVtYmVyXG4gIHNlcnZpY2lvczogYW55XG4gIHRvdGFsOiBudW1iZXJcbiAgcmVjb21lbmRhY2lvbmVzOiBzdHJpbmdbXVxuICBkZXNjcmlwY2lvbjogc3RyaW5nXG59IHtcbiAgY29uc3QgcHJvZHVjdG9zID0gYnVzY2FyUHJvZHVjdG9zKHBhcnNlZC5wcm9kdWN0bz8udGlwbyB8fCBwYXJzZWQuY29uc3VsdGFfb3JpZ2luYWwgfHwgJycpXG4gIGNvbnN0IHByb2R1Y3RvID0gcHJvZHVjdG9zWzBdIHx8IG51bGxcbiAgXG4gIGlmICghcHJvZHVjdG8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvZHVjdG86IG51bGwsXG4gICAgICBwcmVjaW9fYmFzZTogMCxcbiAgICAgIGFyZWE6IDAsXG4gICAgICBzZXJ2aWNpb3M6IHsgaW5zdGFsYWNpb246IDAsIGZsZXRlOiAwLCBhY2Nlc29yaW9zOiAwLCB0b3RhbDogMCB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByZWNvbWVuZGFjaW9uZXM6IFsnUHJvZHVjdG8gbm8gaWRlbnRpZmljYWRvLiBDb250YWN0YXIgcGFyYSBjb3RpemFjacOzbiBwZXJzb25hbGl6YWRhLiddLFxuICAgICAgZGVzY3JpcGNpb246ICdQcm9kdWN0byBubyBlbmNvbnRyYWRvIGVuIGJhc2UgZGUgZGF0b3MnXG4gICAgfVxuICB9XG4gIFxuICBjb25zdCBhcmVhID0gcGFyc2VkLmRpbWVuc2lvbmVzPy5hcmVhX20yIHx8IFxuICAgIChwYXJzZWQuZGltZW5zaW9uZXM/LmxhcmdvICYmIHBhcnNlZC5kaW1lbnNpb25lcz8uYW5jaG8gPyBcbiAgICAgIChwYXJzZWQuZGltZW5zaW9uZXMubGFyZ28gKiBwYXJzZWQuZGltZW5zaW9uZXMuYW5jaG8pIC8gMTAwMDAgOiA1MClcbiAgXG4gIGNvbnN0IHByZWNpb19iYXNlID0gY2FsY3VsYXJQcmVjaW9CYXNlKHByb2R1Y3RvLCBwYXJzZWQpICogYXJlYVxuICBjb25zdCBzZXJ2aWNpb3MgPSBjYWxjdWxhclNlcnZpY2lvc0FkaWNpb25hbGVzKHBhcnNlZCwgem9uYSlcbiAgXG4gIC8vIEFwbGljYXIgcmVnbGFzIGRlIGNvdGl6YWNpw7NuXG4gIGxldCByZWNvbWVuZGFjaW9uZXM6IHN0cmluZ1tdID0gW11cbiAgbGV0IGRlc2NyaXBjaW9uID0gYCR7cHJvZHVjdG8ubm9tYnJlfSAtICR7YXJlYX1twrJgXG4gIFxuICBmb3IgKGNvbnN0IHJlZ2xhIG9mIFJFR0xBU19DT1RJWkFDSU9OKSB7XG4gICAgaWYgKHJlZ2xhLmNvbmRpY2lvbihwYXJzZWQpKSB7XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSByZWdsYS5hY2Npb24ocGFyc2VkLCBwcm9kdWN0bylcbiAgICAgIHJlY29tZW5kYWNpb25lcyA9IFsuLi5yZWNvbWVuZGFjaW9uZXMsIC4uLnJlc3VsdGFkby5yZWNvbWVuZGFjaW9uZXNdXG4gICAgICBkZXNjcmlwY2lvbiA9IHJlc3VsdGFkby5kZXNjcmlwY2lvblxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHRvdGFsID0gTWF0aC5yb3VuZChwcmVjaW9fYmFzZSArIHNlcnZpY2lvcy50b3RhbClcbiAgXG4gIHJldHVybiB7XG4gICAgcHJvZHVjdG8sXG4gICAgcHJlY2lvX2Jhc2U6IE1hdGgucm91bmQocHJlY2lvX2Jhc2UpLFxuICAgIGFyZWE6IE1hdGgucm91bmQoYXJlYSAqIDEwMCkgLyAxMDAsXG4gICAgc2VydmljaW9zLFxuICAgIHRvdGFsLFxuICAgIHJlY29tZW5kYWNpb25lcyxcbiAgICBkZXNjcmlwY2lvblxuICB9XG59XG4iXSwibmFtZXMiOlsiUFJPRFVDVE9TX0JNQyIsImlkIiwibm9tYnJlIiwiY2F0ZWdvcmlhIiwic3ViY2F0ZWdvcmlhIiwiZGVzY3JpcGNpb24iLCJlc3BlY2lmaWNhY2lvbmVzIiwiZ3Jvc29yIiwiY29sb3JlcyIsImRpbWVuc2lvbmVzIiwibGFyZ28iLCJhbmNobyIsImFsdG8iLCJ1bmlkYWRlcyIsInByZWNpb3MiLCJiYXNlIiwidW5pZGFkIiwidmFyaWFjaW9uZXMiLCJjb2xvciIsInNlcnZpY2lvcyIsImluc3RhbGFjaW9uIiwiZmxldGUiLCJhY2Nlc29yaW9zIiwiYXBsaWNhY2lvbmVzIiwic2lub25pbW9zIiwicGFsYWJyYXNfY2xhdmUiLCJaT05BU19GTEVURSIsImZsZXRlX2Jhc2UiLCJtdWx0aXBsaWNhZG9yIiwib2JzZXJ2YWNpb25lcyIsIlNFUlZJQ0lPU19BRElDSU9OQUxFUyIsInBvcl9tMiIsIm1pbmltbyIsInBvcl9rbSIsInByZWNpbyIsInJlcXVlcmlkb19jb24iLCJSRUdMQVNfQ09USVpBQ0lPTiIsImNvbmRpY2lvbiIsInBhcnNlZCIsInByb2R1Y3RvIiwidGlwbyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJhY2Npb24iLCJhcmVhIiwiTWF0aCIsInJvdW5kIiwicmVjb21lbmRhY2lvbmVzIiwicHJpb3JpZGFkIiwiY29uc3VsdGFfb3JpZ2luYWwiLCJhcmVhX20yIiwiS05PV0xFREdFX0JBU0UiLCJwcm9kdWN0b3MiLCJyZWdsYXMiLCJ6b25hcyIsImJ1c2NhclByb2R1Y3RvcyIsImNvbnN1bHRhIiwiY29uc3VsdGFMb3dlciIsImZpbHRlciIsInNvbWUiLCJzaW5vbmltbyIsInBhbGFicmEiLCJjYWxjdWxhclByZWNpb0Jhc2UiLCJwYXJzZUludCIsInJlcGxhY2UiLCJjYWxjdWxhclNlcnZpY2lvc0FkaWNpb25hbGVzIiwiem9uYSIsInpvbmFEYXRhIiwibW9udGV2aWRlbyIsIm1heCIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJhY2MiLCJwcm9kIiwidG90YWwiLCJnZW5lcmFyQ290aXphY2lvbiIsInByZWNpb19iYXNlIiwicmVnbGEiLCJyZXN1bHRhZG8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/knowledge-base.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeConnection: () => (/* binding */ closeConnection),\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   getDatabase: () => (/* binding */ getDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nlet client;\nlet db;\nasync function connectToDatabase() {\n    if (client && db) {\n        return {\n            client,\n            db\n        };\n    }\n    if (!process.env.MONGODB_URI) {\n        throw new Error(\"MONGODB_URI is not defined in environment variables\");\n    }\n    try {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(process.env.MONGODB_URI, {\n            maxPoolSize: 10,\n            serverSelectionTimeoutMS: 5000,\n            socketTimeoutMS: 45000\n        });\n        await client.connect();\n        db = client.db(\"whatsapp_quotes\");\n        console.log(\"Connected to MongoDB successfully\");\n        return {\n            client,\n            db\n        };\n    } catch (error) {\n        console.error(\"Error connecting to MongoDB:\", error);\n        throw error;\n    }\n}\nasync function getDatabase() {\n    if (!db) {\n        await connectToDatabase();\n    }\n    return db;\n}\nasync function closeConnection() {\n    if (client) {\n        await client.close();\n        console.log(\"MongoDB connection closed\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBeUM7QUFFekMsSUFBSUM7QUFDSixJQUFJQztBQUVHLGVBQWVDO0lBQ3BCLElBQUlGLFVBQVVDLElBQUk7UUFDaEIsT0FBTztZQUFFRDtZQUFRQztRQUFHO0lBQ3RCO0lBRUEsSUFBSSxDQUFDRSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxJQUFJO1FBQ0ZOLFNBQVMsSUFBSUQsZ0RBQVdBLENBQUNJLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxFQUFFO1lBQ2hERSxhQUFhO1lBQ2JDLDBCQUEwQjtZQUMxQkMsaUJBQWlCO1FBQ25CO1FBRUEsTUFBTVQsT0FBT1UsT0FBTztRQUNwQlQsS0FBS0QsT0FBT0MsRUFBRSxDQUFDO1FBRWZVLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87WUFBRVo7WUFBUUM7UUFBRztJQUN0QixFQUFFLE9BQU9ZLE9BQU87UUFDZEYsUUFBUUUsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsTUFBTUE7SUFDUjtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsSUFBSSxDQUFDYixJQUFJO1FBQ1AsTUFBTUM7SUFDUjtJQUNBLE9BQU9EO0FBQ1Q7QUFFTyxlQUFlYztJQUNwQixJQUFJZixRQUFRO1FBQ1YsTUFBTUEsT0FBT2dCLEtBQUs7UUFDbEJMLFFBQVFDLEdBQUcsQ0FBQztJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9saWIvbW9uZ29kYi50cz81M2MyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50LCBEYiB9IGZyb20gJ21vbmdvZGInXG5cbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50XG5sZXQgZGI6IERiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcbiAgaWYgKGNsaWVudCAmJiBkYikge1xuICAgIHJldHVybiB7IGNsaWVudCwgZGIgfVxuICB9XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTU9OR09EQl9VUkkgaXMgbm90IGRlZmluZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJylcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJLCB7XG4gICAgICBtYXhQb29sU2l6ZTogMTAsXG4gICAgICBzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVM6IDUwMDAsXG4gICAgICBzb2NrZXRUaW1lb3V0TVM6IDQ1MDAwLFxuICAgIH0pXG5cbiAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpXG4gICAgZGIgPSBjbGllbnQuZGIoJ3doYXRzYXBwX3F1b3RlcycpXG4gICAgXG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNb25nb0RCIHN1Y2Nlc3NmdWxseScpXG4gICAgcmV0dXJuIHsgY2xpZW50LCBkYiB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY29ubmVjdGluZyB0byBNb25nb0RCOicsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhdGFiYXNlKCkge1xuICBpZiAoIWRiKSB7XG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKVxuICB9XG4gIHJldHVybiBkYlxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VDb25uZWN0aW9uKCkge1xuICBpZiAoY2xpZW50KSB7XG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKClcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGNsb3NlZCcpXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsImNsaWVudCIsImRiIiwiY29ubmVjdFRvRGF0YWJhc2UiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJFcnJvciIsIm1heFBvb2xTaXplIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImdldERhdGFiYXNlIiwiY2xvc2VDb25uZWN0aW9uIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/quote-engine.ts":
/*!*********************************!*\
  !*** ./src/lib/quote-engine.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuoteEngine: () => (/* binding */ QuoteEngine),\n/* harmony export */   quoteEngine: () => (/* binding */ quoteEngine)\n/* harmony export */ });\n/* harmony import */ var _knowledge_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./knowledge-base */ \"(rsc)/./src/lib/knowledge-base.ts\");\n/* harmony import */ var _quote_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./quote-parser */ \"(rsc)/./src/lib/quote-parser.ts\");\n\n\nclass QuoteEngine {\n    // Procesar consulta y generar respuesta inteligente\n    async procesarConsulta(consulta, telefono) {\n        try {\n            // 1. Parsear consulta con IA\n            const parsed = await (0,_quote_parser__WEBPACK_IMPORTED_MODULE_1__.parseQuoteConsulta)(consulta);\n            // 2. Determinar tipo de consulta\n            const tipoConsulta = this.determinarTipoConsulta(consulta, parsed);\n            switch(tipoConsulta){\n                case \"cotizacion\":\n                    return await this.generarRespuestaCotizacion(parsed, telefono);\n                case \"informacion\":\n                    return await this.generarRespuestaInformacion(consulta);\n                case \"pregunta\":\n                    return await this.generarRespuestaPregunta(consulta);\n                default:\n                    return this.generarRespuestaError(consulta);\n            }\n        } catch (error) {\n            console.error(\"Error procesando consulta:\", error);\n            return this.generarRespuestaError(consulta, error.message);\n        }\n    }\n    // Determinar tipo de consulta\n    determinarTipoConsulta(consulta, parsed) {\n        const consultaLower = consulta.toLowerCase();\n        // Palabras clave para cotizaci√≥n\n        const palabrasCotizacion = [\n            \"cotizar\",\n            \"precio\",\n            \"costo\",\n            \"cuanto\",\n            \"presupuesto\",\n            \"cotizaci\\xf3n\",\n            \"isodec\",\n            \"isoroof\",\n            \"isopanel\",\n            \"isowall\",\n            \"chapa\",\n            \"calameria\",\n            \"panel\",\n            \"techo\",\n            \"pared\",\n            \"galp\\xf3n\",\n            \"galpon\",\n            \"m2\",\n            \"metro\"\n        ];\n        // Palabras clave para informaci√≥n\n        const palabrasInformacion = [\n            \"que es\",\n            \"como funciona\",\n            \"caracteristicas\",\n            \"especificaciones\",\n            \"diferencia\",\n            \"ventajas\",\n            \"beneficios\",\n            \"aplicaciones\"\n        ];\n        // Palabras clave para preguntas\n        const palabrasPregunta = [\n            \"como\",\n            \"cuando\",\n            \"donde\",\n            \"por que\",\n            \"que\",\n            \"cual\",\n            \"cuanto tiempo\",\n            \"garantia\",\n            \"instalacion\",\n            \"flete\",\n            \"entrega\"\n        ];\n        if (palabrasCotizacion.some((palabra)=>consultaLower.includes(palabra))) {\n            return \"cotizacion\";\n        }\n        if (palabrasInformacion.some((palabra)=>consultaLower.includes(palabra))) {\n            return \"informacion\";\n        }\n        if (palabrasPregunta.some((palabra)=>consultaLower.includes(palabra))) {\n            return \"pregunta\";\n        }\n        // Si tiene informaci√≥n de producto parseada, es cotizaci√≥n\n        if (parsed.producto?.tipo) {\n            return \"cotizacion\";\n        }\n        return \"pregunta\";\n    }\n    // Generar respuesta de cotizaci√≥n\n    async generarRespuestaCotizacion(parsed, telefono) {\n        // Detectar zona por tel√©fono (simplificado)\n        const zona = this.detectarZonaPorTelefono(telefono);\n        // Generar cotizaci√≥n\n        const cotizacion = (0,_knowledge_base__WEBPACK_IMPORTED_MODULE_0__.generarCotizacion)(parsed, zona);\n        if (!cotizacion.producto) {\n            return {\n                tipo: \"error\",\n                mensaje: 'No pude identificar el producto en tu consulta. \\xbfPodr\\xedas ser m\\xe1s espec\\xedfico? Por ejemplo: \"Necesito cotizar Isodec 100mm para galp\\xf3n de 50m2\"',\n                productos_sugeridos: this.obtenerProductosSugeridos(parsed.consulta_original || \"\")\n            };\n        }\n        // Generar c√≥digo √∫nico\n        const codigo = this.generarCodigoCotizacion(telefono);\n        // Construir mensaje de respuesta\n        let mensaje = `üèóÔ∏è **COTIZACI√ìN BMC** - C√≥digo: ${codigo}\\n\\n`;\n        mensaje += `üìã **${cotizacion.descripcion}**\\n\\n`;\n        mensaje += `üí∞ **Detalle de Precios:**\\n`;\n        mensaje += `‚Ä¢ Producto: $${cotizacion.precio_base.toLocaleString()}\\n`;\n        if (parsed.servicios?.instalacion) {\n            mensaje += `‚Ä¢ Instalaci√≥n: $${cotizacion.servicios.instalacion.toLocaleString()}\\n`;\n        }\n        if (parsed.servicios?.flete) {\n            mensaje += `‚Ä¢ Flete (${zona}): $${cotizacion.servicios.flete.toLocaleString()}\\n`;\n        }\n        if (parsed.servicios?.accesorios && cotizacion.servicios.accesorios > 0) {\n            mensaje += `‚Ä¢ Accesorios: $${cotizacion.servicios.accesorios.toLocaleString()}\\n`;\n        }\n        mensaje += `\\nüéØ **TOTAL: $${cotizacion.total.toLocaleString()}**\\n\\n`;\n        if (cotizacion.recomendaciones.length > 0) {\n            mensaje += `üí° **Recomendaciones:**\\n`;\n            cotizacion.recomendaciones.forEach((rec)=>{\n                mensaje += `‚Ä¢ ${rec}\\n`;\n            });\n            mensaje += `\\n`;\n        }\n        mensaje += `üìû **Pr√≥ximos pasos:**\\n`;\n        mensaje += `‚Ä¢ Confirmar dimensiones exactas\\n`;\n        mensaje += `‚Ä¢ Coordinar visita t√©cnica (si es necesario)\\n`;\n        mensaje += `‚Ä¢ Definir fecha de entrega\\n\\n`;\n        mensaje += `¬øTe interesa esta cotizaci√≥n? ¬°Cont√°ctanos para m√°s detalles! üöÄ`;\n        return {\n            tipo: \"cotizacion\",\n            mensaje,\n            cotizacion: {\n                producto: cotizacion.producto.nombre,\n                descripcion: cotizacion.descripcion,\n                precio_base: cotizacion.precio_base,\n                servicios: cotizacion.servicios,\n                total: cotizacion.total,\n                recomendaciones: cotizacion.recomendaciones,\n                codigo\n            },\n            proximos_pasos: [\n                \"Confirmar dimensiones exactas\",\n                \"Coordinar visita t\\xe9cnica\",\n                \"Definir fecha de entrega\",\n                \"Firmar contrato\"\n            ]\n        };\n    }\n    // Generar respuesta informativa\n    async generarRespuestaInformacion(consulta) {\n        const productos = (0,_knowledge_base__WEBPACK_IMPORTED_MODULE_0__.buscarProductos)(consulta);\n        if (productos.length === 0) {\n            return {\n                tipo: \"informacion\",\n                mensaje: `No encontr√© informaci√≥n espec√≠fica sobre \"${consulta}\". \n\nTe puedo ayudar con informaci√≥n sobre nuestros productos principales:\n\nüèóÔ∏è **Isodec EPS** - Paneles aislantes para paredes y techos\nüè† **Isoroof** - Paneles para techos con acabado met√°lico  \nüè¢ **Isopanel** - Paneles de uso general\nüß± **Isowall** - Paneles espec√≠ficos para paredes exteriores\nüîß **Calamer√≠a** - Estructura met√°lica de soporte\nüìê **Chapas** - Chapas galvanizadas\n\n¬øSobre cu√°l te gustar√≠a saber m√°s?`,\n                productos_sugeridos: this.obtenerProductosSugeridos(consulta)\n            };\n        }\n        const producto = productos[0];\n        let mensaje = `üìã **${producto.nombre}**\\n\\n`;\n        mensaje += `${producto.descripcion}\\n\\n`;\n        mensaje += `üîß **Especificaciones:**\\n`;\n        if (producto.especificaciones.grosor) {\n            mensaje += `‚Ä¢ Grosor: ${producto.especificaciones.grosor.join(\", \")}mm\\n`;\n        }\n        if (producto.especificaciones.colores) {\n            mensaje += `‚Ä¢ Colores: ${producto.especificaciones.colores.join(\", \")}\\n`;\n        }\n        if (producto.especificaciones.dimensiones?.largo) {\n            mensaje += `‚Ä¢ Largo: ${producto.especificaciones.dimensiones.largo.join(\", \")}mm\\n`;\n        }\n        mensaje += `\\nüèóÔ∏è **Aplicaciones:**\\n`;\n        producto.aplicaciones.forEach((app)=>{\n            mensaje += `‚Ä¢ ${app}\\n`;\n        });\n        mensaje += `\\nüí∞ **Precio estimado:** $${producto.precios.base}/m¬≤\\n\\n`;\n        mensaje += `¬øTe interesa cotizar este producto? ¬°Dime las dimensiones de tu proyecto! üìê`;\n        return {\n            tipo: \"informacion\",\n            mensaje,\n            productos_sugeridos: productos.slice(1, 4).map((p)=>({\n                    nombre: p.nombre,\n                    descripcion: p.descripcion,\n                    precio_estimado: p.precios.base,\n                    aplicaciones: p.aplicaciones\n                }))\n        };\n    }\n    // Generar respuesta a preguntas frecuentes\n    async generarRespuestaPregunta(consulta) {\n        const preguntasFrecuentes = this.obtenerPreguntasFrecuentes(consulta);\n        if (preguntasFrecuentes.length > 0) {\n            return {\n                tipo: \"pregunta\",\n                mensaje: `ü§î **Pregunta Frecuente**\\n\\n${preguntasFrecuentes[0].respuesta}`,\n                preguntas_frecuentes: preguntasFrecuentes\n            };\n        }\n        return {\n            tipo: \"pregunta\",\n            mensaje: `Hola! üëã \n\nNo estoy seguro de entender tu pregunta. Te puedo ayudar con:\n\nüìã **Cotizaciones** - Dime qu√© producto necesitas y las dimensiones\n‚ÑπÔ∏è **Informaci√≥n** - Sobre nuestros productos y servicios  \n‚ùì **Preguntas** - Sobre instalaci√≥n, flete, garant√≠as, etc.\n\n¬øEn qu√© te puedo ayudar espec√≠ficamente?`,\n            preguntas_frecuentes: this.obtenerPreguntasFrecuentes(\"general\")\n        };\n    }\n    // Generar respuesta de error\n    generarRespuestaError(consulta, error) {\n        return {\n            tipo: \"error\",\n            mensaje: `Lo siento, hubo un problema procesando tu consulta. üòî\n\n${error ? `Error: ${error}` : \"Por favor, intenta reformular tu pregunta.\"}\n\nPuedes contactarnos directamente al üìû [tel√©fono] o escribirnos de nuevo con m√°s detalles.`\n        };\n    }\n    // Detectar zona por tel√©fono (simplificado)\n    detectarZonaPorTelefono(telefono) {\n        if (!telefono) return \"montevideo\";\n        // C√≥digos de √°rea de Uruguay (simplificado)\n        const codigos = {\n            \"2\": \"montevideo\",\n            \"4\": \"canelones\",\n            \"5\": \"fray_bentos\",\n            \"6\": \"colonia\" // Colonia\n        };\n        const codigoArea = telefono.slice(0, 1);\n        return codigos[codigoArea] || \"montevideo\";\n    }\n    // Generar c√≥digo √∫nico de cotizaci√≥n\n    generarCodigoCotizacion(telefono) {\n        const timestamp = Date.now().toString().slice(-6);\n        const telefonoSuffix = telefono ? telefono.slice(-3) : \"000\";\n        return `BMC${timestamp}${telefonoSuffix}`;\n    }\n    // Obtener productos sugeridos\n    obtenerProductosSugeridos(consulta) {\n        const productos = (0,_knowledge_base__WEBPACK_IMPORTED_MODULE_0__.buscarProductos)(consulta);\n        return productos.slice(0, 3).map((p)=>({\n                nombre: p.nombre,\n                descripcion: p.descripcion,\n                precio_estimado: p.precios.base,\n                aplicaciones: p.aplicaciones\n            }));\n    }\n    // Obtener preguntas frecuentes\n    obtenerPreguntasFrecuentes(consulta) {\n        const faqs = [\n            {\n                pregunta: \"\\xbfCu\\xe1nto tiempo tarda la entrega?\",\n                respuesta: \"La entrega depende de la zona y disponibilidad. En Montevideo: 3-5 d\\xedas h\\xe1biles. Interior: 5-10 d\\xedas h\\xe1biles. Te confirmamos el plazo exacto al confirmar la cotizaci\\xf3n.\"\n            },\n            {\n                pregunta: \"\\xbfIncluyen instalaci\\xf3n?\",\n                respuesta: \"S\\xed, ofrecemos servicio de instalaci\\xf3n profesional. El costo se calcula seg\\xfan la complejidad y \\xe1rea del proyecto. Incluye mano de obra especializada y garant\\xeda de instalaci\\xf3n.\"\n            },\n            {\n                pregunta: \"\\xbfQu\\xe9 garant\\xeda tienen los productos?\",\n                respuesta: \"Nuestros productos tienen garant\\xeda de 10 a\\xf1os contra defectos de fabricaci\\xf3n. La instalaci\\xf3n tiene garant\\xeda de 2 a\\xf1os. Todos los productos cumplen normas IRAM y certificaciones internacionales.\"\n            },\n            {\n                pregunta: \"\\xbfHacen flete a todo el pa\\xeds?\",\n                respuesta: \"S\\xed, realizamos flete a todo Uruguay. El costo var\\xeda seg\\xfan la zona y peso del material. En Montevideo y Canelones el flete es m\\xe1s econ\\xf3mico. Te calculamos el costo exacto seg\\xfan tu ubicaci\\xf3n.\"\n            },\n            {\n                pregunta: \"\\xbfQu\\xe9 formas de pago aceptan?\",\n                respuesta: \"Aceptamos efectivo, transferencia bancaria, tarjeta de cr\\xe9dito y d\\xe9bito. Para proyectos grandes ofrecemos financiaci\\xf3n a trav\\xe9s de bancos conveniados. Consulta por planes de pago especiales.\"\n            }\n        ];\n        const consultaLower = consulta.toLowerCase();\n        return faqs.filter((faq)=>faq.pregunta.toLowerCase().includes(consultaLower) || faq.respuesta.toLowerCase().includes(consultaLower));\n    }\n    constructor(){\n        this.knowledgeBase = _knowledge_base__WEBPACK_IMPORTED_MODULE_0__.KNOWLEDGE_BASE;\n    }\n}\n// Instancia global del motor de cotizaci√≥n\nconst quoteEngine = new QuoteEngine();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VztnQkFDMUI0QixpQkFBaUJELEVBQUVKLE9BQU8sQ0FBQ0MsSUFBSTtnQkFDL0JILGNBQWNNLEVBQUVOLFlBQVk7WUFDOUI7SUFDRjtJQUVBLCtCQUErQjtJQUN2QlMsMkJBQTJCN0QsUUFBZ0IsRUFBRTtRQUNuRCxNQUFNdUUsT0FBTztZQUNYO2dCQUNFQyxVQUFVO2dCQUNWVixXQUFXO1lBQ2I7WUFDQTtnQkFDRVUsVUFBVTtnQkFDVlYsV0FBVztZQUNiO1lBQ0E7Z0JBQ0VVLFVBQVU7Z0JBQ1ZWLFdBQVc7WUFDYjtZQUNBO2dCQUNFVSxVQUFVO2dCQUNWVixXQUFXO1lBQ2I7WUFDQTtnQkFDRVUsVUFBVTtnQkFDVlYsV0FBVztZQUNiO1NBQ0Q7UUFFRCxNQUFNbEQsZ0JBQWdCWixTQUFTYSxXQUFXO1FBQzFDLE9BQU8wRCxLQUFLRSxNQUFNLENBQUNDLENBQUFBLE1BQ2pCQSxJQUFJRixRQUFRLENBQUMzRCxXQUFXLEdBQUdNLFFBQVEsQ0FBQ1Asa0JBQ3BDOEQsSUFBSVosU0FBUyxDQUFDakQsV0FBVyxHQUFHTSxRQUFRLENBQUNQO0lBRXpDOzthQXBUUStELGdCQUFnQmpGLDJEQUFjQTs7QUFxVHhDO0FBRUEsMkNBQTJDO0FBQ3BDLE1BQU1rRixjQUFjLElBQUk5RSxjQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29udmVyc2F0aW9uYWwtcXVvdGluZy1kYXNoYm9hcmQvLi9zcmMvbGliL3F1b3RlLWVuZ2luZS50cz8yOTc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtOT1dMRURHRV9CQVNFLCBnZW5lcmFyQ290aXphY2lvbiwgYnVzY2FyUHJvZHVjdG9zIH0gZnJvbSAnLi9rbm93bGVkZ2UtYmFzZSdcbmltcG9ydCB7IHBhcnNlUXVvdGVDb25zdWx0YSB9IGZyb20gJy4vcXVvdGUtcGFyc2VyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFF1b3RlUmVzcG9uc2Uge1xuICB0aXBvOiAnY290aXphY2lvbicgfCAnaW5mb3JtYWNpb24nIHwgJ3ByZWd1bnRhJyB8ICdlcnJvcidcbiAgbWVuc2FqZTogc3RyaW5nXG4gIGNvdGl6YWNpb24/OiB7XG4gICAgcHJvZHVjdG86IHN0cmluZ1xuICAgIGRlc2NyaXBjaW9uOiBzdHJpbmdcbiAgICBwcmVjaW9fYmFzZTogbnVtYmVyXG4gICAgc2VydmljaW9zOiBhbnlcbiAgICB0b3RhbDogbnVtYmVyXG4gICAgcmVjb21lbmRhY2lvbmVzOiBzdHJpbmdbXVxuICAgIGNvZGlnbzogc3RyaW5nXG4gIH1cbiAgcHJvZHVjdG9zX3N1Z2VyaWRvcz86IEFycmF5PHtcbiAgICBub21icmU6IHN0cmluZ1xuICAgIGRlc2NyaXBjaW9uOiBzdHJpbmdcbiAgICBwcmVjaW9fZXN0aW1hZG86IG51bWJlclxuICAgIGFwbGljYWNpb25lczogc3RyaW5nW11cbiAgfT5cbiAgcHJlZ3VudGFzX2ZyZWN1ZW50ZXM/OiBBcnJheTx7XG4gICAgcHJlZ3VudGE6IHN0cmluZ1xuICAgIHJlc3B1ZXN0YTogc3RyaW5nXG4gIH0+XG4gIHByb3hpbW9zX3Bhc29zPzogc3RyaW5nW11cbn1cblxuZXhwb3J0IGNsYXNzIFF1b3RlRW5naW5lIHtcbiAgcHJpdmF0ZSBrbm93bGVkZ2VCYXNlID0gS05PV0xFREdFX0JBU0VcbiAgXG4gIC8vIFByb2Nlc2FyIGNvbnN1bHRhIHkgZ2VuZXJhciByZXNwdWVzdGEgaW50ZWxpZ2VudGVcbiAgYXN5bmMgcHJvY2VzYXJDb25zdWx0YShjb25zdWx0YTogc3RyaW5nLCB0ZWxlZm9ubz86IHN0cmluZyk6IFByb21pc2U8UXVvdGVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBQYXJzZWFyIGNvbnN1bHRhIGNvbiBJQVxuICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VRdW90ZUNvbnN1bHRhKGNvbnN1bHRhKVxuICAgICAgXG4gICAgICAvLyAyLiBEZXRlcm1pbmFyIHRpcG8gZGUgY29uc3VsdGFcbiAgICAgIGNvbnN0IHRpcG9Db25zdWx0YSA9IHRoaXMuZGV0ZXJtaW5hclRpcG9Db25zdWx0YShjb25zdWx0YSwgcGFyc2VkKVxuICAgICAgXG4gICAgICBzd2l0Y2ggKHRpcG9Db25zdWx0YSkge1xuICAgICAgICBjYXNlICdjb3RpemFjaW9uJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZW5lcmFyUmVzcHVlc3RhQ290aXphY2lvbihwYXJzZWQsIHRlbGVmb25vKVxuICAgICAgICBcbiAgICAgICAgY2FzZSAnaW5mb3JtYWNpb24nOlxuICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdlbmVyYXJSZXNwdWVzdGFJbmZvcm1hY2lvbihjb25zdWx0YSlcbiAgICAgICAgXG4gICAgICAgIGNhc2UgJ3ByZWd1bnRhJzpcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZW5lcmFyUmVzcHVlc3RhUHJlZ3VudGEoY29uc3VsdGEpXG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXJSZXNwdWVzdGFFcnJvcihjb25zdWx0YSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNhbmRvIGNvbnN1bHRhOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhclJlc3B1ZXN0YUVycm9yKGNvbnN1bHRhLCBlcnJvci5tZXNzYWdlKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gRGV0ZXJtaW5hciB0aXBvIGRlIGNvbnN1bHRhXG4gIHByaXZhdGUgZGV0ZXJtaW5hclRpcG9Db25zdWx0YShjb25zdWx0YTogc3RyaW5nLCBwYXJzZWQ6IGFueSk6ICdjb3RpemFjaW9uJyB8ICdpbmZvcm1hY2lvbicgfCAncHJlZ3VudGEnIHtcbiAgICBjb25zdCBjb25zdWx0YUxvd2VyID0gY29uc3VsdGEudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIC8vIFBhbGFicmFzIGNsYXZlIHBhcmEgY290aXphY2nDs25cbiAgICBjb25zdCBwYWxhYnJhc0NvdGl6YWNpb24gPSBbXG4gICAgICAnY290aXphcicsICdwcmVjaW8nLCAnY29zdG8nLCAnY3VhbnRvJywgJ3ByZXN1cHVlc3RvJywgJ2NvdGl6YWNpw7NuJyxcbiAgICAgICdpc29kZWMnLCAnaXNvcm9vZicsICdpc29wYW5lbCcsICdpc293YWxsJywgJ2NoYXBhJywgJ2NhbGFtZXJpYScsXG4gICAgICAncGFuZWwnLCAndGVjaG8nLCAncGFyZWQnLCAnZ2FscMOzbicsICdnYWxwb24nLCAnbTInLCAnbWV0cm8nXG4gICAgXVxuICAgIFxuICAgIC8vIFBhbGFicmFzIGNsYXZlIHBhcmEgaW5mb3JtYWNpw7NuXG4gICAgY29uc3QgcGFsYWJyYXNJbmZvcm1hY2lvbiA9IFtcbiAgICAgICdxdWUgZXMnLCAnY29tbyBmdW5jaW9uYScsICdjYXJhY3RlcmlzdGljYXMnLCAnZXNwZWNpZmljYWNpb25lcycsXG4gICAgICAnZGlmZXJlbmNpYScsICd2ZW50YWphcycsICdiZW5lZmljaW9zJywgJ2FwbGljYWNpb25lcydcbiAgICBdXG4gICAgXG4gICAgLy8gUGFsYWJyYXMgY2xhdmUgcGFyYSBwcmVndW50YXNcbiAgICBjb25zdCBwYWxhYnJhc1ByZWd1bnRhID0gW1xuICAgICAgJ2NvbW8nLCAnY3VhbmRvJywgJ2RvbmRlJywgJ3BvciBxdWUnLCAncXVlJywgJ2N1YWwnLCAnY3VhbnRvIHRpZW1wbycsXG4gICAgICAnZ2FyYW50aWEnLCAnaW5zdGFsYWNpb24nLCAnZmxldGUnLCAnZW50cmVnYSdcbiAgICBdXG4gICAgXG4gICAgaWYgKHBhbGFicmFzQ290aXphY2lvbi5zb21lKHBhbGFicmEgPT4gY29uc3VsdGFMb3dlci5pbmNsdWRlcyhwYWxhYnJhKSkpIHtcbiAgICAgIHJldHVybiAnY290aXphY2lvbidcbiAgICB9XG4gICAgXG4gICAgaWYgKHBhbGFicmFzSW5mb3JtYWNpb24uc29tZShwYWxhYnJhID0+IGNvbnN1bHRhTG93ZXIuaW5jbHVkZXMocGFsYWJyYSkpKSB7XG4gICAgICByZXR1cm4gJ2luZm9ybWFjaW9uJ1xuICAgIH1cbiAgICBcbiAgICBpZiAocGFsYWJyYXNQcmVndW50YS5zb21lKHBhbGFicmEgPT4gY29uc3VsdGFMb3dlci5pbmNsdWRlcyhwYWxhYnJhKSkpIHtcbiAgICAgIHJldHVybiAncHJlZ3VudGEnXG4gICAgfVxuICAgIFxuICAgIC8vIFNpIHRpZW5lIGluZm9ybWFjacOzbiBkZSBwcm9kdWN0byBwYXJzZWFkYSwgZXMgY290aXphY2nDs25cbiAgICBpZiAocGFyc2VkLnByb2R1Y3RvPy50aXBvKSB7XG4gICAgICByZXR1cm4gJ2NvdGl6YWNpb24nXG4gICAgfVxuICAgIFxuICAgIHJldHVybiAncHJlZ3VudGEnXG4gIH1cbiAgXG4gIC8vIEdlbmVyYXIgcmVzcHVlc3RhIGRlIGNvdGl6YWNpw7NuXG4gIHByaXZhdGUgYXN5bmMgZ2VuZXJhclJlc3B1ZXN0YUNvdGl6YWNpb24ocGFyc2VkOiBhbnksIHRlbGVmb25vPzogc3RyaW5nKTogUHJvbWlzZTxRdW90ZVJlc3BvbnNlPiB7XG4gICAgLy8gRGV0ZWN0YXIgem9uYSBwb3IgdGVsw6lmb25vIChzaW1wbGlmaWNhZG8pXG4gICAgY29uc3Qgem9uYSA9IHRoaXMuZGV0ZWN0YXJab25hUG9yVGVsZWZvbm8odGVsZWZvbm8pXG4gICAgXG4gICAgLy8gR2VuZXJhciBjb3RpemFjacOzblxuICAgIGNvbnN0IGNvdGl6YWNpb24gPSBnZW5lcmFyQ290aXphY2lvbihwYXJzZWQsIHpvbmEpXG4gICAgXG4gICAgaWYgKCFjb3RpemFjaW9uLnByb2R1Y3RvKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXBvOiAnZXJyb3InLFxuICAgICAgICBtZW5zYWplOiAnTm8gcHVkZSBpZGVudGlmaWNhciBlbCBwcm9kdWN0byBlbiB0dSBjb25zdWx0YS4gwr9Qb2Ryw61hcyBzZXIgbcOhcyBlc3BlY8OtZmljbz8gUG9yIGVqZW1wbG86IFwiTmVjZXNpdG8gY290aXphciBJc29kZWMgMTAwbW0gcGFyYSBnYWxww7NuIGRlIDUwbTJcIicsXG4gICAgICAgIHByb2R1Y3Rvc19zdWdlcmlkb3M6IHRoaXMub2J0ZW5lclByb2R1Y3Rvc1N1Z2VyaWRvcyhwYXJzZWQuY29uc3VsdGFfb3JpZ2luYWwgfHwgJycpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXIgY8OzZGlnbyDDum5pY29cbiAgICBjb25zdCBjb2RpZ28gPSB0aGlzLmdlbmVyYXJDb2RpZ29Db3RpemFjaW9uKHRlbGVmb25vKVxuICAgIFxuICAgIC8vIENvbnN0cnVpciBtZW5zYWplIGRlIHJlc3B1ZXN0YVxuICAgIGxldCBtZW5zYWplID0gYPCfj5fvuI8gKipDT1RJWkFDScOTTiBCTUMqKiAtIEPDs2RpZ286ICR7Y29kaWdvfVxcblxcbmBcbiAgICBtZW5zYWplICs9IGDwn5OLICoqJHtjb3RpemFjaW9uLmRlc2NyaXBjaW9ufSoqXFxuXFxuYFxuICAgIG1lbnNhamUgKz0gYPCfkrAgKipEZXRhbGxlIGRlIFByZWNpb3M6KipcXG5gXG4gICAgbWVuc2FqZSArPSBg4oCiIFByb2R1Y3RvOiAkJHtjb3RpemFjaW9uLnByZWNpb19iYXNlLnRvTG9jYWxlU3RyaW5nKCl9XFxuYFxuICAgIFxuICAgIGlmIChwYXJzZWQuc2VydmljaW9zPy5pbnN0YWxhY2lvbikge1xuICAgICAgbWVuc2FqZSArPSBg4oCiIEluc3RhbGFjacOzbjogJCR7Y290aXphY2lvbi5zZXJ2aWNpb3MuaW5zdGFsYWNpb24udG9Mb2NhbGVTdHJpbmcoKX1cXG5gXG4gICAgfVxuICAgIFxuICAgIGlmIChwYXJzZWQuc2VydmljaW9zPy5mbGV0ZSkge1xuICAgICAgbWVuc2FqZSArPSBg4oCiIEZsZXRlICgke3pvbmF9KTogJCR7Y290aXphY2lvbi5zZXJ2aWNpb3MuZmxldGUudG9Mb2NhbGVTdHJpbmcoKX1cXG5gXG4gICAgfVxuICAgIFxuICAgIGlmIChwYXJzZWQuc2VydmljaW9zPy5hY2Nlc29yaW9zICYmIGNvdGl6YWNpb24uc2VydmljaW9zLmFjY2Vzb3Jpb3MgPiAwKSB7XG4gICAgICBtZW5zYWplICs9IGDigKIgQWNjZXNvcmlvczogJCR7Y290aXphY2lvbi5zZXJ2aWNpb3MuYWNjZXNvcmlvcy50b0xvY2FsZVN0cmluZygpfVxcbmBcbiAgICB9XG4gICAgXG4gICAgbWVuc2FqZSArPSBgXFxu8J+OryAqKlRPVEFMOiAkJHtjb3RpemFjaW9uLnRvdGFsLnRvTG9jYWxlU3RyaW5nKCl9KipcXG5cXG5gXG4gICAgXG4gICAgaWYgKGNvdGl6YWNpb24ucmVjb21lbmRhY2lvbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1lbnNhamUgKz0gYPCfkqEgKipSZWNvbWVuZGFjaW9uZXM6KipcXG5gXG4gICAgICBjb3RpemFjaW9uLnJlY29tZW5kYWNpb25lcy5mb3JFYWNoKHJlYyA9PiB7XG4gICAgICAgIG1lbnNhamUgKz0gYOKAoiAke3JlY31cXG5gXG4gICAgICB9KVxuICAgICAgbWVuc2FqZSArPSBgXFxuYFxuICAgIH1cbiAgICBcbiAgICBtZW5zYWplICs9IGDwn5OeICoqUHLDs3hpbW9zIHBhc29zOioqXFxuYFxuICAgIG1lbnNhamUgKz0gYOKAoiBDb25maXJtYXIgZGltZW5zaW9uZXMgZXhhY3Rhc1xcbmBcbiAgICBtZW5zYWplICs9IGDigKIgQ29vcmRpbmFyIHZpc2l0YSB0w6ljbmljYSAoc2kgZXMgbmVjZXNhcmlvKVxcbmBcbiAgICBtZW5zYWplICs9IGDigKIgRGVmaW5pciBmZWNoYSBkZSBlbnRyZWdhXFxuXFxuYFxuICAgIG1lbnNhamUgKz0gYMK/VGUgaW50ZXJlc2EgZXN0YSBjb3RpemFjacOzbj8gwqFDb250w6FjdGFub3MgcGFyYSBtw6FzIGRldGFsbGVzISDwn5qAYFxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0aXBvOiAnY290aXphY2lvbicsXG4gICAgICBtZW5zYWplLFxuICAgICAgY290aXphY2lvbjoge1xuICAgICAgICBwcm9kdWN0bzogY290aXphY2lvbi5wcm9kdWN0by5ub21icmUsXG4gICAgICAgIGRlc2NyaXBjaW9uOiBjb3RpemFjaW9uLmRlc2NyaXBjaW9uLFxuICAgICAgICBwcmVjaW9fYmFzZTogY290aXphY2lvbi5wcmVjaW9fYmFzZSxcbiAgICAgICAgc2VydmljaW9zOiBjb3RpemFjaW9uLnNlcnZpY2lvcyxcbiAgICAgICAgdG90YWw6IGNvdGl6YWNpb24udG90YWwsXG4gICAgICAgIHJlY29tZW5kYWNpb25lczogY290aXphY2lvbi5yZWNvbWVuZGFjaW9uZXMsXG4gICAgICAgIGNvZGlnb1xuICAgICAgfSxcbiAgICAgIHByb3hpbW9zX3Bhc29zOiBbXG4gICAgICAgICdDb25maXJtYXIgZGltZW5zaW9uZXMgZXhhY3RhcycsXG4gICAgICAgICdDb29yZGluYXIgdmlzaXRhIHTDqWNuaWNhJyxcbiAgICAgICAgJ0RlZmluaXIgZmVjaGEgZGUgZW50cmVnYScsXG4gICAgICAgICdGaXJtYXIgY29udHJhdG8nXG4gICAgICBdXG4gICAgfVxuICB9XG4gIFxuICAvLyBHZW5lcmFyIHJlc3B1ZXN0YSBpbmZvcm1hdGl2YVxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXJSZXNwdWVzdGFJbmZvcm1hY2lvbihjb25zdWx0YTogc3RyaW5nKTogUHJvbWlzZTxRdW90ZVJlc3BvbnNlPiB7XG4gICAgY29uc3QgcHJvZHVjdG9zID0gYnVzY2FyUHJvZHVjdG9zKGNvbnN1bHRhKVxuICAgIFxuICAgIGlmIChwcm9kdWN0b3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0aXBvOiAnaW5mb3JtYWNpb24nLFxuICAgICAgICBtZW5zYWplOiBgTm8gZW5jb250csOpIGluZm9ybWFjacOzbiBlc3BlY8OtZmljYSBzb2JyZSBcIiR7Y29uc3VsdGF9XCIuIFxuXG5UZSBwdWVkbyBheXVkYXIgY29uIGluZm9ybWFjacOzbiBzb2JyZSBudWVzdHJvcyBwcm9kdWN0b3MgcHJpbmNpcGFsZXM6XG5cbvCfj5fvuI8gKipJc29kZWMgRVBTKiogLSBQYW5lbGVzIGFpc2xhbnRlcyBwYXJhIHBhcmVkZXMgeSB0ZWNob3NcbvCfj6AgKipJc29yb29mKiogLSBQYW5lbGVzIHBhcmEgdGVjaG9zIGNvbiBhY2FiYWRvIG1ldMOhbGljbyAgXG7wn4+iICoqSXNvcGFuZWwqKiAtIFBhbmVsZXMgZGUgdXNvIGdlbmVyYWxcbvCfp7EgKipJc293YWxsKiogLSBQYW5lbGVzIGVzcGVjw61maWNvcyBwYXJhIHBhcmVkZXMgZXh0ZXJpb3Jlc1xu8J+UpyAqKkNhbGFtZXLDrWEqKiAtIEVzdHJ1Y3R1cmEgbWV0w6FsaWNhIGRlIHNvcG9ydGVcbvCfk5AgKipDaGFwYXMqKiAtIENoYXBhcyBnYWx2YW5pemFkYXNcblxuwr9Tb2JyZSBjdcOhbCB0ZSBndXN0YXLDrWEgc2FiZXIgbcOhcz9gLFxuICAgICAgICBwcm9kdWN0b3Nfc3VnZXJpZG9zOiB0aGlzLm9idGVuZXJQcm9kdWN0b3NTdWdlcmlkb3MoY29uc3VsdGEpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHByb2R1Y3RvID0gcHJvZHVjdG9zWzBdXG4gICAgbGV0IG1lbnNhamUgPSBg8J+TiyAqKiR7cHJvZHVjdG8ubm9tYnJlfSoqXFxuXFxuYFxuICAgIG1lbnNhamUgKz0gYCR7cHJvZHVjdG8uZGVzY3JpcGNpb259XFxuXFxuYFxuICAgIFxuICAgIG1lbnNhamUgKz0gYPCflKcgKipFc3BlY2lmaWNhY2lvbmVzOioqXFxuYFxuICAgIGlmIChwcm9kdWN0by5lc3BlY2lmaWNhY2lvbmVzLmdyb3Nvcikge1xuICAgICAgbWVuc2FqZSArPSBg4oCiIEdyb3NvcjogJHtwcm9kdWN0by5lc3BlY2lmaWNhY2lvbmVzLmdyb3Nvci5qb2luKCcsICcpfW1tXFxuYFxuICAgIH1cbiAgICBpZiAocHJvZHVjdG8uZXNwZWNpZmljYWNpb25lcy5jb2xvcmVzKSB7XG4gICAgICBtZW5zYWplICs9IGDigKIgQ29sb3JlczogJHtwcm9kdWN0by5lc3BlY2lmaWNhY2lvbmVzLmNvbG9yZXMuam9pbignLCAnKX1cXG5gXG4gICAgfVxuICAgIGlmIChwcm9kdWN0by5lc3BlY2lmaWNhY2lvbmVzLmRpbWVuc2lvbmVzPy5sYXJnbykge1xuICAgICAgbWVuc2FqZSArPSBg4oCiIExhcmdvOiAke3Byb2R1Y3RvLmVzcGVjaWZpY2FjaW9uZXMuZGltZW5zaW9uZXMubGFyZ28uam9pbignLCAnKX1tbVxcbmBcbiAgICB9XG4gICAgXG4gICAgbWVuc2FqZSArPSBgXFxu8J+Pl++4jyAqKkFwbGljYWNpb25lczoqKlxcbmBcbiAgICBwcm9kdWN0by5hcGxpY2FjaW9uZXMuZm9yRWFjaChhcHAgPT4ge1xuICAgICAgbWVuc2FqZSArPSBg4oCiICR7YXBwfVxcbmBcbiAgICB9KVxuICAgIFxuICAgIG1lbnNhamUgKz0gYFxcbvCfkrAgKipQcmVjaW8gZXN0aW1hZG86KiogJCR7cHJvZHVjdG8ucHJlY2lvcy5iYXNlfS9twrJcXG5cXG5gXG4gICAgbWVuc2FqZSArPSBgwr9UZSBpbnRlcmVzYSBjb3RpemFyIGVzdGUgcHJvZHVjdG8/IMKhRGltZSBsYXMgZGltZW5zaW9uZXMgZGUgdHUgcHJveWVjdG8hIPCfk5BgXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpcG86ICdpbmZvcm1hY2lvbicsXG4gICAgICBtZW5zYWplLFxuICAgICAgcHJvZHVjdG9zX3N1Z2VyaWRvczogcHJvZHVjdG9zLnNsaWNlKDEsIDQpLm1hcChwID0+ICh7XG4gICAgICAgIG5vbWJyZTogcC5ub21icmUsXG4gICAgICAgIGRlc2NyaXBjaW9uOiBwLmRlc2NyaXBjaW9uLFxuICAgICAgICBwcmVjaW9fZXN0aW1hZG86IHAucHJlY2lvcy5iYXNlLFxuICAgICAgICBhcGxpY2FjaW9uZXM6IHAuYXBsaWNhY2lvbmVzXG4gICAgICB9KSlcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEdlbmVyYXIgcmVzcHVlc3RhIGEgcHJlZ3VudGFzIGZyZWN1ZW50ZXNcbiAgcHJpdmF0ZSBhc3luYyBnZW5lcmFyUmVzcHVlc3RhUHJlZ3VudGEoY29uc3VsdGE6IHN0cmluZyk6IFByb21pc2U8UXVvdGVSZXNwb25zZT4ge1xuICAgIGNvbnN0IHByZWd1bnRhc0ZyZWN1ZW50ZXMgPSB0aGlzLm9idGVuZXJQcmVndW50YXNGcmVjdWVudGVzKGNvbnN1bHRhKVxuICAgIFxuICAgIGlmIChwcmVndW50YXNGcmVjdWVudGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpcG86ICdwcmVndW50YScsXG4gICAgICAgIG1lbnNhamU6IGDwn6SUICoqUHJlZ3VudGEgRnJlY3VlbnRlKipcXG5cXG4ke3ByZWd1bnRhc0ZyZWN1ZW50ZXNbMF0ucmVzcHVlc3RhfWAsXG4gICAgICAgIHByZWd1bnRhc19mcmVjdWVudGVzOiBwcmVndW50YXNGcmVjdWVudGVzXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0aXBvOiAncHJlZ3VudGEnLFxuICAgICAgbWVuc2FqZTogYEhvbGEhIPCfkYsgXG5cbk5vIGVzdG95IHNlZ3VybyBkZSBlbnRlbmRlciB0dSBwcmVndW50YS4gVGUgcHVlZG8gYXl1ZGFyIGNvbjpcblxu8J+TiyAqKkNvdGl6YWNpb25lcyoqIC0gRGltZSBxdcOpIHByb2R1Y3RvIG5lY2VzaXRhcyB5IGxhcyBkaW1lbnNpb25lc1xu4oS577iPICoqSW5mb3JtYWNpw7NuKiogLSBTb2JyZSBudWVzdHJvcyBwcm9kdWN0b3MgeSBzZXJ2aWNpb3MgIFxu4p2TICoqUHJlZ3VudGFzKiogLSBTb2JyZSBpbnN0YWxhY2nDs24sIGZsZXRlLCBnYXJhbnTDrWFzLCBldGMuXG5cbsK/RW4gcXXDqSB0ZSBwdWVkbyBheXVkYXIgZXNwZWPDrWZpY2FtZW50ZT9gLFxuICAgICAgcHJlZ3VudGFzX2ZyZWN1ZW50ZXM6IHRoaXMub2J0ZW5lclByZWd1bnRhc0ZyZWN1ZW50ZXMoJ2dlbmVyYWwnKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gR2VuZXJhciByZXNwdWVzdGEgZGUgZXJyb3JcbiAgcHJpdmF0ZSBnZW5lcmFyUmVzcHVlc3RhRXJyb3IoY29uc3VsdGE6IHN0cmluZywgZXJyb3I/OiBzdHJpbmcpOiBRdW90ZVJlc3BvbnNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGlwbzogJ2Vycm9yJyxcbiAgICAgIG1lbnNhamU6IGBMbyBzaWVudG8sIGh1Ym8gdW4gcHJvYmxlbWEgcHJvY2VzYW5kbyB0dSBjb25zdWx0YS4g8J+YlFxuXG4ke2Vycm9yID8gYEVycm9yOiAke2Vycm9yfWAgOiAnUG9yIGZhdm9yLCBpbnRlbnRhIHJlZm9ybXVsYXIgdHUgcHJlZ3VudGEuJ31cblxuUHVlZGVzIGNvbnRhY3Rhcm5vcyBkaXJlY3RhbWVudGUgYWwg8J+TniBbdGVsw6lmb25vXSBvIGVzY3JpYmlybm9zIGRlIG51ZXZvIGNvbiBtw6FzIGRldGFsbGVzLmBcbiAgICB9XG4gIH1cbiAgXG4gIC8vIERldGVjdGFyIHpvbmEgcG9yIHRlbMOpZm9ubyAoc2ltcGxpZmljYWRvKVxuICBwcml2YXRlIGRldGVjdGFyWm9uYVBvclRlbGVmb25vKHRlbGVmb25vPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXRlbGVmb25vKSByZXR1cm4gJ21vbnRldmlkZW8nXG4gICAgXG4gICAgLy8gQ8OzZGlnb3MgZGUgw6FyZWEgZGUgVXJ1Z3VheSAoc2ltcGxpZmljYWRvKVxuICAgIGNvbnN0IGNvZGlnb3M6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICAnMic6ICdtb250ZXZpZGVvJywgICAgLy8gTW9udGV2aWRlb1xuICAgICAgJzQnOiAnY2FuZWxvbmVzJywgICAgIC8vIENhbmVsb25lcywgTWFsZG9uYWRvLCBSaXZlcmEsIEFydGlnYXMsIGV0Yy5cbiAgICAgICc1JzogJ2ZyYXlfYmVudG9zJywgICAvLyBSw61vIE5lZ3JvXG4gICAgICAnNic6ICdjb2xvbmlhJyAgICAgICAgLy8gQ29sb25pYVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb2RpZ29BcmVhID0gdGVsZWZvbm8uc2xpY2UoMCwgMSlcbiAgICByZXR1cm4gY29kaWdvc1tjb2RpZ29BcmVhXSB8fCAnbW9udGV2aWRlbydcbiAgfVxuICBcbiAgLy8gR2VuZXJhciBjw7NkaWdvIMO6bmljbyBkZSBjb3RpemFjacOzblxuICBwcml2YXRlIGdlbmVyYXJDb2RpZ29Db3RpemFjaW9uKHRlbGVmb25vPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCkuc2xpY2UoLTYpXG4gICAgY29uc3QgdGVsZWZvbm9TdWZmaXggPSB0ZWxlZm9ubyA/IHRlbGVmb25vLnNsaWNlKC0zKSA6ICcwMDAnXG4gICAgcmV0dXJuIGBCTUMke3RpbWVzdGFtcH0ke3RlbGVmb25vU3VmZml4fWBcbiAgfVxuICBcbiAgLy8gT2J0ZW5lciBwcm9kdWN0b3Mgc3VnZXJpZG9zXG4gIHByaXZhdGUgb2J0ZW5lclByb2R1Y3Rvc1N1Z2VyaWRvcyhjb25zdWx0YTogc3RyaW5nKSB7XG4gICAgY29uc3QgcHJvZHVjdG9zID0gYnVzY2FyUHJvZHVjdG9zKGNvbnN1bHRhKVxuICAgIHJldHVybiBwcm9kdWN0b3Muc2xpY2UoMCwgMykubWFwKHAgPT4gKHtcbiAgICAgIG5vbWJyZTogcC5ub21icmUsXG4gICAgICBkZXNjcmlwY2lvbjogcC5kZXNjcmlwY2lvbixcbiAgICAgIHByZWNpb19lc3RpbWFkbzogcC5wcmVjaW9zLmJhc2UsXG4gICAgICBhcGxpY2FjaW9uZXM6IHAuYXBsaWNhY2lvbmVzXG4gICAgfSkpXG4gIH1cbiAgXG4gIC8vIE9idGVuZXIgcHJlZ3VudGFzIGZyZWN1ZW50ZXNcbiAgcHJpdmF0ZSBvYnRlbmVyUHJlZ3VudGFzRnJlY3VlbnRlcyhjb25zdWx0YTogc3RyaW5nKSB7XG4gICAgY29uc3QgZmFxcyA9IFtcbiAgICAgIHtcbiAgICAgICAgcHJlZ3VudGE6ICfCv0N1w6FudG8gdGllbXBvIHRhcmRhIGxhIGVudHJlZ2E/JyxcbiAgICAgICAgcmVzcHVlc3RhOiAnTGEgZW50cmVnYSBkZXBlbmRlIGRlIGxhIHpvbmEgeSBkaXNwb25pYmlsaWRhZC4gRW4gTW9udGV2aWRlbzogMy01IGTDrWFzIGjDoWJpbGVzLiBJbnRlcmlvcjogNS0xMCBkw61hcyBow6FiaWxlcy4gVGUgY29uZmlybWFtb3MgZWwgcGxhem8gZXhhY3RvIGFsIGNvbmZpcm1hciBsYSBjb3RpemFjacOzbi4nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBwcmVndW50YTogJ8K/SW5jbHV5ZW4gaW5zdGFsYWNpw7NuPycsXG4gICAgICAgIHJlc3B1ZXN0YTogJ1PDrSwgb2ZyZWNlbW9zIHNlcnZpY2lvIGRlIGluc3RhbGFjacOzbiBwcm9mZXNpb25hbC4gRWwgY29zdG8gc2UgY2FsY3VsYSBzZWfDum4gbGEgY29tcGxlamlkYWQgeSDDoXJlYSBkZWwgcHJveWVjdG8uIEluY2x1eWUgbWFubyBkZSBvYnJhIGVzcGVjaWFsaXphZGEgeSBnYXJhbnTDrWEgZGUgaW5zdGFsYWNpw7NuLidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHByZWd1bnRhOiAnwr9RdcOpIGdhcmFudMOtYSB0aWVuZW4gbG9zIHByb2R1Y3Rvcz8nLFxuICAgICAgICByZXNwdWVzdGE6ICdOdWVzdHJvcyBwcm9kdWN0b3MgdGllbmVuIGdhcmFudMOtYSBkZSAxMCBhw7FvcyBjb250cmEgZGVmZWN0b3MgZGUgZmFicmljYWNpw7NuLiBMYSBpbnN0YWxhY2nDs24gdGllbmUgZ2FyYW50w61hIGRlIDIgYcOxb3MuIFRvZG9zIGxvcyBwcm9kdWN0b3MgY3VtcGxlbiBub3JtYXMgSVJBTSB5IGNlcnRpZmljYWNpb25lcyBpbnRlcm5hY2lvbmFsZXMuJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJlZ3VudGE6ICfCv0hhY2VuIGZsZXRlIGEgdG9kbyBlbCBwYcOtcz8nLFxuICAgICAgICByZXNwdWVzdGE6ICdTw60sIHJlYWxpemFtb3MgZmxldGUgYSB0b2RvIFVydWd1YXkuIEVsIGNvc3RvIHZhcsOtYSBzZWfDum4gbGEgem9uYSB5IHBlc28gZGVsIG1hdGVyaWFsLiBFbiBNb250ZXZpZGVvIHkgQ2FuZWxvbmVzIGVsIGZsZXRlIGVzIG3DoXMgZWNvbsOzbWljby4gVGUgY2FsY3VsYW1vcyBlbCBjb3N0byBleGFjdG8gc2Vnw7puIHR1IHViaWNhY2nDs24uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcHJlZ3VudGE6ICfCv1F1w6kgZm9ybWFzIGRlIHBhZ28gYWNlcHRhbj8nLFxuICAgICAgICByZXNwdWVzdGE6ICdBY2VwdGFtb3MgZWZlY3Rpdm8sIHRyYW5zZmVyZW5jaWEgYmFuY2FyaWEsIHRhcmpldGEgZGUgY3LDqWRpdG8geSBkw6liaXRvLiBQYXJhIHByb3llY3RvcyBncmFuZGVzIG9mcmVjZW1vcyBmaW5hbmNpYWNpw7NuIGEgdHJhdsOpcyBkZSBiYW5jb3MgY29udmVuaWFkb3MuIENvbnN1bHRhIHBvciBwbGFuZXMgZGUgcGFnbyBlc3BlY2lhbGVzLidcbiAgICAgIH1cbiAgICBdXG4gICAgXG4gICAgY29uc3QgY29uc3VsdGFMb3dlciA9IGNvbnN1bHRhLnRvTG93ZXJDYXNlKClcbiAgICByZXR1cm4gZmFxcy5maWx0ZXIoZmFxID0+IFxuICAgICAgZmFxLnByZWd1bnRhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY29uc3VsdGFMb3dlcikgfHxcbiAgICAgIGZhcS5yZXNwdWVzdGEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhjb25zdWx0YUxvd2VyKVxuICAgIClcbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgZ2xvYmFsIGRlbCBtb3RvciBkZSBjb3RpemFjacOzblxuZXhwb3J0IGNvbnN0IHF1b3RlRW5naW5lID0gbmV3IFF1b3RlRW5naW5lKClcbiJdLCJuYW1lcyI6WyJLTk9XTEVER0VfQkFTRSIsImdlbmVyYXJDb3RpemFjaW9uIiwiYnVzY2FyUHJvZHVjdG9zIiwicGFyc2VRdW90ZUNvbnN1bHRhIiwiUXVvdGVFbmdpbmUiLCJwcm9jZXNhckNvbnN1bHRhIiwiY29uc3VsdGEiLCJ0ZWxlZm9ubyIsInBhcnNlZCIsInRpcG9Db25zdWx0YSIsImRldGVybWluYXJUaXBvQ29uc3VsdGEiLCJnZW5lcmFyUmVzcHVlc3RhQ290aXphY2lvbiIsImdlbmVyYXJSZXNwdWVzdGFJbmZvcm1hY2lvbiIsImdlbmVyYXJSZXNwdWVzdGFQcmVndW50YSIsImdlbmVyYXJSZXNwdWVzdGFFcnJvciIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjb25zdWx0YUxvd2VyIiwidG9Mb3dlckNhc2UiLCJwYWxhYnJhc0NvdGl6YWNpb24iLCJwYWxhYnJhc0luZm9ybWFjaW9uIiwicGFsYWJyYXNQcmVndW50YSIsInNvbWUiLCJwYWxhYnJhIiwiaW5jbHVkZXMiLCJwcm9kdWN0byIsInRpcG8iLCJ6b25hIiwiZGV0ZWN0YXJab25hUG9yVGVsZWZvbm8iLCJjb3RpemFjaW9uIiwibWVuc2FqZSIsInByb2R1Y3Rvc19zdWdlcmlkb3MiLCJvYnRlbmVyUHJvZHVjdG9zU3VnZXJpZG9zIiwiY29uc3VsdGFfb3JpZ2luYWwiLCJjb2RpZ28iLCJnZW5lcmFyQ29kaWdvQ290aXphY2lvbiIsImRlc2NyaXBjaW9uIiwicHJlY2lvX2Jhc2UiLCJ0b0xvY2FsZVN0cmluZyIsInNlcnZpY2lvcyIsImluc3RhbGFjaW9uIiwiZmxldGUiLCJhY2Nlc29yaW9zIiwidG90YWwiLCJyZWNvbWVuZGFjaW9uZXMiLCJsZW5ndGgiLCJmb3JFYWNoIiwicmVjIiwibm9tYnJlIiwicHJveGltb3NfcGFzb3MiLCJwcm9kdWN0b3MiLCJlc3BlY2lmaWNhY2lvbmVzIiwiZ3Jvc29yIiwiam9pbiIsImNvbG9yZXMiLCJkaW1lbnNpb25lcyIsImxhcmdvIiwiYXBsaWNhY2lvbmVzIiwiYXBwIiwicHJlY2lvcyIsImJhc2UiLCJzbGljZSIsIm1hcCIsInAiLCJwcmVjaW9fZXN0aW1hZG8iLCJwcmVndW50YXNGcmVjdWVudGVzIiwib2J0ZW5lclByZWd1bnRhc0ZyZWN1ZW50ZXMiLCJyZXNwdWVzdGEiLCJwcmVndW50YXNfZnJlY3VlbnRlcyIsImNvZGlnb3MiLCJjb2RpZ29BcmVhIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidGVsZWZvbm9TdWZmaXgiLCJmYXFzIiwicHJlZ3VudGEiLCJmaWx0ZXIiLCJmYXEiLCJrbm93bGVkZ2VCYXNlIiwicXVvdGVFbmdpbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/quote-engine.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/quote-parser.ts":
/*!*********************************!*\
  !*** ./src/lib/quote-parser.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractContactInfo: () => (/* binding */ extractContactInfo),\n/* harmony export */   isValidQuoteRequest: () => (/* binding */ isValidQuoteRequest),\n/* harmony export */   parseQuoteConsulta: () => (/* binding */ parseQuoteConsulta)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _secure_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./secure-config */ \"(rsc)/./src/lib/secure-config.ts\");\n\n\n// Inicializar OpenAI con configuraci√≥n segura\nfunction getOpenAIClient() {\n    if (!_secure_config__WEBPACK_IMPORTED_MODULE_1__.secureConfig.isReady()) {\n        throw new Error(\"SecureConfig not initialized. Call initializeSecureConfig() first.\");\n    }\n    const config = _secure_config__WEBPACK_IMPORTED_MODULE_1__.secureConfig.getOpenAIConfig();\n    return new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI({\n        apiKey: config.apiKey\n    });\n}\nasync function parseQuoteConsulta(consultaText) {\n    const openai = getOpenAIClient();\n    const prompt = `Eres un experto en productos de construcci√≥n (paneles aislantes, chapas, etc.) especializado en el mercado uruguayo.\n\nExtrae informaci√≥n estructurada de esta consulta de cotizaci√≥n:\n\n\"${consultaText}\"\n\nIdentifica y extrae:\n1. Tipo de producto (Isodec, Isoroof, Isopanel, Isowall, Chapas, Calamer√≠a, etc.)\n2. Grosor en mm (si se menciona: 50, 100, 150, 200mm)\n3. Cantidades y unidades (paneles, m2, ml, unidades)\n4. Dimensiones espec√≠ficas (largo x ancho x alto)\n5. Color/acabado (blanco, gris, etc.)\n6. Servicios: flete, instalaci√≥n, accesorios\n7. Estado: completo | pendiente_info | ver_plano\n\nProductos comunes en Uruguay:\n- Isodec (paneles aislantes EPS)\n- Isoroof (paneles para techo)\n- Isopanel (paneles generales)\n- Isowall (paneles para paredes)\n- Chapas (met√°licas)\n- Calamer√≠a (estructura met√°lica)\n\nServicios comunes:\n- \"+ flete\" = incluir transporte\n- \"+ instalaci√≥n\" / \"completo\" = instalaci√≥n incluida\n- \"+ accesorios\" = accesorios incluidos\n\nEstados especiales:\n- \"aguardo info\" / \"ESPERO INFO\" = pendiente_info\n- \"Ver plano\" = ver_plano\n- Informaci√≥n completa = completo\n\nResponde SOLO con JSON v√°lido siguiendo este esquema exacto:\n{\n  \"producto\": {\n    \"tipo\": \"string\",\n    \"grosor\": \"string o null\",\n    \"color\": \"string o null\", \n    \"cantidad\": \"number o null\",\n    \"unidad\": \"paneles|m2|ml|unidades o null\"\n  },\n  \"dimensiones\": {\n    \"largo\": \"number o null\",\n    \"ancho\": \"number o null\", \n    \"alto\": \"number o null\",\n    \"area_m2\": \"number o null\"\n  },\n  \"servicios\": {\n    \"flete\": \"boolean\",\n    \"instalacion\": \"boolean\",\n    \"accesorios\": \"boolean\"\n  },\n  \"estado_info\": \"completo|pendiente_info|ver_plano\",\n  \"notas\": \"string o null\",\n  \"confianza\": \"number entre 0 y 1\"\n}`;\n    try {\n        const completion = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            response_format: {\n                type: \"json_object\"\n            },\n            temperature: 0.1,\n            max_tokens: 1000\n        });\n        const parsed = JSON.parse(completion.choices[0].message.content);\n        // Validar estructura b√°sica\n        if (!parsed.producto || !parsed.servicios || !parsed.estado_info) {\n            throw new Error(\"Invalid response structure from OpenAI\");\n        }\n        return parsed;\n    } catch (error) {\n        console.error(\"Error parsing quote consulta:\", error);\n        // Fallback parsing b√°sico sin IA\n        return parseQuoteFallback(consultaText);\n    }\n}\n// Parser de fallback sin IA\nfunction parseQuoteFallback(consultaText) {\n    const text = consultaText.toLowerCase();\n    // Detectar tipo de producto\n    let tipo = \"Desconocido\";\n    if (text.includes(\"isodec\")) tipo = \"Isodec\";\n    else if (text.includes(\"isoroof\")) tipo = \"Isoroof\";\n    else if (text.includes(\"isopanel\")) tipo = \"Isopanel\";\n    else if (text.includes(\"isowall\")) tipo = \"Isowall\";\n    else if (text.includes(\"chapa\")) tipo = \"Chapas\";\n    else if (text.includes(\"calamer\\xeda\") || text.includes(\"calameria\")) tipo = \"Calamer\\xeda\";\n    // Detectar grosor\n    const grosorMatch = text.match(/(\\d+)\\s*mm/);\n    const grosor = grosorMatch ? grosorMatch[1] + \"mm\" : null;\n    // Detectar servicios\n    const flete = text.includes(\"flete\") || text.includes(\"+ flete\");\n    const instalacion = text.includes(\"completo\") || text.includes(\"instalaci\\xf3n\") || text.includes(\"instalacion\");\n    const accesorios = text.includes(\"accesorios\") || text.includes(\"+ accesorios\");\n    // Detectar estado\n    let estado_info = \"completo\";\n    if (text.includes(\"aguardo\") || text.includes(\"espero\") || text.includes(\"falta info\")) {\n        estado_info = \"pendiente_info\";\n    } else if (text.includes(\"ver plano\") || text.includes(\"plano\")) {\n        estado_info = \"ver_plano\";\n    }\n    // Detectar dimensiones b√°sicas\n    const dimensiones = {};\n    const largoMatch = text.match(/(\\d+(?:\\.\\d+)?)\\s*(?:largo|x\\s*(\\d+(?:\\.\\d+)?))/);\n    if (largoMatch) {\n        dimensiones.largo = parseFloat(largoMatch[1]);\n        if (largoMatch[2]) dimensiones.ancho = parseFloat(largoMatch[2]);\n    }\n    const areaMatch = text.match(/(\\d+(?:\\.\\d+)?)\\s*m2/);\n    if (areaMatch) {\n        dimensiones.area_m2 = parseFloat(areaMatch[1]);\n    }\n    return {\n        producto: {\n            tipo,\n            grosor,\n            color: null,\n            cantidad: null,\n            unidad: null\n        },\n        dimensiones: Object.keys(dimensiones).length > 0 ? dimensiones : undefined,\n        servicios: {\n            flete,\n            instalacion,\n            accesorios\n        },\n        estado_info,\n        notas: null,\n        confianza: 0.3 // Baja confianza para fallback\n    };\n}\n// Funci√≥n para validar si una consulta es v√°lida para cotizaci√≥n\nfunction isValidQuoteRequest(consultaText) {\n    const text = consultaText.toLowerCase();\n    // Palabras clave que indican una consulta de cotizaci√≥n\n    const keywords = [\n        \"isodec\",\n        \"isoroof\",\n        \"isopanel\",\n        \"isowall\",\n        \"chapa\",\n        \"calamer\\xeda\",\n        \"calameria\",\n        \"panel\",\n        \"techo\",\n        \"pared\",\n        \"galp\\xf3n\",\n        \"galpon\",\n        \"cubierta\",\n        \"m2\",\n        \"metro\",\n        \"precio\",\n        \"cotizaci\\xf3n\",\n        \"presupuesto\",\n        \"costo\"\n    ];\n    return keywords.some((keyword)=>text.includes(keyword));\n}\n// Funci√≥n para extraer informaci√≥n de contacto del texto\nfunction extractContactInfo(text) {\n    const phoneMatch = text.match(/(\\d{3,4}\\s*\\d{3,4}\\s*\\d{3,4})/);\n    const emailMatch = text.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/);\n    const nameMatch = text.match(/(?:soy|me llamo|nombre es)\\s+([A-Za-z\\s]+)/i);\n    return {\n        phone: phoneMatch ? phoneMatch[1].replace(/\\s/g, \"\") : undefined,\n        email: emailMatch ? emailMatch[1] : undefined,\n        name: nameMatch ? nameMatch[1].trim() : undefined\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWWpDLEtBQUtLLEtBQUssQ0FBQztJQUU3QixPQUFPO1FBQ0w2QixPQUFPSCxhQUFhQSxVQUFVLENBQUMsRUFBRSxDQUFDSSxPQUFPLENBQUMsT0FBTyxNQUFNWjtRQUN2RGEsT0FBT0osYUFBYUEsVUFBVSxDQUFDLEVBQUUsR0FBR1Q7UUFDcENjLE1BQU1KLFlBQVlBLFNBQVMsQ0FBQyxFQUFFLENBQUNLLElBQUksS0FBS2Y7SUFDMUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbnZlcnNhdGlvbmFsLXF1b3RpbmctZGFzaGJvYXJkLy4vc3JjL2xpYi9xdW90ZS1wYXJzZXIudHM/YjRlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyBzZWN1cmVDb25maWcgfSBmcm9tICcuL3NlY3VyZS1jb25maWcnXG5cbi8vIEluaWNpYWxpemFyIE9wZW5BSSBjb24gY29uZmlndXJhY2nDs24gc2VndXJhXG5mdW5jdGlvbiBnZXRPcGVuQUlDbGllbnQoKTogT3BlbkFJIHtcbiAgaWYgKCFzZWN1cmVDb25maWcuaXNSZWFkeSgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZWN1cmVDb25maWcgbm90IGluaXRpYWxpemVkLiBDYWxsIGluaXRpYWxpemVTZWN1cmVDb25maWcoKSBmaXJzdC4nKVxuICB9XG5cbiAgY29uc3QgY29uZmlnID0gc2VjdXJlQ29uZmlnLmdldE9wZW5BSUNvbmZpZygpXG4gIHJldHVybiBuZXcgT3BlbkFJKHsgXG4gICAgYXBpS2V5OiBjb25maWcuYXBpS2V5XG4gIH0pXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkUXVvdGUge1xuICBwcm9kdWN0bzoge1xuICAgIHRpcG86IHN0cmluZ1xuICAgIGdyb3Nvcj86IHN0cmluZyB8IG51bGxcbiAgICBjb2xvcj86IHN0cmluZyB8IG51bGxcbiAgICBjYW50aWRhZD86IG51bWJlciB8IG51bGxcbiAgICB1bmlkYWQ/OiAncGFuZWxlcycgfCAnbTInIHwgJ21sJyB8ICd1bmlkYWRlcycgfCBudWxsXG4gIH1cbiAgZGltZW5zaW9uZXM/OiB7XG4gICAgbGFyZ28/OiBudW1iZXIgfCBudWxsXG4gICAgYW5jaG8/OiBudW1iZXIgfCBudWxsXG4gICAgYWx0bz86IG51bWJlciB8IG51bGxcbiAgICBhcmVhX20yPzogbnVtYmVyIHwgbnVsbFxuICB9XG4gIHNlcnZpY2lvczoge1xuICAgIGZsZXRlOiBib29sZWFuXG4gICAgaW5zdGFsYWNpb246IGJvb2xlYW5cbiAgICBhY2Nlc29yaW9zOiBib29sZWFuXG4gIH1cbiAgZXN0YWRvX2luZm86ICdjb21wbGV0bycgfCAncGVuZGllbnRlX2luZm8nIHwgJ3Zlcl9wbGFubydcbiAgbm90YXM/OiBzdHJpbmcgfCBudWxsXG4gIGNvbmZpYW56YTogbnVtYmVyIC8vIDAtMSwgcXXDqSB0YW4gc2VndXJvIGVzdMOhIGVsIHBhcnNlclxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VRdW90ZUNvbnN1bHRhKGNvbnN1bHRhVGV4dDogc3RyaW5nKTogUHJvbWlzZTxQYXJzZWRRdW90ZT4ge1xuICBjb25zdCBvcGVuYWkgPSBnZXRPcGVuQUlDbGllbnQoKVxuXG4gIGNvbnN0IHByb21wdCA9IGBFcmVzIHVuIGV4cGVydG8gZW4gcHJvZHVjdG9zIGRlIGNvbnN0cnVjY2nDs24gKHBhbmVsZXMgYWlzbGFudGVzLCBjaGFwYXMsIGV0Yy4pIGVzcGVjaWFsaXphZG8gZW4gZWwgbWVyY2FkbyB1cnVndWF5by5cblxuRXh0cmFlIGluZm9ybWFjacOzbiBlc3RydWN0dXJhZGEgZGUgZXN0YSBjb25zdWx0YSBkZSBjb3RpemFjacOzbjpcblxuXCIke2NvbnN1bHRhVGV4dH1cIlxuXG5JZGVudGlmaWNhIHkgZXh0cmFlOlxuMS4gVGlwbyBkZSBwcm9kdWN0byAoSXNvZGVjLCBJc29yb29mLCBJc29wYW5lbCwgSXNvd2FsbCwgQ2hhcGFzLCBDYWxhbWVyw61hLCBldGMuKVxuMi4gR3Jvc29yIGVuIG1tIChzaSBzZSBtZW5jaW9uYTogNTAsIDEwMCwgMTUwLCAyMDBtbSlcbjMuIENhbnRpZGFkZXMgeSB1bmlkYWRlcyAocGFuZWxlcywgbTIsIG1sLCB1bmlkYWRlcylcbjQuIERpbWVuc2lvbmVzIGVzcGVjw61maWNhcyAobGFyZ28geCBhbmNobyB4IGFsdG8pXG41LiBDb2xvci9hY2FiYWRvIChibGFuY28sIGdyaXMsIGV0Yy4pXG42LiBTZXJ2aWNpb3M6IGZsZXRlLCBpbnN0YWxhY2nDs24sIGFjY2Vzb3Jpb3NcbjcuIEVzdGFkbzogY29tcGxldG8gfCBwZW5kaWVudGVfaW5mbyB8IHZlcl9wbGFub1xuXG5Qcm9kdWN0b3MgY29tdW5lcyBlbiBVcnVndWF5OlxuLSBJc29kZWMgKHBhbmVsZXMgYWlzbGFudGVzIEVQUylcbi0gSXNvcm9vZiAocGFuZWxlcyBwYXJhIHRlY2hvKVxuLSBJc29wYW5lbCAocGFuZWxlcyBnZW5lcmFsZXMpXG4tIElzb3dhbGwgKHBhbmVsZXMgcGFyYSBwYXJlZGVzKVxuLSBDaGFwYXMgKG1ldMOhbGljYXMpXG4tIENhbGFtZXLDrWEgKGVzdHJ1Y3R1cmEgbWV0w6FsaWNhKVxuXG5TZXJ2aWNpb3MgY29tdW5lczpcbi0gXCIrIGZsZXRlXCIgPSBpbmNsdWlyIHRyYW5zcG9ydGVcbi0gXCIrIGluc3RhbGFjacOzblwiIC8gXCJjb21wbGV0b1wiID0gaW5zdGFsYWNpw7NuIGluY2x1aWRhXG4tIFwiKyBhY2Nlc29yaW9zXCIgPSBhY2Nlc29yaW9zIGluY2x1aWRvc1xuXG5Fc3RhZG9zIGVzcGVjaWFsZXM6XG4tIFwiYWd1YXJkbyBpbmZvXCIgLyBcIkVTUEVSTyBJTkZPXCIgPSBwZW5kaWVudGVfaW5mb1xuLSBcIlZlciBwbGFub1wiID0gdmVyX3BsYW5vXG4tIEluZm9ybWFjacOzbiBjb21wbGV0YSA9IGNvbXBsZXRvXG5cblJlc3BvbmRlIFNPTE8gY29uIEpTT04gdsOhbGlkbyBzaWd1aWVuZG8gZXN0ZSBlc3F1ZW1hIGV4YWN0bzpcbntcbiAgXCJwcm9kdWN0b1wiOiB7XG4gICAgXCJ0aXBvXCI6IFwic3RyaW5nXCIsXG4gICAgXCJncm9zb3JcIjogXCJzdHJpbmcgbyBudWxsXCIsXG4gICAgXCJjb2xvclwiOiBcInN0cmluZyBvIG51bGxcIiwgXG4gICAgXCJjYW50aWRhZFwiOiBcIm51bWJlciBvIG51bGxcIixcbiAgICBcInVuaWRhZFwiOiBcInBhbmVsZXN8bTJ8bWx8dW5pZGFkZXMgbyBudWxsXCJcbiAgfSxcbiAgXCJkaW1lbnNpb25lc1wiOiB7XG4gICAgXCJsYXJnb1wiOiBcIm51bWJlciBvIG51bGxcIixcbiAgICBcImFuY2hvXCI6IFwibnVtYmVyIG8gbnVsbFwiLCBcbiAgICBcImFsdG9cIjogXCJudW1iZXIgbyBudWxsXCIsXG4gICAgXCJhcmVhX20yXCI6IFwibnVtYmVyIG8gbnVsbFwiXG4gIH0sXG4gIFwic2VydmljaW9zXCI6IHtcbiAgICBcImZsZXRlXCI6IFwiYm9vbGVhblwiLFxuICAgIFwiaW5zdGFsYWNpb25cIjogXCJib29sZWFuXCIsXG4gICAgXCJhY2Nlc29yaW9zXCI6IFwiYm9vbGVhblwiXG4gIH0sXG4gIFwiZXN0YWRvX2luZm9cIjogXCJjb21wbGV0b3xwZW5kaWVudGVfaW5mb3x2ZXJfcGxhbm9cIixcbiAgXCJub3Rhc1wiOiBcInN0cmluZyBvIG51bGxcIixcbiAgXCJjb25maWFuemFcIjogXCJudW1iZXIgZW50cmUgMCB5IDFcIlxufWBcblxuICB0cnkge1xuICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6ICdncHQtNCcsXG4gICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyB9LFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMSxcbiAgICAgIG1heF90b2tlbnM6IDEwMDBcbiAgICB9KVxuICAgIFxuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY29tcGxldGlvbi5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudClcbiAgICBcbiAgICAvLyBWYWxpZGFyIGVzdHJ1Y3R1cmEgYsOhc2ljYVxuICAgIGlmICghcGFyc2VkLnByb2R1Y3RvIHx8ICFwYXJzZWQuc2VydmljaW9zIHx8ICFwYXJzZWQuZXN0YWRvX2luZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBzdHJ1Y3R1cmUgZnJvbSBPcGVuQUknKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcGFyc2VkIGFzIFBhcnNlZFF1b3RlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBxdW90ZSBjb25zdWx0YTonLCBlcnJvcilcbiAgICBcbiAgICAvLyBGYWxsYmFjayBwYXJzaW5nIGLDoXNpY28gc2luIElBXG4gICAgcmV0dXJuIHBhcnNlUXVvdGVGYWxsYmFjayhjb25zdWx0YVRleHQpXG4gIH1cbn1cblxuLy8gUGFyc2VyIGRlIGZhbGxiYWNrIHNpbiBJQVxuZnVuY3Rpb24gcGFyc2VRdW90ZUZhbGxiYWNrKGNvbnN1bHRhVGV4dDogc3RyaW5nKTogUGFyc2VkUXVvdGUge1xuICBjb25zdCB0ZXh0ID0gY29uc3VsdGFUZXh0LnRvTG93ZXJDYXNlKClcbiAgXG4gIC8vIERldGVjdGFyIHRpcG8gZGUgcHJvZHVjdG9cbiAgbGV0IHRpcG8gPSAnRGVzY29ub2NpZG8nXG4gIGlmICh0ZXh0LmluY2x1ZGVzKCdpc29kZWMnKSkgdGlwbyA9ICdJc29kZWMnXG4gIGVsc2UgaWYgKHRleHQuaW5jbHVkZXMoJ2lzb3Jvb2YnKSkgdGlwbyA9ICdJc29yb29mJ1xuICBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCdpc29wYW5lbCcpKSB0aXBvID0gJ0lzb3BhbmVsJ1xuICBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCdpc293YWxsJykpIHRpcG8gPSAnSXNvd2FsbCdcbiAgZWxzZSBpZiAodGV4dC5pbmNsdWRlcygnY2hhcGEnKSkgdGlwbyA9ICdDaGFwYXMnXG4gIGVsc2UgaWYgKHRleHQuaW5jbHVkZXMoJ2NhbGFtZXLDrWEnKSB8fCB0ZXh0LmluY2x1ZGVzKCdjYWxhbWVyaWEnKSkgdGlwbyA9ICdDYWxhbWVyw61hJ1xuICBcbiAgLy8gRGV0ZWN0YXIgZ3Jvc29yXG4gIGNvbnN0IGdyb3Nvck1hdGNoID0gdGV4dC5tYXRjaCgvKFxcZCspXFxzKm1tLylcbiAgY29uc3QgZ3Jvc29yID0gZ3Jvc29yTWF0Y2ggPyBncm9zb3JNYXRjaFsxXSArICdtbScgOiBudWxsXG4gIFxuICAvLyBEZXRlY3RhciBzZXJ2aWNpb3NcbiAgY29uc3QgZmxldGUgPSB0ZXh0LmluY2x1ZGVzKCdmbGV0ZScpIHx8IHRleHQuaW5jbHVkZXMoJysgZmxldGUnKVxuICBjb25zdCBpbnN0YWxhY2lvbiA9IHRleHQuaW5jbHVkZXMoJ2NvbXBsZXRvJykgfHwgdGV4dC5pbmNsdWRlcygnaW5zdGFsYWNpw7NuJykgfHwgdGV4dC5pbmNsdWRlcygnaW5zdGFsYWNpb24nKVxuICBjb25zdCBhY2Nlc29yaW9zID0gdGV4dC5pbmNsdWRlcygnYWNjZXNvcmlvcycpIHx8IHRleHQuaW5jbHVkZXMoJysgYWNjZXNvcmlvcycpXG4gIFxuICAvLyBEZXRlY3RhciBlc3RhZG9cbiAgbGV0IGVzdGFkb19pbmZvOiAnY29tcGxldG8nIHwgJ3BlbmRpZW50ZV9pbmZvJyB8ICd2ZXJfcGxhbm8nID0gJ2NvbXBsZXRvJ1xuICBpZiAodGV4dC5pbmNsdWRlcygnYWd1YXJkbycpIHx8IHRleHQuaW5jbHVkZXMoJ2VzcGVybycpIHx8IHRleHQuaW5jbHVkZXMoJ2ZhbHRhIGluZm8nKSkge1xuICAgIGVzdGFkb19pbmZvID0gJ3BlbmRpZW50ZV9pbmZvJ1xuICB9IGVsc2UgaWYgKHRleHQuaW5jbHVkZXMoJ3ZlciBwbGFubycpIHx8IHRleHQuaW5jbHVkZXMoJ3BsYW5vJykpIHtcbiAgICBlc3RhZG9faW5mbyA9ICd2ZXJfcGxhbm8nXG4gIH1cbiAgXG4gIC8vIERldGVjdGFyIGRpbWVuc2lvbmVzIGLDoXNpY2FzXG4gIGNvbnN0IGRpbWVuc2lvbmVzOiBhbnkgPSB7fVxuICBjb25zdCBsYXJnb01hdGNoID0gdGV4dC5tYXRjaCgvKFxcZCsoPzpcXC5cXGQrKT8pXFxzKig/OmxhcmdvfHhcXHMqKFxcZCsoPzpcXC5cXGQrKT8pKS8pXG4gIGlmIChsYXJnb01hdGNoKSB7XG4gICAgZGltZW5zaW9uZXMubGFyZ28gPSBwYXJzZUZsb2F0KGxhcmdvTWF0Y2hbMV0pXG4gICAgaWYgKGxhcmdvTWF0Y2hbMl0pIGRpbWVuc2lvbmVzLmFuY2hvID0gcGFyc2VGbG9hdChsYXJnb01hdGNoWzJdKVxuICB9XG4gIFxuICBjb25zdCBhcmVhTWF0Y2ggPSB0ZXh0Lm1hdGNoKC8oXFxkKyg/OlxcLlxcZCspPylcXHMqbTIvKVxuICBpZiAoYXJlYU1hdGNoKSB7XG4gICAgZGltZW5zaW9uZXMuYXJlYV9tMiA9IHBhcnNlRmxvYXQoYXJlYU1hdGNoWzFdKVxuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIHByb2R1Y3RvOiB7XG4gICAgICB0aXBvLFxuICAgICAgZ3Jvc29yLFxuICAgICAgY29sb3I6IG51bGwsXG4gICAgICBjYW50aWRhZDogbnVsbCxcbiAgICAgIHVuaWRhZDogbnVsbFxuICAgIH0sXG4gICAgZGltZW5zaW9uZXM6IE9iamVjdC5rZXlzKGRpbWVuc2lvbmVzKS5sZW5ndGggPiAwID8gZGltZW5zaW9uZXMgOiB1bmRlZmluZWQsXG4gICAgc2VydmljaW9zOiB7XG4gICAgICBmbGV0ZSxcbiAgICAgIGluc3RhbGFjaW9uLFxuICAgICAgYWNjZXNvcmlvc1xuICAgIH0sXG4gICAgZXN0YWRvX2luZm8sXG4gICAgbm90YXM6IG51bGwsXG4gICAgY29uZmlhbnphOiAwLjMgLy8gQmFqYSBjb25maWFuemEgcGFyYSBmYWxsYmFja1xuICB9XG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgdmFsaWRhciBzaSB1bmEgY29uc3VsdGEgZXMgdsOhbGlkYSBwYXJhIGNvdGl6YWNpw7NuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFF1b3RlUmVxdWVzdChjb25zdWx0YVRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCB0ZXh0ID0gY29uc3VsdGFUZXh0LnRvTG93ZXJDYXNlKClcbiAgXG4gIC8vIFBhbGFicmFzIGNsYXZlIHF1ZSBpbmRpY2FuIHVuYSBjb25zdWx0YSBkZSBjb3RpemFjacOzblxuICBjb25zdCBrZXl3b3JkcyA9IFtcbiAgICAnaXNvZGVjJywgJ2lzb3Jvb2YnLCAnaXNvcGFuZWwnLCAnaXNvd2FsbCcsICdjaGFwYScsICdjYWxhbWVyw61hJywgJ2NhbGFtZXJpYScsXG4gICAgJ3BhbmVsJywgJ3RlY2hvJywgJ3BhcmVkJywgJ2dhbHDDs24nLCAnZ2FscG9uJywgJ2N1YmllcnRhJywgJ20yJywgJ21ldHJvJyxcbiAgICAncHJlY2lvJywgJ2NvdGl6YWNpw7NuJywgJ3ByZXN1cHVlc3RvJywgJ2Nvc3RvJ1xuICBdXG4gIFxuICByZXR1cm4ga2V5d29yZHMuc29tZShrZXl3b3JkID0+IHRleHQuaW5jbHVkZXMoa2V5d29yZCkpXG59XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZXh0cmFlciBpbmZvcm1hY2nDs24gZGUgY29udGFjdG8gZGVsIHRleHRvXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdENvbnRhY3RJbmZvKHRleHQ6IHN0cmluZyk6IHtcbiAgcGhvbmU/OiBzdHJpbmdcbiAgZW1haWw/OiBzdHJpbmdcbiAgbmFtZT86IHN0cmluZ1xufSB7XG4gIGNvbnN0IHBob25lTWF0Y2ggPSB0ZXh0Lm1hdGNoKC8oXFxkezMsNH1cXHMqXFxkezMsNH1cXHMqXFxkezMsNH0pLylcbiAgY29uc3QgZW1haWxNYXRjaCA9IHRleHQubWF0Y2goLyhbYS16QS1aMC05Ll8lKy1dK0BbYS16QS1aMC05Li1dK1xcLlthLXpBLVpdezIsfSkvKVxuICBjb25zdCBuYW1lTWF0Y2ggPSB0ZXh0Lm1hdGNoKC8oPzpzb3l8bWUgbGxhbW98bm9tYnJlIGVzKVxccysoW0EtWmEtelxcc10rKS9pKVxuICBcbiAgcmV0dXJuIHtcbiAgICBwaG9uZTogcGhvbmVNYXRjaCA/IHBob25lTWF0Y2hbMV0ucmVwbGFjZSgvXFxzL2csICcnKSA6IHVuZGVmaW5lZCxcbiAgICBlbWFpbDogZW1haWxNYXRjaCA/IGVtYWlsTWF0Y2hbMV0gOiB1bmRlZmluZWQsXG4gICAgbmFtZTogbmFtZU1hdGNoID8gbmFtZU1hdGNoWzFdLnRyaW0oKSA6IHVuZGVmaW5lZFxuICB9XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwic2VjdXJlQ29uZmlnIiwiZ2V0T3BlbkFJQ2xpZW50IiwiaXNSZWFkeSIsIkVycm9yIiwiY29uZmlnIiwiZ2V0T3BlbkFJQ29uZmlnIiwiYXBpS2V5IiwicGFyc2VRdW90ZUNvbnN1bHRhIiwiY29uc3VsdGFUZXh0Iiwib3BlbmFpIiwicHJvbXB0IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsInByb2R1Y3RvIiwic2VydmljaW9zIiwiZXN0YWRvX2luZm8iLCJlcnJvciIsImNvbnNvbGUiLCJwYXJzZVF1b3RlRmFsbGJhY2siLCJ0ZXh0IiwidG9Mb3dlckNhc2UiLCJ0aXBvIiwiaW5jbHVkZXMiLCJncm9zb3JNYXRjaCIsIm1hdGNoIiwiZ3Jvc29yIiwiZmxldGUiLCJpbnN0YWxhY2lvbiIsImFjY2Vzb3Jpb3MiLCJkaW1lbnNpb25lcyIsImxhcmdvTWF0Y2giLCJsYXJnbyIsInBhcnNlRmxvYXQiLCJhbmNobyIsImFyZWFNYXRjaCIsImFyZWFfbTIiLCJjb2xvciIsImNhbnRpZGFkIiwidW5pZGFkIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm5vdGFzIiwiY29uZmlhbnphIiwiaXNWYWxpZFF1b3RlUmVxdWVzdCIsImtleXdvcmRzIiwic29tZSIsImtleXdvcmQiLCJleHRyYWN0Q29udGFjdEluZm8iLCJwaG9uZU1hdGNoIiwiZW1haWxNYXRjaCIsIm5hbWVNYXRjaCIsInBob25lIiwicmVwbGFjZSIsImVtYWlsIiwibmFtZSIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/quote-parser.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/quote-service.ts":
/*!**********************************!*\
  !*** ./src/lib/quote-service.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuoteService: () => (/* binding */ QuoteService)\n/* harmony export */ });\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n\nclass QuoteService {\n    async createQuote(quoteData) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quote = {\n            ...quoteData,\n            createdAt: new Date(),\n            updatedAt: new Date(),\n            history: [\n                {\n                    timestamp: new Date(),\n                    action: \"created\",\n                    newValue: quoteData\n                }\n            ]\n        };\n        const result = await collection.insertOne(quote);\n        return {\n            ...quote,\n            _id: result.insertedId.toString()\n        };\n    }\n    async getQuoteById(id) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quote = await collection.findOne({\n            _id: id\n        });\n        return quote;\n    }\n    async getQuoteByArg(arg) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quote = await collection.findOne({\n            arg\n        });\n        return quote;\n    }\n    async getQuotesByPhone(phone) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quotes = await collection.find({\n            telefono: {\n                $regex: phone,\n                $options: \"i\"\n            }\n        }).sort({\n            createdAt: -1\n        }).toArray();\n        return quotes;\n    }\n    async updateQuoteStatus(arg, newStatus, user) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quote = await this.getQuoteByArg(arg);\n        if (!quote) return false;\n        const oldStatus = quote.estado;\n        const result = await collection.updateOne({\n            arg\n        }, {\n            $set: {\n                estado: newStatus,\n                updatedAt: new Date()\n            },\n            $push: {\n                history: {\n                    timestamp: new Date(),\n                    action: \"status_update\",\n                    oldValue: oldStatus,\n                    newValue: newStatus,\n                    user\n                }\n            }\n        });\n        return result.modifiedCount > 0;\n    }\n    async updateQuoteParsedData(arg, parsedData) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const result = await collection.updateOne({\n            arg\n        }, {\n            $set: {\n                parsed: parsedData,\n                updatedAt: new Date()\n            },\n            $push: {\n                history: {\n                    timestamp: new Date(),\n                    action: \"parsed_data_update\",\n                    newValue: parsedData\n                }\n            }\n        });\n        return result.modifiedCount > 0;\n    }\n    async getQuotesByEstado(estado) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quotes = await collection.find({\n            estado\n        }).sort({\n            createdAt: -1\n        }).toArray();\n        return quotes;\n    }\n    async getAllQuotes(limit = 100, skip = 0) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quotes = await collection.find({}).sort({\n            createdAt: -1\n        }).skip(skip).limit(limit).toArray();\n        return quotes;\n    }\n    async getStats() {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const [totalPendientes, totalEnviados, totalConfirmados, totalGeneral] = await Promise.all([\n            collection.countDocuments({\n                estado: \"Pendiente\"\n            }),\n            collection.countDocuments({\n                estado: \"Enviado\"\n            }),\n            collection.countDocuments({\n                estado: \"Confirmado\"\n            }),\n            collection.countDocuments({})\n        ]);\n        // Estad√≠sticas por origen\n        const porOrigen = await collection.aggregate([\n            {\n                $group: {\n                    _id: \"$origen\",\n                    count: {\n                        $sum: 1\n                    }\n                }\n            }\n        ]).toArray();\n        const porOrigenMap = {\n            WA: 0,\n            LO: 0,\n            EM: 0,\n            CL: 0\n        };\n        porOrigen.forEach((item)=>{\n            if (item._id in porOrigenMap) {\n                porOrigenMap[item._id] = item.count;\n            }\n        });\n        // Estad√≠sticas por estado\n        const porEstado = await collection.aggregate([\n            {\n                $group: {\n                    _id: \"$estado\",\n                    count: {\n                        $sum: 1\n                    }\n                }\n            }\n        ]).toArray();\n        const porEstadoMap = {\n            Pendiente: 0,\n            Adjunto: 0,\n            Listo: 0,\n            Enviado: 0,\n            Asignado: 0,\n            Confirmado: 0\n        };\n        porEstado.forEach((item)=>{\n            if (item._id in porEstadoMap) {\n                porEstadoMap[item._id] = item.count;\n            }\n        });\n        return {\n            totalPendientes,\n            totalEnviados,\n            totalConfirmados,\n            totalGeneral,\n            porOrigen: porOrigenMap,\n            porEstado: porEstadoMap,\n            ultimaActualizacion: new Date()\n        };\n    }\n    async searchQuotes(query) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const quotes = await collection.find({\n            $or: [\n                {\n                    cliente: {\n                        $regex: query,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    consulta: {\n                        $regex: query,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    arg: {\n                        $regex: query,\n                        $options: \"i\"\n                    }\n                },\n                {\n                    telefono: {\n                        $regex: query,\n                        $options: \"i\"\n                    }\n                }\n            ]\n        }).sort({\n            createdAt: -1\n        }).limit(50).toArray();\n        return quotes;\n    }\n    async deleteQuote(arg) {\n        const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_0__.getDatabase)();\n        const collection = db.collection(this.collectionName);\n        const result = await collection.deleteOne({\n            arg\n        });\n        return result.deletedCount > 0;\n    }\n    constructor(){\n        this.collectionName = \"quotes\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xELE1BQU03RSxLQUFLLE1BQU1KLHFEQUFXQTtRQUM1QixNQUFNSyxhQUFhRCxHQUFHQyxVQUFVLENBQUMsSUFBSSxDQUFDQyxjQUFjO1FBRXBELE1BQU1xQixTQUFTLE1BQU10QixXQUFXdUIsSUFBSSxDQUFDO1lBQ25Dc0QsS0FBSztnQkFDSDtvQkFBRUMsU0FBUzt3QkFBRXJELFFBQVFtRDt3QkFBT2xELFVBQVU7b0JBQUk7Z0JBQUU7Z0JBQzVDO29CQUFFcUQsVUFBVTt3QkFBRXRELFFBQVFtRDt3QkFBT2xELFVBQVU7b0JBQUk7Z0JBQUU7Z0JBQzdDO29CQUFFUCxLQUFLO3dCQUFFTSxRQUFRbUQ7d0JBQU9sRCxVQUFVO29CQUFJO2dCQUFFO2dCQUN4QztvQkFBRUYsVUFBVTt3QkFBRUMsUUFBUW1EO3dCQUFPbEQsVUFBVTtvQkFBSTtnQkFBRTthQUM5QztRQUNILEdBQ0dDLElBQUksQ0FBQztZQUFFeEIsV0FBVyxDQUFDO1FBQUUsR0FDckJ5QyxLQUFLLENBQUMsSUFDTmhCLE9BQU87UUFFVixPQUFPTjtJQUNUO0lBRUEsTUFBTTBELFlBQVk3RCxHQUFXLEVBQW9CO1FBQy9DLE1BQU1wQixLQUFLLE1BQU1KLHFEQUFXQTtRQUM1QixNQUFNSyxhQUFhRCxHQUFHQyxVQUFVLENBQUMsSUFBSSxDQUFDQyxjQUFjO1FBRXBELE1BQU1TLFNBQVMsTUFBTVYsV0FBV2lGLFNBQVMsQ0FBQztZQUFFOUQ7UUFBSTtRQUNoRCxPQUFPVCxPQUFPd0UsWUFBWSxHQUFHO0lBQy9COzthQXBOUWpGLGlCQUFpQjs7QUFxTjNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29udmVyc2F0aW9uYWwtcXVvdGluZy1kYXNoYm9hcmQvLi9zcmMvbGliL3F1b3RlLXNlcnZpY2UudHM/ZTBlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRhYmFzZSB9IGZyb20gJy4vbW9uZ29kYidcbmltcG9ydCB7IFF1b3RlLCBRdW90ZVN0YXRzIH0gZnJvbSAnQC9tb2RlbHMvUXVvdGUnXG5cbmV4cG9ydCBjbGFzcyBRdW90ZVNlcnZpY2Uge1xuICBwcml2YXRlIGNvbGxlY3Rpb25OYW1lID0gJ3F1b3RlcydcbiAgXG4gIGFzeW5jIGNyZWF0ZVF1b3RlKHF1b3RlRGF0YTogT21pdDxRdW90ZSwgJ19pZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8UXVvdGU+IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKClcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbih0aGlzLmNvbGxlY3Rpb25OYW1lKVxuICAgIFxuICAgIGNvbnN0IHF1b3RlOiBRdW90ZSA9IHtcbiAgICAgIC4uLnF1b3RlRGF0YSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGhpc3Rvcnk6IFt7XG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgYWN0aW9uOiAnY3JlYXRlZCcsXG4gICAgICAgIG5ld1ZhbHVlOiBxdW90ZURhdGFcbiAgICAgIH1dXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbGxlY3Rpb24uaW5zZXJ0T25lKHF1b3RlKVxuICAgIHJldHVybiB7IC4uLnF1b3RlLCBfaWQ6IHJlc3VsdC5pbnNlcnRlZElkLnRvU3RyaW5nKCkgfVxuICB9XG4gIFxuICBhc3luYyBnZXRRdW90ZUJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8UXVvdGUgfCBudWxsPiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uTmFtZSlcbiAgICBcbiAgICBjb25zdCBxdW90ZSA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7IF9pZDogaWQgfSlcbiAgICByZXR1cm4gcXVvdGUgYXMgUXVvdGUgfCBudWxsXG4gIH1cbiAgXG4gIGFzeW5jIGdldFF1b3RlQnlBcmcoYXJnOiBzdHJpbmcpOiBQcm9taXNlPFF1b3RlIHwgbnVsbD4ge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKHRoaXMuY29sbGVjdGlvbk5hbWUpXG4gICAgXG4gICAgY29uc3QgcXVvdGUgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmRPbmUoeyBhcmcgfSlcbiAgICByZXR1cm4gcXVvdGUgYXMgUXVvdGUgfCBudWxsXG4gIH1cbiAgXG4gIGFzeW5jIGdldFF1b3Rlc0J5UGhvbmUocGhvbmU6IHN0cmluZyk6IFByb21pc2U8UXVvdGVbXT4ge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKHRoaXMuY29sbGVjdGlvbk5hbWUpXG4gICAgXG4gICAgY29uc3QgcXVvdGVzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHsgdGVsZWZvbm86IHsgJHJlZ2V4OiBwaG9uZSwgJG9wdGlvbnM6ICdpJyB9IH0pXG4gICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgIC50b0FycmF5KClcbiAgICBcbiAgICByZXR1cm4gcXVvdGVzIGFzIFF1b3RlW11cbiAgfVxuICBcbiAgYXN5bmMgdXBkYXRlUXVvdGVTdGF0dXMoYXJnOiBzdHJpbmcsIG5ld1N0YXR1czogUXVvdGVbJ2VzdGFkbyddLCB1c2VyPzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uTmFtZSlcbiAgICBcbiAgICBjb25zdCBxdW90ZSA9IGF3YWl0IHRoaXMuZ2V0UXVvdGVCeUFyZyhhcmcpXG4gICAgaWYgKCFxdW90ZSkgcmV0dXJuIGZhbHNlXG4gICAgXG4gICAgY29uc3Qgb2xkU3RhdHVzID0gcXVvdGUuZXN0YWRvXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICB7IGFyZyB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgZXN0YWRvOiBuZXdTdGF0dXMsXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgICRwdXNoOiB7XG4gICAgICAgICAgaGlzdG9yeToge1xuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgYWN0aW9uOiAnc3RhdHVzX3VwZGF0ZScsXG4gICAgICAgICAgICBvbGRWYWx1ZTogb2xkU3RhdHVzLFxuICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1N0YXR1cyxcbiAgICAgICAgICAgIHVzZXJcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdC5tb2RpZmllZENvdW50ID4gMFxuICB9XG4gIFxuICBhc3luYyB1cGRhdGVRdW90ZVBhcnNlZERhdGEoYXJnOiBzdHJpbmcsIHBhcnNlZERhdGE6IFF1b3RlWydwYXJzZWQnXSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKHRoaXMuY29sbGVjdGlvbk5hbWUpXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sbGVjdGlvbi51cGRhdGVPbmUoXG4gICAgICB7IGFyZyB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgcGFyc2VkOiBwYXJzZWREYXRhLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICB9LFxuICAgICAgICAkcHVzaDoge1xuICAgICAgICAgIGhpc3Rvcnk6IHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGFjdGlvbjogJ3BhcnNlZF9kYXRhX3VwZGF0ZScsXG4gICAgICAgICAgICBuZXdWYWx1ZTogcGFyc2VkRGF0YVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0Lm1vZGlmaWVkQ291bnQgPiAwXG4gIH1cbiAgXG4gIGFzeW5jIGdldFF1b3Rlc0J5RXN0YWRvKGVzdGFkbzogUXVvdGVbJ2VzdGFkbyddKTogUHJvbWlzZTxRdW90ZVtdPiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uTmFtZSlcbiAgICBcbiAgICBjb25zdCBxdW90ZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoeyBlc3RhZG8gfSlcbiAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxuICAgICAgLnRvQXJyYXkoKVxuICAgIFxuICAgIHJldHVybiBxdW90ZXMgYXMgUXVvdGVbXVxuICB9XG4gIFxuICBhc3luYyBnZXRBbGxRdW90ZXMobGltaXQ6IG51bWJlciA9IDEwMCwgc2tpcDogbnVtYmVyID0gMCk6IFByb21pc2U8UXVvdGVbXT4ge1xuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGF0YWJhc2UoKVxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkYi5jb2xsZWN0aW9uKHRoaXMuY29sbGVjdGlvbk5hbWUpXG4gICAgXG4gICAgY29uc3QgcXVvdGVzID0gYXdhaXQgY29sbGVjdGlvbi5maW5kKHt9KVxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgICAuc2tpcChza2lwKVxuICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgLnRvQXJyYXkoKVxuICAgIFxuICAgIHJldHVybiBxdW90ZXMgYXMgUXVvdGVbXVxuICB9XG4gIFxuICBhc3luYyBnZXRTdGF0cygpOiBQcm9taXNlPFF1b3RlU3RhdHM+IHtcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERhdGFiYXNlKClcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbih0aGlzLmNvbGxlY3Rpb25OYW1lKVxuICAgIFxuICAgIGNvbnN0IFt0b3RhbFBlbmRpZW50ZXMsIHRvdGFsRW52aWFkb3MsIHRvdGFsQ29uZmlybWFkb3MsIHRvdGFsR2VuZXJhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBjb2xsZWN0aW9uLmNvdW50RG9jdW1lbnRzKHsgZXN0YWRvOiAnUGVuZGllbnRlJyB9KSxcbiAgICAgIGNvbGxlY3Rpb24uY291bnREb2N1bWVudHMoeyBlc3RhZG86ICdFbnZpYWRvJyB9KSxcbiAgICAgIGNvbGxlY3Rpb24uY291bnREb2N1bWVudHMoeyBlc3RhZG86ICdDb25maXJtYWRvJyB9KSxcbiAgICAgIGNvbGxlY3Rpb24uY291bnREb2N1bWVudHMoe30pXG4gICAgXSlcbiAgICBcbiAgICAvLyBFc3RhZMOtc3RpY2FzIHBvciBvcmlnZW5cbiAgICBjb25zdCBwb3JPcmlnZW4gPSBhd2FpdCBjb2xsZWN0aW9uLmFnZ3JlZ2F0ZShbXG4gICAgICB7ICRncm91cDogeyBfaWQ6ICckb3JpZ2VuJywgY291bnQ6IHsgJHN1bTogMSB9IH0gfVxuICAgIF0pLnRvQXJyYXkoKVxuICAgIFxuICAgIGNvbnN0IHBvck9yaWdlbk1hcCA9IHtcbiAgICAgIFdBOiAwLFxuICAgICAgTE86IDAsXG4gICAgICBFTTogMCxcbiAgICAgIENMOiAwXG4gICAgfVxuICAgIFxuICAgIHBvck9yaWdlbi5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgIGlmIChpdGVtLl9pZCBpbiBwb3JPcmlnZW5NYXApIHtcbiAgICAgICAgcG9yT3JpZ2VuTWFwW2l0ZW0uX2lkIGFzIGtleW9mIHR5cGVvZiBwb3JPcmlnZW5NYXBdID0gaXRlbS5jb3VudFxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gRXN0YWTDrXN0aWNhcyBwb3IgZXN0YWRvXG4gICAgY29uc3QgcG9yRXN0YWRvID0gYXdhaXQgY29sbGVjdGlvbi5hZ2dyZWdhdGUoW1xuICAgICAgeyAkZ3JvdXA6IHsgX2lkOiAnJGVzdGFkbycsIGNvdW50OiB7ICRzdW06IDEgfSB9IH1cbiAgICBdKS50b0FycmF5KClcbiAgICBcbiAgICBjb25zdCBwb3JFc3RhZG9NYXAgPSB7XG4gICAgICBQZW5kaWVudGU6IDAsXG4gICAgICBBZGp1bnRvOiAwLFxuICAgICAgTGlzdG86IDAsXG4gICAgICBFbnZpYWRvOiAwLFxuICAgICAgQXNpZ25hZG86IDAsXG4gICAgICBDb25maXJtYWRvOiAwXG4gICAgfVxuICAgIFxuICAgIHBvckVzdGFkby5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcbiAgICAgIGlmIChpdGVtLl9pZCBpbiBwb3JFc3RhZG9NYXApIHtcbiAgICAgICAgcG9yRXN0YWRvTWFwW2l0ZW0uX2lkIGFzIGtleW9mIHR5cGVvZiBwb3JFc3RhZG9NYXBdID0gaXRlbS5jb3VudFxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsUGVuZGllbnRlcyxcbiAgICAgIHRvdGFsRW52aWFkb3MsXG4gICAgICB0b3RhbENvbmZpcm1hZG9zLFxuICAgICAgdG90YWxHZW5lcmFsLFxuICAgICAgcG9yT3JpZ2VuOiBwb3JPcmlnZW5NYXAsXG4gICAgICBwb3JFc3RhZG86IHBvckVzdGFkb01hcCxcbiAgICAgIHVsdGltYUFjdHVhbGl6YWNpb246IG5ldyBEYXRlKClcbiAgICB9XG4gIH1cbiAgXG4gIGFzeW5jIHNlYXJjaFF1b3RlcyhxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxRdW90ZVtdPiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uTmFtZSlcbiAgICBcbiAgICBjb25zdCBxdW90ZXMgPSBhd2FpdCBjb2xsZWN0aW9uLmZpbmQoe1xuICAgICAgJG9yOiBbXG4gICAgICAgIHsgY2xpZW50ZTogeyAkcmVnZXg6IHF1ZXJ5LCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgeyBjb25zdWx0YTogeyAkcmVnZXg6IHF1ZXJ5LCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgeyBhcmc6IHsgJHJlZ2V4OiBxdWVyeSwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgIHsgdGVsZWZvbm86IHsgJHJlZ2V4OiBxdWVyeSwgJG9wdGlvbnM6ICdpJyB9IH1cbiAgICAgIF1cbiAgICB9KVxuICAgICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgICAubGltaXQoNTApXG4gICAgICAudG9BcnJheSgpXG4gICAgXG4gICAgcmV0dXJuIHF1b3RlcyBhcyBRdW90ZVtdXG4gIH1cbiAgXG4gIGFzeW5jIGRlbGV0ZVF1b3RlKGFyZzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYXRhYmFzZSgpXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24odGhpcy5jb2xsZWN0aW9uTmFtZSlcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xsZWN0aW9uLmRlbGV0ZU9uZSh7IGFyZyB9KVxuICAgIHJldHVybiByZXN1bHQuZGVsZXRlZENvdW50ID4gMFxuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0RGF0YWJhc2UiLCJRdW90ZVNlcnZpY2UiLCJjcmVhdGVRdW90ZSIsInF1b3RlRGF0YSIsImRiIiwiY29sbGVjdGlvbiIsImNvbGxlY3Rpb25OYW1lIiwicXVvdGUiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiaGlzdG9yeSIsInRpbWVzdGFtcCIsImFjdGlvbiIsIm5ld1ZhbHVlIiwicmVzdWx0IiwiaW5zZXJ0T25lIiwiX2lkIiwiaW5zZXJ0ZWRJZCIsInRvU3RyaW5nIiwiZ2V0UXVvdGVCeUlkIiwiaWQiLCJmaW5kT25lIiwiZ2V0UXVvdGVCeUFyZyIsImFyZyIsImdldFF1b3Rlc0J5UGhvbmUiLCJwaG9uZSIsInF1b3RlcyIsImZpbmQiLCJ0ZWxlZm9ubyIsIiRyZWdleCIsIiRvcHRpb25zIiwic29ydCIsInRvQXJyYXkiLCJ1cGRhdGVRdW90ZVN0YXR1cyIsIm5ld1N0YXR1cyIsInVzZXIiLCJvbGRTdGF0dXMiLCJlc3RhZG8iLCJ1cGRhdGVPbmUiLCIkc2V0IiwiJHB1c2giLCJvbGRWYWx1ZSIsIm1vZGlmaWVkQ291bnQiLCJ1cGRhdGVRdW90ZVBhcnNlZERhdGEiLCJwYXJzZWREYXRhIiwicGFyc2VkIiwiZ2V0UXVvdGVzQnlFc3RhZG8iLCJnZXRBbGxRdW90ZXMiLCJsaW1pdCIsInNraXAiLCJnZXRTdGF0cyIsInRvdGFsUGVuZGllbnRlcyIsInRvdGFsRW52aWFkb3MiLCJ0b3RhbENvbmZpcm1hZG9zIiwidG90YWxHZW5lcmFsIiwiUHJvbWlzZSIsImFsbCIsImNvdW50RG9jdW1lbnRzIiwicG9yT3JpZ2VuIiwiYWdncmVnYXRlIiwiJGdyb3VwIiwiY291bnQiLCIkc3VtIiwicG9yT3JpZ2VuTWFwIiwiV0EiLCJMTyIsIkVNIiwiQ0wiLCJmb3JFYWNoIiwiaXRlbSIsInBvckVzdGFkbyIsInBvckVzdGFkb01hcCIsIlBlbmRpZW50ZSIsIkFkanVudG8iLCJMaXN0byIsIkVudmlhZG8iLCJBc2lnbmFkbyIsIkNvbmZpcm1hZG8iLCJ1bHRpbWFBY3R1YWxpemFjaW9uIiwic2VhcmNoUXVvdGVzIiwicXVlcnkiLCIkb3IiLCJjbGllbnRlIiwiY29uc3VsdGEiLCJkZWxldGVRdW90ZSIsImRlbGV0ZU9uZSIsImRlbGV0ZWRDb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/quote-service.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/secure-config.ts":
/*!**********************************!*\
  !*** ./src/lib/secure-config.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SecureConfig: () => (/* binding */ SecureConfig),\n/* harmony export */   initializeSecureConfig: () => (/* binding */ initializeSecureConfig),\n/* harmony export */   secureConfig: () => (/* binding */ secureConfig)\n/* harmony export */ });\n/* harmony import */ var _credentials_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./credentials-manager */ \"(rsc)/./src/lib/credentials-manager.ts\");\n\n// Configuraci√≥n centralizada y segura del sistema BMC\nclass SecureConfig {\n    constructor(){\n        this.isInitialized = false;\n    }\n    static getInstance() {\n        if (!SecureConfig.instance) {\n            SecureConfig.instance = new SecureConfig();\n        }\n        return SecureConfig.instance;\n    }\n    // Inicializar configuraci√≥n segura\n    async initialize(credentialsPath) {\n        if (this.isInitialized) return;\n        try {\n            await _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.loadCredentials(credentialsPath);\n            this.isInitialized = true;\n            console.log(\"\\uD83D\\uDD10 Configuraci\\xf3n segura inicializada\");\n        } catch (error) {\n            console.error(\"‚ùå Error inicializando configuraci\\xf3n segura:\", error);\n            throw error;\n        }\n    }\n    // Obtener configuraci√≥n de OpenAI\n    getOpenAIConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getOpenAI();\n        return {\n            apiKey: config.api_key,\n            model: config.model,\n            maxTokens: config.max_tokens,\n            temperature: config.temperature\n        };\n    }\n    // Obtener configuraci√≥n de Google Sheets\n    getGoogleSheetsConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getGoogleSheets();\n        return {\n            sheetId: config.sheet_id,\n            serviceAccountEmail: config.service_account_email,\n            privateKey: config.private_key,\n            scopes: config.scopes\n        };\n    }\n    // Obtener configuraci√≥n de MongoDB\n    getMongoDBConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getMongoDB();\n        return {\n            uri: config.uri,\n            database: config.database,\n            collections: config.collections\n        };\n    }\n    // Obtener configuraci√≥n de WhatsApp\n    getWhatsAppConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getWhatsApp();\n        return {\n            accessToken: config.access_token,\n            phoneNumberId: config.phone_number_id,\n            verifyToken: config.verify_token,\n            webhookUrl: config.webhook_url\n        };\n    }\n    // Obtener configuraci√≥n de n8n\n    getN8NConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getN8N();\n        return {\n            webhookUrl: config.webhook_url,\n            apiKey: config.api_key,\n            baseUrl: config.base_url\n        };\n    }\n    // Obtener configuraci√≥n del sistema\n    getSystemConfig() {\n        const config = _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getSystem();\n        return {\n            environment: config.environment,\n            maxContextTokens: config.max_context_tokens,\n            maxMessagesPerSession: config.max_messages_per_session,\n            inactivityTimeoutMinutes: config.inactivity_timeout_minutes,\n            defaultZone: config.default_zone,\n            encryptionKey: config.encryption_key\n        };\n    }\n    // Validar todas las credenciales\n    validateAllCredentials() {\n        return _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.validateCredentials();\n    }\n    // Obtener resumen de configuraci√≥n (sin datos sensibles)\n    getConfigSummary() {\n        return _credentials_manager__WEBPACK_IMPORTED_MODULE_0__.credentialsManager.getCredentialsSummary();\n    }\n    // Verificar si est√° inicializado\n    isReady() {\n        return this.isInitialized;\n    }\n}\n// Instancia global\nconst secureConfig = SecureConfig.getInstance();\n// Funci√≥n de conveniencia para inicializar\nasync function initializeSecureConfig(credentialsPath) {\n    await secureConfig.initialize(credentialsPath);\n    return secureConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SSxDQUFDL0QsYUFBYTtJQUMzQjtBQUNGO0FBRUEsbUJBQW1CO0FBQ1osTUFBTWdFLGVBQWVqRSxhQUFhRSxXQUFXLEdBQUU7QUFFdEQsMkNBQTJDO0FBQ3BDLGVBQWVnRSx1QkFBdUI3RCxlQUF3QjtJQUNuRSxNQUFNNEQsYUFBYTdELFVBQVUsQ0FBQ0M7SUFDOUIsT0FBTzREO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb252ZXJzYXRpb25hbC1xdW90aW5nLWRhc2hib2FyZC8uL3NyYy9saWIvc2VjdXJlLWNvbmZpZy50cz9kN2ZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWRlbnRpYWxzTWFuYWdlciB9IGZyb20gJy4vY3JlZGVudGlhbHMtbWFuYWdlcidcblxuLy8gQ29uZmlndXJhY2nDs24gY2VudHJhbGl6YWRhIHkgc2VndXJhIGRlbCBzaXN0ZW1hIEJNQ1xuZXhwb3J0IGNsYXNzIFNlY3VyZUNvbmZpZyB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBTZWN1cmVDb25maWdcbiAgcHJpdmF0ZSBpc0luaXRpYWxpemVkID0gZmFsc2VcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogU2VjdXJlQ29uZmlnIHtcbiAgICBpZiAoIVNlY3VyZUNvbmZpZy5pbnN0YW5jZSkge1xuICAgICAgU2VjdXJlQ29uZmlnLmluc3RhbmNlID0gbmV3IFNlY3VyZUNvbmZpZygpXG4gICAgfVxuICAgIHJldHVybiBTZWN1cmVDb25maWcuaW5zdGFuY2VcbiAgfVxuXG4gIC8vIEluaWNpYWxpemFyIGNvbmZpZ3VyYWNpw7NuIHNlZ3VyYVxuICBhc3luYyBpbml0aWFsaXplKGNyZWRlbnRpYWxzUGF0aD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNyZWRlbnRpYWxzTWFuYWdlci5sb2FkQ3JlZGVudGlhbHMoY3JlZGVudGlhbHNQYXRoKVxuICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZVxuICAgICAgY29uc29sZS5sb2coJ/CflJAgQ29uZmlndXJhY2nDs24gc2VndXJhIGluaWNpYWxpemFkYScpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbmljaWFsaXphbmRvIGNvbmZpZ3VyYWNpw7NuIHNlZ3VyYTonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG5cbiAgLy8gT2J0ZW5lciBjb25maWd1cmFjacOzbiBkZSBPcGVuQUlcbiAgZ2V0T3BlbkFJQ29uZmlnKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWRlbnRpYWxzTWFuYWdlci5nZXRPcGVuQUkoKVxuICAgIHJldHVybiB7XG4gICAgICBhcGlLZXk6IGNvbmZpZy5hcGlfa2V5LFxuICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgIG1heFRva2VuczogY29uZmlnLm1heF90b2tlbnMsXG4gICAgICB0ZW1wZXJhdHVyZTogY29uZmlnLnRlbXBlcmF0dXJlXG4gICAgfVxuICB9XG5cbiAgLy8gT2J0ZW5lciBjb25maWd1cmFjacOzbiBkZSBHb29nbGUgU2hlZXRzXG4gIGdldEdvb2dsZVNoZWV0c0NvbmZpZygpIHtcbiAgICBjb25zdCBjb25maWcgPSBjcmVkZW50aWFsc01hbmFnZXIuZ2V0R29vZ2xlU2hlZXRzKClcbiAgICByZXR1cm4ge1xuICAgICAgc2hlZXRJZDogY29uZmlnLnNoZWV0X2lkLFxuICAgICAgc2VydmljZUFjY291bnRFbWFpbDogY29uZmlnLnNlcnZpY2VfYWNjb3VudF9lbWFpbCxcbiAgICAgIHByaXZhdGVLZXk6IGNvbmZpZy5wcml2YXRlX2tleSxcbiAgICAgIHNjb3BlczogY29uZmlnLnNjb3Blc1xuICAgIH1cbiAgfVxuXG4gIC8vIE9idGVuZXIgY29uZmlndXJhY2nDs24gZGUgTW9uZ29EQlxuICBnZXRNb25nb0RCQ29uZmlnKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWRlbnRpYWxzTWFuYWdlci5nZXRNb25nb0RCKClcbiAgICByZXR1cm4ge1xuICAgICAgdXJpOiBjb25maWcudXJpLFxuICAgICAgZGF0YWJhc2U6IGNvbmZpZy5kYXRhYmFzZSxcbiAgICAgIGNvbGxlY3Rpb25zOiBjb25maWcuY29sbGVjdGlvbnNcbiAgICB9XG4gIH1cblxuICAvLyBPYnRlbmVyIGNvbmZpZ3VyYWNpw7NuIGRlIFdoYXRzQXBwXG4gIGdldFdoYXRzQXBwQ29uZmlnKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWRlbnRpYWxzTWFuYWdlci5nZXRXaGF0c0FwcCgpXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc1Rva2VuOiBjb25maWcuYWNjZXNzX3Rva2VuLFxuICAgICAgcGhvbmVOdW1iZXJJZDogY29uZmlnLnBob25lX251bWJlcl9pZCxcbiAgICAgIHZlcmlmeVRva2VuOiBjb25maWcudmVyaWZ5X3Rva2VuLFxuICAgICAgd2ViaG9va1VybDogY29uZmlnLndlYmhvb2tfdXJsXG4gICAgfVxuICB9XG5cbiAgLy8gT2J0ZW5lciBjb25maWd1cmFjacOzbiBkZSBuOG5cbiAgZ2V0TjhOQ29uZmlnKCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWRlbnRpYWxzTWFuYWdlci5nZXROOE4oKVxuICAgIHJldHVybiB7XG4gICAgICB3ZWJob29rVXJsOiBjb25maWcud2ViaG9va191cmwsXG4gICAgICBhcGlLZXk6IGNvbmZpZy5hcGlfa2V5LFxuICAgICAgYmFzZVVybDogY29uZmlnLmJhc2VfdXJsXG4gICAgfVxuICB9XG5cbiAgLy8gT2J0ZW5lciBjb25maWd1cmFjacOzbiBkZWwgc2lzdGVtYVxuICBnZXRTeXN0ZW1Db25maWcoKSB7XG4gICAgY29uc3QgY29uZmlnID0gY3JlZGVudGlhbHNNYW5hZ2VyLmdldFN5c3RlbSgpXG4gICAgcmV0dXJuIHtcbiAgICAgIGVudmlyb25tZW50OiBjb25maWcuZW52aXJvbm1lbnQsXG4gICAgICBtYXhDb250ZXh0VG9rZW5zOiBjb25maWcubWF4X2NvbnRleHRfdG9rZW5zLFxuICAgICAgbWF4TWVzc2FnZXNQZXJTZXNzaW9uOiBjb25maWcubWF4X21lc3NhZ2VzX3Blcl9zZXNzaW9uLFxuICAgICAgaW5hY3Rpdml0eVRpbWVvdXRNaW51dGVzOiBjb25maWcuaW5hY3Rpdml0eV90aW1lb3V0X21pbnV0ZXMsXG4gICAgICBkZWZhdWx0Wm9uZTogY29uZmlnLmRlZmF1bHRfem9uZSxcbiAgICAgIGVuY3J5cHRpb25LZXk6IGNvbmZpZy5lbmNyeXB0aW9uX2tleVxuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXIgdG9kYXMgbGFzIGNyZWRlbmNpYWxlc1xuICB2YWxpZGF0ZUFsbENyZWRlbnRpYWxzKCkge1xuICAgIHJldHVybiBjcmVkZW50aWFsc01hbmFnZXIudmFsaWRhdGVDcmVkZW50aWFscygpXG4gIH1cblxuICAvLyBPYnRlbmVyIHJlc3VtZW4gZGUgY29uZmlndXJhY2nDs24gKHNpbiBkYXRvcyBzZW5zaWJsZXMpXG4gIGdldENvbmZpZ1N1bW1hcnkoKSB7XG4gICAgcmV0dXJuIGNyZWRlbnRpYWxzTWFuYWdlci5nZXRDcmVkZW50aWFsc1N1bW1hcnkoKVxuICB9XG5cbiAgLy8gVmVyaWZpY2FyIHNpIGVzdMOhIGluaWNpYWxpemFkb1xuICBpc1JlYWR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzSW5pdGlhbGl6ZWRcbiAgfVxufVxuXG4vLyBJbnN0YW5jaWEgZ2xvYmFsXG5leHBvcnQgY29uc3Qgc2VjdXJlQ29uZmlnID0gU2VjdXJlQ29uZmlnLmdldEluc3RhbmNlKClcblxuLy8gRnVuY2nDs24gZGUgY29udmVuaWVuY2lhIHBhcmEgaW5pY2lhbGl6YXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU2VjdXJlQ29uZmlnKGNyZWRlbnRpYWxzUGF0aD86IHN0cmluZyk6IFByb21pc2U8U2VjdXJlQ29uZmlnPiB7XG4gIGF3YWl0IHNlY3VyZUNvbmZpZy5pbml0aWFsaXplKGNyZWRlbnRpYWxzUGF0aClcbiAgcmV0dXJuIHNlY3VyZUNvbmZpZ1xufSJdLCJuYW1lcyI6WyJjcmVkZW50aWFsc01hbmFnZXIiLCJTZWN1cmVDb25maWciLCJpc0luaXRpYWxpemVkIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImluaXRpYWxpemUiLCJjcmVkZW50aWFsc1BhdGgiLCJsb2FkQ3JlZGVudGlhbHMiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJnZXRPcGVuQUlDb25maWciLCJjb25maWciLCJnZXRPcGVuQUkiLCJhcGlLZXkiLCJhcGlfa2V5IiwibW9kZWwiLCJtYXhUb2tlbnMiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJnZXRHb29nbGVTaGVldHNDb25maWciLCJnZXRHb29nbGVTaGVldHMiLCJzaGVldElkIiwic2hlZXRfaWQiLCJzZXJ2aWNlQWNjb3VudEVtYWlsIiwic2VydmljZV9hY2NvdW50X2VtYWlsIiwicHJpdmF0ZUtleSIsInByaXZhdGVfa2V5Iiwic2NvcGVzIiwiZ2V0TW9uZ29EQkNvbmZpZyIsImdldE1vbmdvREIiLCJ1cmkiLCJkYXRhYmFzZSIsImNvbGxlY3Rpb25zIiwiZ2V0V2hhdHNBcHBDb25maWciLCJnZXRXaGF0c0FwcCIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwicGhvbmVOdW1iZXJJZCIsInBob25lX251bWJlcl9pZCIsInZlcmlmeVRva2VuIiwidmVyaWZ5X3Rva2VuIiwid2ViaG9va1VybCIsIndlYmhvb2tfdXJsIiwiZ2V0TjhOQ29uZmlnIiwiZ2V0TjhOIiwiYmFzZVVybCIsImJhc2VfdXJsIiwiZ2V0U3lzdGVtQ29uZmlnIiwiZ2V0U3lzdGVtIiwiZW52aXJvbm1lbnQiLCJtYXhDb250ZXh0VG9rZW5zIiwibWF4X2NvbnRleHRfdG9rZW5zIiwibWF4TWVzc2FnZXNQZXJTZXNzaW9uIiwibWF4X21lc3NhZ2VzX3Blcl9zZXNzaW9uIiwiaW5hY3Rpdml0eVRpbWVvdXRNaW51dGVzIiwiaW5hY3Rpdml0eV90aW1lb3V0X21pbnV0ZXMiLCJkZWZhdWx0Wm9uZSIsImRlZmF1bHRfem9uZSIsImVuY3J5cHRpb25LZXkiLCJlbmNyeXB0aW9uX2tleSIsInZhbGlkYXRlQWxsQ3JlZGVudGlhbHMiLCJ2YWxpZGF0ZUNyZWRlbnRpYWxzIiwiZ2V0Q29uZmlnU3VtbWFyeSIsImdldENyZWRlbnRpYWxzU3VtbWFyeSIsImlzUmVhZHkiLCJzZWN1cmVDb25maWciLCJpbml0aWFsaXplU2VjdXJlQ29uZmlnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/secure-config.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/googleapis","vendor-chunks/openai","vendor-chunks/google-auth-library","vendor-chunks/googleapis-common","vendor-chunks/math-intrinsics","vendor-chunks/gaxios","vendor-chunks/es-errors","vendor-chunks/qs","vendor-chunks/jws","vendor-chunks/call-bind-apply-helpers","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/get-proto","vendor-chunks/object-inspect","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/gtoken","vendor-chunks/url-template","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/safe-buffer","vendor-chunks/jwa","vendor-chunks/hasown","vendor-chunks/get-intrinsic","vendor-chunks/extend","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/call-bound","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintegrated-quote%2Froute&page=%2Fapi%2Fintegrated-quote%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintegrated-quote%2Froute.ts&appDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmatias%2FDocuments%2FGitHub%2FDashboard-bmc%2Fproyecto-cotizacion-whatsapp%2F05_dashboard_ui&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();